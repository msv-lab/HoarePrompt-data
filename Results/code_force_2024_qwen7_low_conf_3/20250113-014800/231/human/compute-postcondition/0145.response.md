Postcondition: ***`total` is 0, `i` is 3, `n + m` must be greater than 0, `res` is recalculated for `i = 3`. If `bad != -1` and `i < bad` and `types[i] == badType`, then `val` is `ans - a[types[3]][3] + a[badType][bad] - a[1 - badType][bad] + a[1 - badType][n + m]`. Otherwise, `val` is `ans - a[types[3]][3] + a[types[3]][n + m]`***