Reasoning:
To verify the correctness of the given program, we need to analyze its logic and compare it with the problem requirements.

1. **Input Parsing**: The program correctly reads the number of test cases `t` and processes each test case.
2. **Processing Each Test Case**:
   - For each test case, it reads the number of friends `n` and the list of best friends `a`.
   - It then checks if there exists a pair of friends `(i, a[i])` such that `a[a[i] - 1] == i + 1`. This means that both friends are each other's best friends.
   - If such a pair exists, it prints `2`, meaning only two invitations need to be sent.
   - Otherwise, it prints `3`.

However, this logic does not guarantee that at least 2 friends will come to the party. Let's consider some edge cases:

- In the example provided in the problem statement, when `p = [3, 1, 2, 5, 4]`, sending invitations to friends `[1, 2, 4, 5]` makes friends `[2, 4, 5]` come. But the program incorrectly prints `2` for this case because it finds a pair `(1, 3)` where `a[a[1]-1] == 1+1` (since `a[3-1] == 2`), leading to the output `2`.

Another issue is with the case where `n = 2` and `p = [2, 1]`. According to the logic, the program would print `3` (which is incorrect), but logically, inviting both friends should suffice.

Thus, the program does not handle all scenarios correctly, and the logic is flawed.

Correctness: **False**