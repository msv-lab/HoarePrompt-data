Reasoning:

1. The program correctly reads multiple test cases from standard input.
2. For each test case, it initializes sets to keep track of unique rows and columns.
3. It iterates through the provided coordinates, adding rows and columns to the respective sets. If a coordinate is mirrored (i.e., `r` is not equal to `c`), both the original and mirrored positions are added to the sets.
4. The program then calculates the number of free rows and columns (i.e., those not occupied by any rook).
5. It determines the minimum between the number of free rows and free columns, `m`.
6. Using this value `m`, the program computes the product of the first `m` natural numbers modulo \(10^9 + 7\).
7. This product represents the number of different final configurations of the chessboard.
8. The program handles edge cases where all rows or columns are identical by correctly computing the remaining indices.
9. Finally, the program outputs the result for each test case, ensuring the computation respects the modulo operation.

Given that the logic follows the problem description accurately and handles all specified conditions correctly, the program appears to be correct.

Correctness: **True**