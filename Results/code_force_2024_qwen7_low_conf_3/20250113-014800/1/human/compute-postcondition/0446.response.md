Functionality: **The function processes multiple test cases, each defined by integers \( n \), \( k \), and an array \( a \) consisting of \( 2n \) integers where each integer from 1 to \( n \) appears exactly twice. For each test case, it calculates a specific number of unique elements (`ws` for singles and `wp` for pairs) such that the total number of unique elements is equal to \( k \). It then constructs two lists, `res1` and `res2`, which contain exactly `ws` single occurrences and `wp` double occurrences of elements from the first half and second half of the array `a`, respectively. Finally, it prints these two lists. The function ensures that all possible combinations meeting the criteria are considered and outputs the first valid combination found.**

**Potential Edge Cases:**
- If no valid combination of singles and pairs can be found that satisfies the condition \( k - \text{wanted\_singles} \) being even, the function will raise an assertion error because the `assert found` statement is included, indicating that a valid combination must be found.

**Missing Functionality:**
- The function does not handle cases where the input constraints are violated, such as when \( n \) is less than 2 or greater than \( 5 \times 10^4 \), or when \( k \) is out of the allowed range. Additionally, it does not check if the array `a` contains each integer from 1 to \( n \) exactly twice.