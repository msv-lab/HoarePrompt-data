Postcondition: **`i` is at least 2, `n` is at least 1, `q` is a non-negative integer and at most `n`, `nodes` is a list of length `n + 1`, `a` is a sequence of values, `seg` is a list of length `n + 1`. If `nodes[i]` is True, then `ans` is the value of `ans` before the if-else block plus `seg[i]`, and `cnt` is the previous value of `cnt` plus `seg[i]`. If `nodes[i]` is False, then `ans` is `ans_initial % m`, and `cnt` is the previous value of `cnt` plus 1.**