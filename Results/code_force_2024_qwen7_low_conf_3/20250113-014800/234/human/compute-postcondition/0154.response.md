Postcondition: ***`i` is at least 1, `n` is at least 1, `q` is a non-negative integer and `q` is at most `n`, `nodes` is a list of length `n + 1`, `a` is a sequence of values visited during the traversal up to the point where the loop was broken or terminated, `seg` is a list of length `n + 1` with all elements equal to 0 (except possibly `seg[a[0]]` which could be 2 if `a[q]` is 0, or `seg[a[q]]` which could be 1 if `a[q]` is any other index from 1 to `n`), `ans` is the value of `ans` before the if-else block, possibly updated according to the conditions, `cnt` is `cnt + seg[i]` if `nodes[i]` is True, or 1 if `nodes[i]` is False.***