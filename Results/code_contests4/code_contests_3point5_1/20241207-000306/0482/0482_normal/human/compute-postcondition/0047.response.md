Output State: **`n` and `k` are positive integers within the specified range, `vals` is a list of integers with at least 1 element, `count` is the sum of all `leftmost + 1` values calculated during the loop, `d` is a dictionary with keys as elements from `vals` and corresponding values being lists of indices where the key appears, `leftmost` is the index of the `k-th` last occurrence of a value in `vals` in the dictionary `d`, `i` is the index of the last element in `vals`, `val` is the last element in `vals`, `d[val]` contains a list of indices where `val` appears in `vals`, `dval` is the list of indices where `val` appears, and `dval[-k]` is the index of the `k-th` last occurrence of `val` in `vals`**