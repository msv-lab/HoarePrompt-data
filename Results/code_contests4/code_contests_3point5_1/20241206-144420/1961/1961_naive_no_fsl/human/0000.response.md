Correctness: **True**

Explanation: 
1. The program correctly reads the input for multiple test cases and processes each test case accordingly.
2. The function `func_8` implements the optimal strategy as described in the problem statement by recursively checking all possible choices for the friends you can control.
3. The program then outputs the largest integer x that guarantees the desired outcome based on the strategy implemented in `func_8`.
4. The logic in the code aligns with the problem description and covers all potential cases, ensuring the correct output for each test case.