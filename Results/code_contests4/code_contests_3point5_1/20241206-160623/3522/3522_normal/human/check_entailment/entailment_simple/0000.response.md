Correctness: **True**

The annotated program correctly implements the functions required to process the queries as described in the problem description. The functions `func_1`, `func_2`, and `func_3` handle the type 1 and type 2 queries by updating the tree data structure with the necessary changes and calculating the number of different characters in the substring as required.

The functions update the tree data structure based on the queries and return the correct result for each query type. The program follows the problem description by correctly processing the queries and providing the expected output.

Therefore, the program is correct and meets the requirements of the given problem description.