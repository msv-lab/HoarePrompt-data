Output State: **`be`, `en`, `su` updated based on the conditions, `out` has a new value appended, `ans` is either `n` or `md + 1`, `md` recalculated, `n` is at least `md + 2`, `i` is increased by 1**