The function accepts three parameters: an integer `n` (1 to 50), an integer `w` (100 to 1000), and an integer `m` (2 to 50). It creates a list of `n` bottles and `m` cups, calculates the capacity of each cup, and attempts to fill the cups using the bottles. The function returns a list of ingredients from each cup if all bottles are successfully processed without running into the conditions that would lead to an early return of an empty list. If any bottle cannot completely fill the cups or if there are more bottles than available cups, it returns an empty list.