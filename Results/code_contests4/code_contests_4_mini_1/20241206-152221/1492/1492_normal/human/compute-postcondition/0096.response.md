Output State: **`minstack`, `maxstack`, `maxidx`, and `minidx` are updated accordingly; `dp[i]` is updated to `dp[i - 1] + 1`.**