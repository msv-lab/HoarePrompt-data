Postcondition: ***`maxstack` is empty, `maxidx` is not empty, `minstack` and `minidx` remain empty as all elements greater than `x` have been removed. If `minidx` is not empty, `dp[i]` is updated to be the minimum of its current value and `dp[minidx[-1]] + 1.***