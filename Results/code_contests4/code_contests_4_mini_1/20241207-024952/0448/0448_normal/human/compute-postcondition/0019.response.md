Output State: **`curpos` is assigned the value of `h[hidx]`, `leftget` is the value at index `pidx` of list `p`, `leftime` is either `curpos - leftget` if positive or zero; `remtime` is calculated as max(0, (avg - leftime) // 2)**