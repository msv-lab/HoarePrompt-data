The function accepts a list of integers `xs` and returns a list of counts where each count at index `i` represents the number of distinct integers in `xs` that are smaller than the integer at index `i`. The function handles the case where all elements are the same by returning zero counts for all indices. It is efficient for large lists, as it utilizes sorting and binary indexed trees for cumulative frequency calculations.