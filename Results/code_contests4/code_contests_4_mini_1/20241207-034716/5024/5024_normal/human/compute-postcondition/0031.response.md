Postcondition: ***`n_moves` is `i2 - i1`. If `n_moves` is less than 0, then `n_moves` is updated to `n - i1`. In either case, `res` remains updated to the maximum of its previous value and `n_moves`, with `i2` being assigned the value of `end_m[v1].***