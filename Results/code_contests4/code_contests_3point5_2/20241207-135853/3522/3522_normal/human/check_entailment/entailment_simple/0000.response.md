Correctness: **True**

The annotated program consists of functions that perform the necessary operations to handle the queries described in the problem statement. The functions correctly implement the logic required to change characters in the string and calculate the number of different characters in a substring. The functions handle the queries of type 1 and type 2 as specified in the problem description.

The functions are designed to update the tree data structure and calculate the number of different characters in the substring efficiently. The loop structures in the functions ensure that the necessary checks and updates are made based on the query type.

Overall, the program correctly implements the required functionality for processing the queries and provides the correct output based on the problem description.