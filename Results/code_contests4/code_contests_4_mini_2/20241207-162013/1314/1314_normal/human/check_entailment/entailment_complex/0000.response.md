To determine the correctness of the provided Python program against the problem description, we need to analyze the program step-by-step and assess whether it meets all the requirements specified in the problem description.

### Analysis of the Program:

1. **Input Reading**:
   - The program reads input values for `n`, `m`, and `D`, as well as the edges of the graph. This matches the problem description.

2. **Degree Check for Vertex 1**:
   - The program checks if the degree of vertex 1 (i.e., `len(dmain[1])`) is less than `D`. If so, it prints "NO" and exits. This is correct since the degree must be at least `D` to form a spanning tree with that degree.

3. **Connected Components Check**:
   - It counts the number of connected components (excluding vertex 1) and if that count exceeds `D`, it prints "NO" and exits. This is also correct because having more connected components than `D` would make it impossible to connect them to vertex 1 without exceeding the degree `D`.

4. **Constructing the Spanning Tree**:
   - The program initializes a set to track unique values from `arr` (which represents connected components). It checks the edges connected to vertex 1 and removes connections that would create multiple connections to the same component. This step ensures that the connections are valid and do not exceed the required degree.

5. **Final Spanning Tree Construction**:
   - The program uses a depth-first search (DFS) approach to traverse the graph and builds the spanning tree. It maintains a `res` list to store the edges of the spanning tree.

6. **Output**:
   - Finally, the program outputs "YES" and the edges of the constructed spanning tree.

### Conditions Checked:
- The program checks if vertex 1 has enough connections (at least `D`).
- It ensures that the number of connected components is manageable (not exceeding `D`).
- It constructs the spanning tree while respecting the degree condition for vertex 1.

### Conclusion:
The program correctly implements the requirements outlined in the problem description. It handles the edge cases where it's impossible to satisfy the degree condition for vertex 1 and constructs a valid spanning tree when possible.

### Correctness:
Correctness: **True** 

The program always follows the problem description as it checks the necessary conditions (degree of vertex 1 and the number of connected components) and constructs the spanning tree accordingly, ensuring it meets the requirements specified in the problem.