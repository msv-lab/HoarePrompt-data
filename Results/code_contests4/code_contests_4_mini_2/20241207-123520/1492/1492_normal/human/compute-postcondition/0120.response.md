Postcondition: ***`maxstack` contains only elements that are greater than or equal to `x`, `maxidx` contains the indices corresponding to these elements, and `maxidx` is non-empty. If `minidx` is non-empty, then `dp[i]` is updated to the minimum of its current value and `dp[minidx[-1]] + 1`. If `minidx` is empty, there is no update to `dp[i]`.***