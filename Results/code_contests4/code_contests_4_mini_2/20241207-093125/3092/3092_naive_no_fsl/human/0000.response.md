Correctness: **False**

The provided program does not handle all cases correctly. Specifically, the logic for determining when it is impossible to make all substrings distinct is flawed.

1. If the length of the string `n` is greater than 26 (the number of distinct lowercase English letters), it correctly returns -1 since it's impossible to have a string of length greater than 26 with all distinct characters.
2. However, when `n` is less than or equal to 26, the program only calculates the number of changes needed as `n - len(set(s))`. This calculation only counts the number of duplicate characters but does not account for the fact that having duplicate characters can lead to non-distinct substrings, even if the number of distinct characters is less than or equal to 26.

For example, consider the input:

```
5
aaabc
```

In this case:
- The distinct characters are `{'a', 'b', 'c'}`, so `len(set(s)) = 3`.
- The program computes `result = 5 - 3 = 2`, suggesting that 2 changes are sufficient.

However, the string "aaabc" has non-distinct substrings like "aa" and "a" (the empty substring is also counted, but it does not affect distinctness in this context). Thus, it is possible that more changes are necessary to ensure all substrings are distinct.

Additionally, the program fails to consider the need for a general algorithm to ensure all substrings are distinct, meaning that changes may need to be made in a more structured manner than simply counting duplicates.

Therefore, since the program does not cover all potential cases correctly, the conclusion is that it is incorrect.