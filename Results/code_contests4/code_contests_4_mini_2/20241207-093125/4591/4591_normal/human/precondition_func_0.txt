The function processes multiple datasets of positive integers q, where 1 <= q < 2^31, and terminates when the input is -1. The number of datasets does not exceed 50.