To verify the correctness of the provided program against the problem description, we need to analyze the logic and flow of the program step-by-step, ensuring it meets the requirements outlined.

### Problem Requirements Recap:
1. The program must find a spanning tree of an undirected graph such that the degree of vertex 1 equals D.
2. If such a spanning tree cannot be formed, the program should output "NO".
3. If it can be formed, the program should print "YES" followed by the edges of the spanning tree.

### Program Analysis:
1. **Input Reading**: The program reads the number of vertices (n), edges (m), and required degree (D). It then constructs two adjacency lists:
   - `ds`: Edges excluding those connected to vertex 1.
   - `dmain`: All edges including those connected to vertex 1.

2. **Degree Check for Vertex 1**: The program checks if the degree of vertex 1 (length of `dmain[1]`) is less than D. If true, it outputs "NO", which is correct as we cannot form a spanning tree with a degree for vertex 1 less than D.

3. **Connected Components Count**: The program uses a modified DFS to count the number of distinct connected components reachable from vertices other than vertex 1, stored in `cur`. If `cur` exceeds D, it outputs "NO". This check ensures that if we have more components than the degree required, we cannot connect them without exceeding the degree limit.

4. **Building the Spanning Tree**: The program iterates through the neighbors of vertex 1 and attempts to add edges to the spanning tree while ensuring that it does not exceed the degree D. It uses sets to track which components have been connected to maintain the required degree for vertex 1.

5. **Final Construction of the Spanning Tree**: The program then performs a BFS-like structure to gather the edges of the spanning tree. It collects the edges in the `res` list, which will be printed later.

6. **Output**: Finally, it prints "YES" and the edges collected in `res`.

### Correctness Evaluation:
- The program correctly checks the conditions for forming a spanning tree with the required degree for vertex 1.
- It keeps track of the components and ensures that the number of edges connected to vertex 1 does not exceed D.
- The algorithm follows the necessary steps to construct a valid spanning tree and correctly handles the cases where no spanning tree can be formed.

### Conclusion:
The program correctly implements the requirements of the problem description. It checks for necessary conditions and constructs the spanning tree while respecting the constraints.

Correctness: **True**