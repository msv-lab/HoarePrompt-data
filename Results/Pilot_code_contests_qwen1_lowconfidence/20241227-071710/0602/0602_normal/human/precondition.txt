graph is a dictionary representing an undirected graph where keys are room numbers (integers from 1 to N) and values are lists of room numbers directly connected by passages. N and M are integers such that 2 ≤ N ≤ 10^5 and 1 ≤ M ≤ 2 × 10^5.