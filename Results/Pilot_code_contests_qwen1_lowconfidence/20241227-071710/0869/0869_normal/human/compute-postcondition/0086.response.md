Postcondition: ***`v` is the last element of `Q` after pop, `Q` is `Q` with `i` appended, `nbr[v]` contains at least one unmarked element, `i` is in `marked`, `res` contains `i` (possibly twice), and `marked` contains `i`. If `i` is not in `marked`, `res` contains `i` twice.***