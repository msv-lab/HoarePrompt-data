Postcondition: **`v` is the last element of `Q` after pop, `Q` is `Q` with `i` appended, `nbr[v]` contains at least one element, `i` is now in `marked`, `res` contains `i`**