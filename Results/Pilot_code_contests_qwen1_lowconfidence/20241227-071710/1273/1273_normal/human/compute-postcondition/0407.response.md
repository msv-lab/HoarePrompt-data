Postcondition: ***`e[cur]` is non-empty, `q` contains at least three nodes, and either `dep[to]` is equal to `dep[cur] + 1` or `dep[to]` remains unchanged (since there is no else part).***