Postcondition: ***`q` is a deque containing either `next_to` and `to` or just `next_to`, `cur` is 0, `end` is `next_to`, `dep` is a list of length \( n + 1 \) where all elements are -1 except `dep[1]` which is 0 and `dep[to]` which is 1 (if `dep[to]` is updated), `dep[next_to]` is 0, `pred` is a list of length \( n + 1 \) where all elements are 0 except `pred[next_to]` which is 1 and `pred[to]` is `next_to` (if `pred[to]` is updated).***