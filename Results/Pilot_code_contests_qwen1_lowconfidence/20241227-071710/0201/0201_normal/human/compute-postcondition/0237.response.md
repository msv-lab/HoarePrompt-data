Postcondition: ***`flag` is equal to `nodes[p + 1]`, `new_nodes` contains the original elements plus `p` and includes `nodes[p] * 2`, `index` is `nodes[p] * 2`, and `p` is `nodes[p] * 2`. If `index` is less than or equal to 0, we break out of the most internal loop or match-case.***