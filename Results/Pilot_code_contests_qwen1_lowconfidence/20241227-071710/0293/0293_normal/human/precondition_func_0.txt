a is an integer representing N (the number of switches), b is a list of tuples where each tuple contains an integer representing k_i and a list of integers representing s_{ij} for each bulb, and the last element of b is a list of integers representing p_i.