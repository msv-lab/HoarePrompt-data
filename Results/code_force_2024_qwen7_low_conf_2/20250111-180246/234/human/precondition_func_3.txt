n and q are integers such that 1 ≤ q < n ≤ 3 × 10^5, and l_i and r_i are integers such that 1 ≤ l_i, r_i ≤ n for all 1 ≤ i ≤ q.