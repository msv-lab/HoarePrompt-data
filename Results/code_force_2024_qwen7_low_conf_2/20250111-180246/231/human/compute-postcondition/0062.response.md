Output State: **`res` is now `[val]`, where `val` is `ans - a[types[previous_i + 2]][previous_i + 2] + a[badType][bad] - a[1 - badType][bad] + a[1 - badType][n + m]`**