Postcondition: ***`i` is in the range `[1, n + m - 1]`. `val` is either `ans - a[types[i]][i] + a[badType][bad] - a[1 - badType][bad] + a[1 - badType][n + m]` if `bad != -1` and `i < bad` and `types[i] == badType`, or `(ans - a[types[i]][i]) + a[types[i]][n + m]` otherwise. `res` is a list containing the updated `val`.***