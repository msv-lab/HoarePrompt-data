t is an integer representing the number of test cases, n is an integer such that 2 <= n <= 10^5, edges is a list of integers where 1 <= a_i < i for all i in range 2 to n, and student_types is a string of length n consisting of characters 'P', 'S', and 'C'.