### Reasoning:

1. **Input Parsing and Initialization**:
   - The code correctly reads the input using `sys.stdin.read` and splits it into tokens.
   - It initializes variables and processes each test case appropriately.

2. **Handling Rows and Columns**:
   - The code uses sets to keep track of used rows and columns.
   - For each move, it adds the row and column to the respective sets. If the row and column are different, it also adds the column and row to the sets, effectively mirroring the move.

3. **Calculating Free Rows and Columns**:
   - After processing all moves, it calculates the number of free rows (`free_rows`) and columns (`free_cols`) by subtracting the sizes of the sets from `n`.

4. **Determining the Minimum Free Rows/Columns**:
   - It determines the minimum number of free rows and columns (`m`).

5. **Calculating the Number of Configurations**:
   - It calculates the number of ways to place rooks on the free rows and columns by computing the factorial of `m` (minimum free rows/columns) modulo \(10^9 + 7\).

6. **Output**:
   - It prints the result for each test case, which is the number of configurations modulo \(10^9 + 7\).

Given the problem constraints and the logic in the code, the code appears to correctly compute the number of possible final configurations based on the provided rules and constraints.

### Correctness:
**True**

The provided Python program is correct based on the problem description.