The function `func` accepts no explicit parameters. Instead, it operates on global or predefined variables `n`, `q`, and `w_i`. The variable `n` is an integer such that 1 ≤ n ≤ 1000, and `q` is an integer such that 1 ≤ q ≤ 1000. Each magic word `w_i` is a string consisting of characters 'X' and 'O', with a length between 1 and 30 * n inclusive. The power of a spell `p_j` is an integer computed by concatenating two randomly chosen magic words `w_{u_j}` and `w_{v_j}` and counting the number of different non-empty substrings.

Functionality: **The function accepts no explicit parameters but operates on predefined integers n and q, and strings w_i. It computes the power of a spell p_j by concatenating two randomly chosen magic words w_{u_j} and w_{v_j} and counting the number of different non-empty substrings.**