The function accepts an integer `n` (1 ≤ n ≤ 3) and a list of `n` lists `cubes`, each containing exactly 6 integers. It returns the largest integer `x` such that `can_form_number(x)` is True, or 0 if `can_form_number(1)` is False. The function does not validate the structure of `cubes` and does not handle potential errors from invalid input.