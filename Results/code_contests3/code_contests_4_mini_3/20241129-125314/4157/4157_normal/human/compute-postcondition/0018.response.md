The function `func` accepts the following parameters: 
- `n`: a positive integer representing the number of trolleybuses (1 ≤ n ≤ 100,000).
- `a`: a positive integer representing the maximum acceleration of the trolleybuses (1 ≤ a ≤ 1,000,000).
- `d`: a positive integer representing the distance to the final station (1 ≤ d ≤ 1,000,000).
- A list of tuples for each trolleybus `i` (1 ≤ i ≤ n), where each tuple contains:
  - `ti`: a non-negative integer representing the departure time of the i-th trolleybus (0 ≤ ti ≤ 1,000,000), with the condition that the departure times are strictly increasing.
  - `vi`: a positive integer representing the maximum speed of the i-th trolleybus (1 ≤ vi ≤ 1,000,000).

The function calculates and returns the time it takes for each trolleybus to reach the final station based on the provided parameters. 

Functionality: **The function accepts parameters n, a, d, and a list of tuples (ti, vi) for each trolleybus, and returns the time taken for each trolleybus to reach the final station based on their departure times and speeds.**