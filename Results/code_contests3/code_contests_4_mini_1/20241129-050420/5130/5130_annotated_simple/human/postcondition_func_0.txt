The function accepts an integer `n`, a list `p` representing a permutation of integers from 1 to `n`, and a list `b` consisting of zeros and ones. It identifies the number of distinct components in the permutation `p` and checks if all values in list `b` are zeros. The function returns the number of distinct components minus one if there is more than one component, or zero if there is only one component, and adds one to the result if all values in `b` are zeros.