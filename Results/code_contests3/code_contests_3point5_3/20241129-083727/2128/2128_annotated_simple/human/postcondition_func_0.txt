The function `func` reads input from the standard input, processes it according to the given conditions, and prints the result. It reads an integer `t` from input, then for each iteration up to `t`, it reads two integers `n` and `k`, followed by a list of integers `arr`. The function sorts `arr` in descending order, calculates the sum of the first `k+1` elements in `arr`, and prints the result. If `k` is greater than or equal to `n`, `k` is set to `n-1`.