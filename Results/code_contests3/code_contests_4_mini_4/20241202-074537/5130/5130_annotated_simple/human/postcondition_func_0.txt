The function accepts a positive integer `n` and two lists: `p`, which is a permutation of integers from 1 to `n`, and `b`, which contains only 0s and 1s with a length equal to `n`. It calculates the number of distinct components in the permutation defined by `p`. The function returns 0 if there is only one component; otherwise, it returns the total number of distinct components plus 1 if the sum of `b` is 0, indicating that all entries in `b` are 0.