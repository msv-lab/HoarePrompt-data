The function `func` reads an integer `t` from the standard input and then iterates `t` times. For each iteration, it reads two integers `n` and `k`, followed by a list of integers `arr`. The function sorts `arr` in descending order, calculates the sum of the first element and a subset of elements from `arr` based on the value of `k`, and prints the result. The function modifies `k` if it is greater than or equal to `n`.