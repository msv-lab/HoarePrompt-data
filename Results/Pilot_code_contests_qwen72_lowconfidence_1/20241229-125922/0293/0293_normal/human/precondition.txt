N and M are integers where 1 ≤ N, M ≤ 10; connections is a list of lists, where each inner list contains unique integers representing the switches connected to a bulb, and each inner list has a length k_i such that 1 ≤ k_i ≤ N; p is a list of integers where each element is either 0 or 1, and the length of p is M.