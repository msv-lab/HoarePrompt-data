f is a dictionary where keys are integers representing the number of items (1 ≤ n ≤ 105), and values are tuples of five integers (l, r, Ql, Qr, weights) where 1 ≤ l, r ≤ 100, 1 ≤ Ql, Qr ≤ 104, and weights is a list of n integers (1 ≤ wi ≤ 100) representing the weights of the items.