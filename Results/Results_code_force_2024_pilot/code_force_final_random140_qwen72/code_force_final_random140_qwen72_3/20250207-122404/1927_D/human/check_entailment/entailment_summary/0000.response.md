Reasoning:

1. **Input Handling**: The function correctly reads the number of test cases and iterates over them. For each test case, it reads the size of the array, the array itself, and the number of queries. This part is handled correctly.

2. **Array Construction**: The function constructs a new list `a` that tracks the last position where the element changed. This is done by iterating through the input array and updating the list `a` accordingly. The logic here is to keep track of the most recent index where a different element was encountered.

3. **Query Processing**: For each query, the function checks if the value at the end of the range (`a[r]`) is within the valid range (`l`). If `a[r]` is less than `l`, it means there are no different elements in the range `[l, r]`, and the function prints `-1 -1`. Otherwise, it prints the indices `a[r]` and `r`.

4. **Edge Cases**: The function handles edge cases correctly, such as when the range `[l, r]` contains only one unique element or when the range is invalid.

5. **Efficiency**: The function processes each test case in linear time relative to the size of the array and the number of queries, which is efficient given the constraints.

Based on the above reasoning, the program appears to correctly solve the problem as described.

Correctness: **True**