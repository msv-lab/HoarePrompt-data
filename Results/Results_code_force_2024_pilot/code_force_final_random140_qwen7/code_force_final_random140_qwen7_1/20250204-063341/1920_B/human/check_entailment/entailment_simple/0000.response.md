### Reasoning:

1. **Input Handling**: The program correctly reads the number of test cases (`t`), and for each test case, it reads `n`, `k`, `x`, and the array `a`.

2. **Sorting and Reversing**: The array `a` is sorted in descending order. This step is crucial because it allows Alice to remove the smallest elements first, which helps in maximizing the sum of the remaining elements.

3. **Sum Calculation**: The initial sum of the array `a` is calculated and stored in `sum1`.

4. **Loop Logic**:
   - The loop iterates from `0` to `k`.
   - For each iteration `i`:
     - If `i == 0`, it calculates the sum after removing the smallest `x + 1` elements and doubling their negative contribution.
     - Otherwise, it updates the sum by adding the `i-th` element and subtracting twice the `(i + x - 1)-th` element.
   - The result of each iteration is appended to the list `ans`.

5. **Final Output**: The maximum value from the list `ans` is printed, which represents the optimal sum of the array after both players make their moves.

6. **Edge Cases**:
   - If `k` is large enough to cover the entire array, the program handles this by ensuring the loop runs up to `k + 1` and correctly updates the sum.
   - The logic ensures that Bob's moves (multiplying up to `x` elements by `-1`) are considered optimally.

Given the above analysis, the program correctly implements the logic to find the optimal sum of the array after both players make their moves.

### Conclusion:
Correctness: **True**