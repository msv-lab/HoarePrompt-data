Postcondition: `check_all` remains unchanged, `new_all` remains unchanged, `i` becomes 0, and `n` remains the same as before.