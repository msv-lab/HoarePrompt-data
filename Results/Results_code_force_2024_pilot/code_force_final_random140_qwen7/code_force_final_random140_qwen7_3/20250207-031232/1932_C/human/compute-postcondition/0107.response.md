Postcondition: `s` is a non-empty string, `strr` is the next character from the reversed string `s[::-1]`, `p` is updated according to the following rules: if `strr` is 'R', then `p` is updated to `p * arr[1] % m` and `r` is set to 2; otherwise, `l` is decremented by 1 and `p` is updated to `p * arr[l] % m`.