Postcondition: `e` is a non-empty string, `P` is either 2 or 1 depending on whether the next character `q` is '+', `M` is updated to `M + 1` if `q` is not '+'.