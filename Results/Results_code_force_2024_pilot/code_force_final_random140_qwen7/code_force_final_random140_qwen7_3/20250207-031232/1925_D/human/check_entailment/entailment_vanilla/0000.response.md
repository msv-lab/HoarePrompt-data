Let's analyze the given program step-by-step to determine if it correctly solves the problem.

### Step-by-Step Analysis:

1. **Initialization and Input Reading:**
   - `MOD` is set to \(10^9 + 7\).
   - The number of test cases `T` is read.
   - For each test case, `n`, `m`, and `k` are read.
   
2. **Sum of Friendship Values:**
   - A variable `S` is initialized to 0.
   - For each of the `m` pairs, the friendship value `f_i` is added to `S`.

3. **Total Possible Pairs Calculation:**
   - `C` is calculated as \(\frac{n \times (n - 1)}{2}\), which represents the total number of unique pairs of children.

4. **Expected Value Calculation:**
   - The numerator `num` is calculated as \(p \times k \times k - p \times k + 2 \times k \times C \times S\).
   - The denominator `den` is calculated as \(2 \times C \times C\).
   - The greatest common divisor (GCD) of `num` and `den` is computed using `math.gcd`.
   - Both `num` and `den` are divided by the GCD to simplify the fraction.
   - `den` is then inverted modulo \(10^9 + 7\) using `pow(den, -1, MOD)`.
   - Finally, the result is computed as `num * den % MOD` and printed.

### Correctness Check:

1. **Sum of Friendship Values:**
   - The sum `S` of friendship values is correctly accumulated from the input.

2. **Total Number of Pairs:**
   - The calculation of `C` as \(\frac{n \times (n - 1)}{2}\) is correct.

3. **Expected Value Formula:**
   - The formula used to compute the expected value seems to be derived from the problem statement, but let's verify the logic:
     - The expected value of the sum of friendship values for each excursion can be derived from the probability of picking a friend pair and the increase in friendship value.
     - The formula \(p \times k \times k - p \times k + 2 \times k \times C \times S\) seems to account for the expected increase in friendship values over `k` excursions.

4. **GCD and Modulo Inversion:**
   - The use of GCD to simplify the fraction and then inverting the denominator modulo \(10^9 + 7\) is correct for handling large numbers and ensuring the result fits within the required constraints.

5. **Final Computation:**
   - The final computation `num * den % MOD` is correct for obtaining the result in the required format.

Given the analysis, the program appears to follow the correct approach and logic to solve the problem as described.

### Conclusion:
Correctness: **True**