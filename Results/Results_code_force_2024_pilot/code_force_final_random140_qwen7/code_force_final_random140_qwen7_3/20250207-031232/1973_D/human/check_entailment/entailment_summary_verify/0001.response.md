### Reasoning

The provided program appears to correctly implement the required functionality based on the problem statement. Here are the key points that support this conclusion:

1. **Function `func_1(l, x)`**:
   - This function correctly formats and sends a query to the judge and reads the response. It ensures that the response is valid and within the expected range.

2. **Function `func_2(m)`**:
   - This function correctly formats and sends the final answer to the judge and checks the response to ensure the answer is correct.

3. **Function `func_3()`**:
   - This function first determines the initial maximum value `i` such that `f(1, i) = i * n`. This is done by querying the judge for the smallest `r` such that `f(1, r) = i * n`.
   - It then iterates over possible values of `m` (which is `i * max_val`) and checks if it can split the array into `k` subarrays where each subarray satisfies `f(l, r) = m`.
   - If it finds such an `m`, it calls `func_2(m)` to submit the answer.
   - If no such `m` is found, it calls `func_2(-1)` to indicate that no valid split exists.

4. **Function `func_4()`**:
   - This function correctly processes multiple test cases by calling `func_3()` for each test case.

Given the detailed analysis, the program seems to handle all aspects of the problem correctly. The logic for finding the initial maximum value and checking the splits is sound, and the interactions with the judge are handled properly.

### Final Evaluation

Final: **True**

The given program is correct based on the provided problem description and function summaries.