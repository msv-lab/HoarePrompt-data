The function accepts a positive integer `n`, a list `p` representing a permutation of integers from 0 to `n-1`, and a list `b` consisting of integers (0s and 1s) with length `n`. It identifies the number of distinct components in the graph represented by `p` and returns 0 if there is exactly one component; otherwise, it returns the count of components. Additionally, if the sum of elements in `b` is zero, it adds 1 to the result. The function does not handle potential cycles in the permutation that could lead to infinite loops, which is a critical edge case.