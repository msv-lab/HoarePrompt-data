The function reads multiple test cases, each consisting of the number of children, the number of pairs of friends, the number of excursions, and the list of friendships with their values. For each test case, it computes and prints the total sum of the friendship values for the selected pairs of friends who go on excursions, ensuring that each child participates in at most one excursion.