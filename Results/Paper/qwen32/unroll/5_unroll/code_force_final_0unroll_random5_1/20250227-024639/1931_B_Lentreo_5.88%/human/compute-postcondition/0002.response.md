To determine the output state after all iterations of the loop, we need to understand the behavior of the code given the initial state and constraints. 

The loop iterates `t` times, and for each iteration:
1. It reads an integer `n`, which is the number of elements in the list `nums`.
2. It reads a list `nums` of `n` integers.
3. It initializes `last` to the last element of `nums`.
4. It initializes `curr` to 0.
5. It iterates over each element `i` in `nums`:
   - If `i` is not 0, it adds `i - last` to `curr`.
6. After the inner loop, it checks if `curr` is 0:
   - If `curr` is 0, it prints 'YES'.
   - Otherwise, it prints 'NO'.

The key observation here is that `curr` accumulates the sum of differences between each non-zero element and the last element of the list. For `curr` to be 0, the sum of these differences must cancel out.

Given the constraint that the sum of `a_i` for each test case is divisible by `n`, and knowing the behavior of the inner loop, we can conclude that the output for each test case will be 'YES' if the conditions specified in the code are met.

However, without specific input values, we cannot determine the exact sequence of 'YES' or 'NO' outputs for each test case. But based on the logic of the code, we can describe the final state after all iterations in terms of the printed outputs.

Output State: **The output will be a series of 'YES' or 'NO' printed for each test case, depending on whether the condition `curr == 0` is satisfied for each test case.**