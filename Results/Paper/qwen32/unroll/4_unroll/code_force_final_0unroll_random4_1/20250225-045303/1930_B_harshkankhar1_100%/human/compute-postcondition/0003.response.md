Functionality: **The function accepts multiple test cases. Each test case consists of an integer `n` (3 ≤ n ≤ 10^5), representing the length of a permutation `p`. The function processes these test cases and returns some output based on the permutation `p` for each test case.**