Functionality: **The function accepts an integer `n` and a matrix of size `n x n` where each element is either 'F', 'S', '?', or '.'. It returns a configuration of the matrix where each '?' is replaced by either 'F' or 'S' such that no more than floor(n/2) characters in the entire matrix are 'F' or 'S'.**