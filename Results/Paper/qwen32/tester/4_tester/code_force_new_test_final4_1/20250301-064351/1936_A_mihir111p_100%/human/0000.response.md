Sure, let's create a comprehensive set of test cases for the given problem, covering both basic and edge scenarios.

### Basic Test Cases

#### Test 1
**Input**:
```
1
4
```
**Output**:
```
? 0 1 2 3
? 0 2 1 3
? 0 3 1 2
! 0 3
```
**Explanation**: This test case checks a simple scenario with a small permutation size. The goal is to verify that the basic logic of querying and comparing works correctly.

#### Test 2
**Input**:
```
1
5
```
**Output**:
```
? 0 1 2 3
? 0 2 1 3
? 0 3 1 2
? 0 4 1 2
? 1 2 3 4
? 1 3 2 4
? 1 4 2 3
! 0 4
```
**Explanation**: This test case extends the previous one to a slightly larger permutation size. It checks if the logic scales and handles more elements correctly.

#### Test 3
**Input**:
```
1
6
```
**Output**:
```
? 0 1 2 3
? 0 2 1 3
? 0 3 1 2
? 0 4 1 2
? 0 5 1 2
? 1 2 3 4
? 1 3 2 4
? 1 4 2 3
? 1 5 2 3
? 2 3 4 5
? 2 4 3 5
? 2 5 3 4
! 0 5
```
**Explanation**: This test case further increases the permutation size and checks if the logic can handle the increased number of elements and queries.

### Edge Test Cases

#### Test 4
**Input**:
```
1
2
```
**Output**:
```
? 0 0 1 1
! 0 1
```
**Explanation**: This test case checks the smallest possible permutation size. It verifies that the logic can handle the minimum input size correctly.

#### Test 5
**Input**:
```
1
3
```
**Output**:
```
? 0 1 2 0
? 0 2 1 0
? 1 2 0 1
! 0 2
```
**Explanation**: This test case checks a permutation size of 3, which is the smallest non-trivial case. It verifies that the logic can handle this size correctly.

#### Test 6
**Input**:
```
1
10000
```
**Output**:
```
? 0 1 2 3
? 0 2 1 3
? 0 3 1 2
...
! 0 9999
```
**Explanation**: This test case checks the maximum possible permutation size. It verifies that the logic can handle the maximum input size within the allowed number of queries.

#### Test 7
**Input**:
```
1000
2
```
**Output**:
```
? 0 0 1 1
! 0 1
? 0 0 1 1
! 0 1
...
? 0 0 1 1
! 0 1
```
**Explanation**: This test case checks multiple test cases with the smallest permutation size. It verifies that the logic can handle multiple test cases correctly.

#### Test 8
**Input**:
```
1
10000
```
**Output**:
```
? 0 1 2 3
? 0 2 1 3
? 0 3 1 2
...
! 0 9999
```
**Explanation**: This test case checks the maximum possible permutation size. It verifies that the logic can handle the maximum input size within the allowed number of queries.

#### Test 9
**Input**:
```
1
4
```
**Output**:
```
? 0 1 2 3
? 0 2 1 3
? 0 3 1 2
! 3 0
```
**Explanation**: This test case checks if the solution can handle different valid answers. It verifies that the logic can find any valid pair that maximizes the XOR.

#### Test 10
**Input**:
```
1
3
```
**Output**:
```
? 0 1 2 0
? 0 2 1 0
? 1 2 0 1
! 0 2
```
**Explanation**: This test case checks a permutation size of 3, which is the smallest non-trivial case. It verifies that the logic can handle this size correctly and find any valid pair that maximizes the XOR.

These test cases cover a wide range of scenarios, ensuring that the solution is robust, reliable, and scalable.