The function calculates and returns the total value by summing up the prices of items from both `primary_items` and `secondary_heap`, considering only those items from `primary_items` where the sum of the prices for Alice and Bob is non-negative.