Correctness: **False**

The provided program does not correctly calculate the expected value of the sum of friendship values of all k pairs chosen for the excursions. Let's analyze why:

1. **Understanding the Problem**: 
   - We need to find the expected value of the sum of friendship values of all k pairs chosen for the excursions.
   - The friendship value of a pair increases by 1 each time it is chosen.
   - The probability of choosing any specific pair is \( \frac{1}{\binom{n}{2}} \).

2. **Expected Value Calculation**:
   - For each friend pair, the expected number of times it is chosen in k excursions is \( \frac{k}{\binom{n}{2}} \).
   - The expected contribution of a friend pair with initial friendship value \( f \) to the total sum is the sum of an arithmetic series: \( f + (f+1) + (f+2) + ... + (f + \text{number of times chosen} - 1) \).
   - This sum can be calculated using the formula for the sum of an arithmetic series: \( \text{sum} = \text{number of terms} \times (\text{first term} + \text{last term}) / 2 \).

3. **Implementation Issues**:
   - The provided code incorrectly calculates \( p \) and \( q \). It does not account for the expected number of times each pair is chosen and the resulting arithmetic series sum correctly.
   - The formula used in the code does not match the problem's requirements.

4. **Correct Approach**:
   - For each friend pair, calculate the expected number of times it is chosen: \( \frac{k}{\binom{n}{2}} \).
   - Calculate the expected contribution of each friend pair to the total sum using the arithmetic series sum formula.
   - Sum these contributions for all friend pairs.
   - Convert the result to a fraction and compute the modular inverse of the denominator.

Here is a corrected version of the program:

```python
import math

def func():
    t = int(input())
    M = 10 ** 9 + 7
    for _ in range(t):
        (n, m, k) = map(int, input().split())
        total_sum = 0
        cn2 = n * (n - 1) // 2
        
        for _ in range(m):
            (a, b, f) = map(int, input().split())
            # Expected number of times this pair is chosen
            exp_times_chosen = k / cn2
            # Expected contribution of this pair
            # Sum of arithmetic series: f + (f+1) + ... + (f + exp_times_chosen - 1)
            # Number of terms = exp_times_chosen
            # First term = f
            # Last term = f + exp_times_chosen - 1
            # Sum = (exp_times_chosen / 2) * (2*f + exp_times_chosen - 1)
            exp_contribution = (exp_times_chosen / 2) * (2 * f + exp_times_chosen - 1)
            total_sum += exp_contribution
        
        # Convert total_sum to fraction p/q
        p = int(total_sum * cn2)
        q = cn2
        gcd = math.gcd(p, q)
        p //= gcd
        q //= gcd
        print(int(p * pow(q, -1, M) % M))

func()
```

This corrected program should provide the correct output for the given problem.