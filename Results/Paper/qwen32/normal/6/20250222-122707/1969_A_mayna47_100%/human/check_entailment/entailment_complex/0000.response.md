### Reasoning:

The provided program is intended to solve the problem of determining the minimum number of invitations Monocarp needs to send to ensure at least two friends attend the party. The logic of the program is based on the following observations:

1. If there exists a pair of friends `i` and `p_i` such that `v[v[i]] == i`, then sending invitations to these two friends will ensure both attend the party because they are each other's best friends.
2. If no such pair exists, Monocarp needs to send invitations to at least three friends to ensure that at least two of them attend. This is because the best friend relationship is one-to-one and distinct, meaning no friend is their own best friend, and no two friends can be each other's best friend more than once.

The program correctly implements this logic:

- It reads the number of test cases `t`.
- For each test case, it reads the number of friends `n` and the list of best friends `p`.
- It then checks if there exists any `i` such that `v[v[i]] == i`. If such an `i` is found, it prints `2` and exits the function for that test case.
- If no such `i` is found, it prints `3`.

### Correctness:

The logic is correct based on the problem description. The program correctly identifies whether there is a pair of friends who are each other's best friends and handles the case where such a pair does not exist.

**Correctness: True**