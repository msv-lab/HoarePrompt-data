The function takes an integer `n` (where 2 <= n <= 24) and a symmetric grid of `n` lines by `n` characters. Each character in the grid is either 'F' (funny), 'S' (scary), '?' (undecided), or '.' (same scenario). The function replaces each '?' in the grid with either 'F' or 'S' based on the counts of 'F' and 'S' in each row and column, ensuring that the number of 'F' and 'S' characters in the grid does not exceed floor(n/2). It then prints the modified grid.