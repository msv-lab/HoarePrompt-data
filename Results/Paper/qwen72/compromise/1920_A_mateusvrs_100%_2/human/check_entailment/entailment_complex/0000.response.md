### Reasoning:

1. **Input Handling**:
   - The function reads an integer `t` which represents the number of test cases.
   - For each test case, it reads an integer `n` which represents the number of constraints.
   - It then reads `n` lines, each containing two integers `a` and `x` representing a constraint.

2. **Constraint Processing**:
   - The function initializes `bx` to the smallest possible value and `ax` to the largest possible value.
   - For each constraint:
     - If `a` is 1 (k must be greater than or equal to x), `bx` is updated to the maximum of `x` and the current `bx`.
     - If `a` is 2 (k must be less than or equal to x), `ax` is updated to the minimum of `x` and the current `ax`.
     - If `a` is 3 (k must not be equal to x), `x` is added to the set `cx`.

3. **Range Validation**:
   - After processing all constraints for a test case, the function checks if `bx` is greater than `ax`. If so, it appends 0 to the result list `r` because no integer can satisfy the constraints.
   - If `bx` is less than or equal to `ax`, it calculates the number of valid integers in the range `[bx, ax]` that are not in the set `cx`.

4. **Result Calculation**:
   - The function calculates the total number of integers in the range `[bx, ax]` using `ax - bx + 1`.
   - It then subtracts the number of integers in `cx` that fall within this range to get the final count of valid integers.
   - This count is appended to the result list `r`.

5. **Output**:
   - After processing all test cases, the function prints the results, each on a new line.

### Correctness Analysis:
- **Type 1 and Type 2 Constraints**:
  - The function correctly identifies the minimum and maximum bounds for `k` using `bx` and `ax`.
  - If `bx` is greater than `ax`, it correctly returns 0 because no integer can satisfy both constraints.

- **Type 3 Constraints**:
  - The function correctly uses a set `cx` to store the integers that `k` must not be equal to.
  - It then correctly counts and subtracts these integers from the range `[bx, ax]`.

- **Edge Cases**:
  - The function handles the case where `bx` and `ax` are the same, which is valid if there are no type 3 constraints within that range.
  - It also handles the case where there are no type 3 constraints at all.

- **Guaranteed Constraints**:
  - The problem guarantees that there is at least one constraint of type 1 and at least one constraint of type 2, ensuring that `bx` and `ax` are always updated.
  - The problem also guarantees that no two constraints are the same, ensuring that the set `cx` will not contain duplicate values.

### Conclusion:
The function correctly processes the constraints and calculates the number of valid integers for each test case. It handles all edge cases and guarantees provided in the problem description.

### Correctness:
**True**