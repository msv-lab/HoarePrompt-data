The function `func` processes multiple test cases, each containing an integer `n` (3 ≤ n ≤ 3·10^5) and a string `s` of length `n` consisting of '0' and '1'. The integer `n` represents the number of houses, and the string `s` indicates the side each resident wants to live on ('0' for left, '1' for right). For each test case, the function calculates and prints the optimal number of houses to be built on the left and right sides to satisfy the residents' preferences. The function iterates through the string to balance the number of '0's and '1's on both sides, and it prints the number of houses that need to be built on the side that can satisfy the residents' preferences with the minimum deviation from the middle. After processing all test cases, the function concludes, and the state of the program is such that all test cases have been processed and the results have been printed.