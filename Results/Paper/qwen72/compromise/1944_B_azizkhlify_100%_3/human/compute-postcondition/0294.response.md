Postcondition: **`res` is a list with all elements processed, `i` is the last element of `res` if `res` is not empty, otherwise `i` is undefined. Additionally, `ul` is not equal to `ur`.**