The function `func` reads multiple test cases from the input. Each test case consists of an integer `n` (3 ≤ n ≤ 3·10^5) and a string `a` of length `n` containing only '0' and '1'. The function calculates and prints the optimal position to divide the houses into two sides such that the number of residents preferring each side is as balanced as possible. The output for each test case is the index of the house that divides the string into two parts, ensuring the preferences are balanced. If no such perfect balance can be achieved, the function prints the position that is closest to achieving this balance.