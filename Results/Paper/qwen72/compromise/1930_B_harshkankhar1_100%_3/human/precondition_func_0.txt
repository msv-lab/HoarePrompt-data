The function should take a single integer n as input, where 3 ≤ n ≤ 10^5, and n is the length of the permutation p.