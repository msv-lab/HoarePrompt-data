The function is designed to handle multiple test cases. Each test case contains integers n, m, and k where 2 ≤ n ≤ 10^5, 0 ≤ m ≤ min(10^5, n(n-1)/2), and 1 ≤ k ≤ 2 × 10^5. Additionally, there are m lines of input for each test case, each containing integers a_i, b_i, and f_i where 1 ≤ a_i, b_i ≤ n, a_i ≠ b_i, and 1 ≤ f_i ≤ 10^9. The sum of n and the sum of m over all test cases do not exceed 10^5, and the sum of k over all test cases does not exceed 2 × 10^5.