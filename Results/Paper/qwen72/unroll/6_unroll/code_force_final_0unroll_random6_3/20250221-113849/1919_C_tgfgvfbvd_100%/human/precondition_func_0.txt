The function `func` is expected to handle multiple test cases. For each test case, `n` is a positive integer (1 ≤ n ≤ 2·10^5), and `a` is a list of integers of length `n` where each element `a_i` satisfies 1 ≤ a_i ≤ n. The total number of test cases `t` is a positive integer (1 ≤ t ≤ 10^4), and the sum of `n` over all test cases does not exceed 2·10^5.