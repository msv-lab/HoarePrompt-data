### Reasoning:

1. **Understanding the Problem:**
   - Bob can sell `n` buns.
   - The usual price of a bun is `a` coins.
   - The first `k` buns are sold at a modified price, where the price of the `i`-th bun is `(b - i + 1)` coins.
   - The remaining `(n - k)` buns are sold at the usual price `a` coins each.
   - The goal is to maximize the total profit.

2. **Analyzing the Program:**
   - The program reads the number of test cases `t`.
   - For each test case, it reads `n`, `a`, and `b`.
   - If `a` is greater than or equal to `b`, it means selling all buns at the usual price `a` is the best option, so it prints `n * a`.
   - Otherwise, it calculates the optimal `k` as `min(b - a + 1, n)`. This ensures that `k` is the maximum number of buns that can be sold at a price higher than `a` without exceeding `n`.
   - It then calculates the total profit from the first `k` buns using the formula for the sum of an arithmetic series: `ans = int((b + (b - k + 1)) / 2 * k)`.
   - Finally, it adds the profit from the remaining `(n - k)` buns sold at the usual price `a` and prints the total profit.

3. **Verification with Examples:**
   - For `n = 4`, `a = 4`, `b = 5`:
     - `a < b`, so `k = min(5 - 4 + 1, 4) = 2`.
     - `ans = (5 + (5 - 2 + 1)) / 2 * 2 = (5 + 4) / 2 * 2 = 9`.
     - `p2 = (4 - 2) * 4 = 2 * 4 = 8`.
     - Total profit = `9 + 8 = 17`.
   - For `n = 5`, `a = 5`, `b = 9`:
     - `a < b`, so `k = min(9 - 5 + 1, 5) = 5`.
     - `ans = (9 + (9 - 5 + 1)) / 2 * 5 = (9 + 5) / 2 * 5 = 35`.
     - `p2 = (5 - 5) * 5 = 0`.
     - Total profit = `35 + 0 = 35`.
   - For `n = 10`, `a = 10`, `b = 5`:
     - `a >= b`, so it prints `10 * 10 = 100`.
   - For `n = 5`, `a = 5`, `b = 11`:
     - `a < b`, so `k = min(11 - 5 + 1, 5) = 7`.
     - `ans = (11 + (11 - 7 + 1)) / 2 * 7 = (11 + 5) / 2 * 7 = 49`.
     - `p2 = (5 - 7) * 5 = 0` (since `k` cannot exceed `n`).
     - Total profit = `49 + 0 = 49` (but the program correctly prints `45` because `k` is capped at `5`).

4. **Edge Cases:**
   - The program handles the case where `a >= b` by selling all buns at the usual price.
   - The program correctly calculates the profit for the first `k` buns using the arithmetic series sum formula.
   - The program ensures that `k` does not exceed `n`.

### Conclusion:
The program correctly implements the logic to determine the maximum profit Bob can obtain by selling all buns, considering both the usual price and the modified price promotion. It handles all edge cases and examples provided in the problem description.

**Correctness: True**