The function should take parameters t, n, q, and a list of integers a, and a list of queries. t is an integer where 1 <= t <= 10^4, n and q are integers where 2 <= n <= 2 * 10^5 and 1 <= q <= 2 * 10^5, a is a list of n integers where 0 <= a_i < 2^30, and each query is a pair of integers (l, r) where 1 <= l < r <= n. The sum of n over all test cases and the sum of q over all test cases do not exceed 2 * 10^5.