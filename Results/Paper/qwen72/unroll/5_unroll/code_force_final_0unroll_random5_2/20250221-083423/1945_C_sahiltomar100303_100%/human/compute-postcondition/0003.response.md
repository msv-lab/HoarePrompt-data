The function `func` is designed to process multiple test cases. Each test case includes an integer `n` (3 ≤ n ≤ 3·10^5) representing the number of houses, and a string `a` of length `n` consisting only of '0' and '1', where '0' indicates a resident's preference to live on the left side of the street and '1' indicates a preference to live on the right side. The total number of test cases `t` is such that 1 ≤ t ≤ 2·10^4, and the sum of `n` over all test cases does not exceed 3·10^5.

The function returns the number of houses that need to be moved to the opposite side of the street to satisfy the preferences of all residents in each test case.

Functionality: **The function processes multiple test cases. Each test case contains an integer `n` and a string `a` of length `n` with characters '0' and '1'. It returns the number of houses that need to be moved to the opposite side of the street to satisfy the preferences of all residents in each test case.**