Precondition: **The function should accept multiple test cases. Each test case includes two integers n and m (1 ≤ n, m ≤ 500) representing the dimensions of the grid, followed by n lines each containing m characters 'W' or 'B' representing the initial colors of the grid. The total number of test cases t (1 ≤ t ≤ 10^4) is provided at the beginning of the input, and the sum of n * m over all test cases does not exceed 3 * 10^5.**