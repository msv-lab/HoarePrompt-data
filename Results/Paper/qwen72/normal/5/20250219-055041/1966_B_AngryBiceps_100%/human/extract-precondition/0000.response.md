Precondition: **The function is expected to handle multiple test cases. Each test case includes a grid of characters 'W' and 'B' representing white and black squares, respectively. The grid is defined by its dimensions n and m, where 1 ≤ n, m ≤ 500. The total number of test cases, t, is such that 1 ≤ t ≤ 10^4, and the sum of n * m over all test cases does not exceed 3 * 10^5.**