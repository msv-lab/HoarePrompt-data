The function `func` is designed to handle multiple test cases. Each test case involves three integers: `n` (the number of children), `m` (the number of pairs of friends), and `k` (the number of excursions). The constraints for these parameters are: `2 ≤ n ≤ 10^5`, `0 ≤ m ≤ min(10^5, n(n-1)/2)`, and `1 ≤ k ≤ 2 * 10^5`. Additionally, for each of the `m` pairs, there are three integers `a_i`, `b_i`, and `f_i` representing the indices of the children in the pair and their initial friendship value, with `1 ≤ a_i, b_i ≤ n`, `a_i ≠ b_i`, and `1 ≤ f_i ≤ 10^9`. The function should handle up to `5 * 10^4` test cases, with the sum of `n` and `m` over all test cases not exceeding `10^5` and the sum of `k` not exceeding `2 * 10^5`.

Functionality: **The function accepts multiple test cases, each consisting of integers `n`, `m`, and `k`, and a list of `m` pairs of integers `a_i`, `b_i`, and `f_i`. It returns the results of processing these test cases, which involve handling the specified number of children, pairs of friends, and excursions, while adhering to the given constraints.**