Given the problem statement, we need to create comprehensive test cases for the interactive problem described. Here are the test cases, including both basic and edge scenarios:

### Test 1: Basic Case with Small Permutation
**Objective**: Verify the function works with a small permutation.

**Input**:
```
4
```
**Output**:
```
? 0 2 3 1
<

? 1 1 2 3
=

? 1 2 0 3
>
! 3 2
```

### Test 2: Basic Case with Medium Permutation
**Objective**: Verify the function works with a medium-sized permutation.

**Input**:
```
8
```
**Output**:
```
? 0 2 3 1
<

? 1 1 2 3
=

? 1 2 0 3
>

? 4 5 6 7
>

? 4 6 5 7
=

? 4 5 6 7
>

? 0 4 1 5
>

? 0 4 1 5
>

! 7 1
```

### Test 3: Basic Case with Large Permutation
**Objective**: Verify the function works with a large permutation.

**Input**:
```
10000
```
**Output**:
```
? 0 2 3 1
<

? 1 1 2 3
=

? 1 2 0 3
>

? 4999 5000 5001 5002
>

? 4999 5000 5001 5002
=

? 4999 5000 5001 5002
>

? 0 4999 1 5000
>

? 0 4999 1 5000
>

! 5002 1
```

### Test 4: Permutation with All Even Numbers
**Objective**: Verify the function handles a permutation where all numbers are even.

**Input**:
```
4
0 2 4 6
```
**Output**:
```
? 0 2 3 1
<

? 1 1 2 3
=

? 1 2 0 3
>

! 3 1
```

### Test 5: Permutation with All Odd Numbers
**Objective**: Verify the function handles a permutation where all numbers are odd.

**Input**:
```
4
1 3 5 7
```
**Output**:
```
? 0 2 3 1
>

? 1 1 2 3
=

? 1 2 0 3
>

! 3 1
```

### Test 6: Permutation with Alternating Even and Odd Numbers
**Objective**: Verify the function handles a permutation with alternating even and odd numbers.

**Input**:
```
4
0 1 2 3
```
**Output**:
```
? 0 2 3 1
>

? 1 1 2 3
=

? 1 2 0 3
>

! 3 1
```

### Test 7: Permutation with Repeated Elements
**Objective**: Verify the function handles a permutation with repeated elements.

**Input**:
```
4
0 1 0 1
```
**Output**:
```
? 0 2 3 1
=

? 1 1 2 3
=

? 1 2 0 3
>

! 2 3
```

### Test 8: Permutation with Maximum XOR
**Objective**: Verify the function handles a permutation where the maximum XOR is straightforward.

**Input**:
```
4
3 2 1 0
```
**Output**:
```
? 0 2 3 1
>

? 1 1 2 3
=

? 1 2 0 3
>

! 3 0
```

### Test 9: Permutation with Minimum XOR
**Objective**: Verify the function handles a permutation where the minimum XOR is straightforward.

**Input**:
```
4
0 1 2 3
```
**Output**:
```
? 0 2 3 1
=

? 1 1 2 3
=

? 1 2 0 3
>

! 0 1
```

### Test 10: Permutation with All Elements Equal
**Objective**: Verify the function handles a permutation where all elements are the same.

**Input**:
```
4
0 0 0 0
```
**Output**:
```
? 0 2 3 1
=

? 1 1 2 3
=

? 1 2 0 3
=

! 0 1
```

### Test 11: Permutation with Maximum XOR and Large Size
**Objective**: Verify the function handles a large permutation with the maximum XOR.

**Input**:
```
10000
```
**Output**:
```
? 0 2 3 1
<

? 1 1 2 3
=

? 1 2 0 3
>

? 4999 5000 5001 5002
>

? 4999 5000 5001 5002
=

? 4999 5000 5001 5002
>

? 0 4999 1 5000
>

? 0 4999 1 5000
>

! 5002 1
```

These test cases cover a wide range of scenarios, ensuring the solution is robust and reliable.