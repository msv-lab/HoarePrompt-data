Given the problem statement and the nature of the interaction, we need to create comprehensive test cases that cover both basic and edge scenarios. Here are the test cases:

### Test 1: Basic Case with Small Permutation
**Objective**: Verify the function works correctly with a small permutation.

**Input**:
```
4
```
**Output**:
```
? 0 2 3 1
<
? 1 1 2 3
=
? 1 2 0 3
>
! 3 2
```

### Test 2: Basic Case with Medium Permutation
**Objective**: Verify the function works correctly with a medium-sized permutation.

**Input**:
```
8
```
**Output**:
```
? 0 2 3 1
<
? 1 1 2 3
=
? 1 2 0 3
>
! 7 6
```

### Test 3: Basic Case with Large Permutation
**Objective**: Verify the function works correctly with a large permutation.

**Input**:
```
10000
```
**Output**:
```
? 0 2 3 1
<
? 1 1 2 3
=
? 1 2 0 3
>
! 9999 9998
```

### Test 4: Edge Case with All Zeros
**Objective**: Verify the function handles a permutation where all elements are the same.

**Input**:
```
5
0 0 0 0 0
```
**Output**:
```
? 0 1 2 3
=
? 0 2 1 3
=
! 0 1
```

### Test 5: Edge Case with All Ones
**Objective**: Verify the function handles a permutation where all elements are the same.

**Input**:
```
5
1 1 1 1 1
```
**Output**:
```
? 0 1 2 3
=
? 0 2 1 3
=
! 0 1
```

### Test 6: Edge Case with Single Element
**Objective**: Verify the function handles the smallest possible input.

**Input**:
```
2
0 1
```
**Output**:
```
? 0 1 0 1
=
! 0 1
```

### Test 7: Edge Case with Maximum XOR
**Objective**: Verify the function finds the pair with the maximum XOR.

**Input**:
```
4
0 1 2 3
```
**Output**:
```
? 0 2 3 1
<
? 1 1 2 3
=
? 1 2 0 3
>
! 3 2
```

### Test 8: Edge Case with Reversed Permutation
**Objective**: Verify the function works correctly with a reversed permutation.

**Input**:
```
4
3 2 1 0
```
**Output**:
```
? 0 2 3 1
>
? 1 1 2 3
=
? 1 2 0 3
<
! 0 2
```

### Test 9: Edge Case with Random Permutation
**Objective**: Verify the function works correctly with a random permutation.

**Input**:
```
8
5 3 2 7 1 4 6 0
```
**Output**:
```
? 0 2 3 1
<
? 1 1 2 3
=
? 1 2 0 3
>
! 7 3
```

### Test 10: Edge Case with Duplicate Elements
**Objective**: Verify the function handles permutations with duplicate elements.

**Input**:
```
4
0 0 1 1
```
**Output**:
```
? 0 1 2 3
=
? 0 2 1 3
=
! 0 2
```

These test cases cover a range of scenarios, from basic to edge cases, ensuring the solution is robust and reliable.