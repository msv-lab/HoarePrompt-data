Reasoning:
1. The function `func()` processes each test case as specified.
2. It reads the number of test cases `t` and iterates over each test case.
3. For each test case, it reads the size of the array `n` and the array itself.
4. It initializes variables to track the current sequence length (`same`), the current number (`num`), and the minimum sequence length found (`minn`).
5. It iterates through the array, updating `same` and `num` when a different number is encountered, and updates `minn` accordingly.
6. After the loop, it checks if `minn` is still infinity or equal to the length of the array. If so, it prints `-1`, indicating it's impossible to make the array non-beautiful. Otherwise, it prints `minn`, which represents the minimum number of elements that need to be removed to make the array non-beautiful.
7. The logic correctly identifies the minimum length of consecutive segments with the same number, which is crucial for determining the minimum number of removals needed.
8. The constraints and additional conditions are handled appropriately.

Given the above analysis, the function appears to correctly implement the logic required to solve the problem.

Correctness: **True**