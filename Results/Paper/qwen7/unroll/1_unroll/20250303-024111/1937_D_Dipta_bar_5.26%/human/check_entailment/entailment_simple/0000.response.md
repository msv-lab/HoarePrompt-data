### Reasoning:

1. **Understanding the Problem**: The problem involves simulating the movement of a pinball on a one-dimensional grid with characters `<` and `>` indicating the direction of movement. The pinball's position and direction change based on these characters, and the goal is to calculate the time it takes for the pinball to leave the grid.

2. **Function `func_1` Analysis**:
   - **Part 1**: The first loop calculates the cumulative distance from each `>` to the nearest previous `>`. This is stored in list `A` and list `idx_A` keeps track of the indices of `>` characters.
   - **Part 2**: The second loop calculates the cumulative distance from each `<` to the nearest previous `<`, but in reverse order. This is stored in list `B` and list `idx_B` keeps track of the indices of `<` characters.
   - **Part 3**: The final loop uses the information from `A`, `B`, `idx_A`, and `idx_B` to compute the time it takes for a pinball starting at each position `i` to leave the grid.

3. **Key Observations**:
   - The logic in `func_1` correctly handles the cumulative distances and indices of `>` and `<` characters.
   - The final loop computes the time to leave the grid using the precomputed distances and indices, which seems to follow the problem's requirements.

4. **Edge Cases**:
   - The code handles edge cases such as the pinball starting at the boundary of the grid or when there are no `>` or `<` characters.
   - The logic appears to correctly account for the direction changes and cumulative distances.

5. **Overall Correctness**:
   - The program correctly processes the input and computes the required times for each query.
   - The state transitions and calculations seem to align with the problem statement.

### Conclusion:
Based on the analysis, the provided program correctly implements the solution to the problem as described. Therefore, the program is correct.

**Correctness: **True**