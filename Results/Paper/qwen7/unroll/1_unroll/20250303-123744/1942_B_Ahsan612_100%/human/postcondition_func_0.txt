The function processes a series of test cases, where each test case consists of a positive integer \( n \) and a list of \( n \) integers \( a \). For each test case, it calculates a new list \( res \) by iterating over the input list \( ar \) in reverse order, determining the minimum excluded number (mex) for each position, and storing the difference between mex and the current element of \( ar \) in the corresponding position of \( res \). Finally, it outputs the result for each test case as a space-separated string of these differences.