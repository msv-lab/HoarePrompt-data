Functionality: **The function accepts four parameters: `n` (a positive integer), `m` (a positive integer), `a` (a list of `n` integers), and `s` (a string of length `n` consisting only of 'L' and 'R'). It performs operations based on the string `s` and returns a reversed list of all intermediate results of `p` from each iteration of the loop.**