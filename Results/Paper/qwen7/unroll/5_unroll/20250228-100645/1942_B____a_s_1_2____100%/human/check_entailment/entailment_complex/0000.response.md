Reasoning:

1. **Problem Understanding**: The problem requires constructing a permutation \( p \) from an array \( a \) where each element \( a_i \) is defined as \( \text{MEX}(p_1, p_2, \ldots, p_i) - p_i \). The MEX of a set is the smallest non-negative integer not present in the set.

2. **Given Code Analysis**:
   - The code correctly reads the number of test cases \( t \).
   - For each test case, it reads the size \( n \) and the array \( a \).
   - It initializes an array \( p \) with -1 values.
   - It calculates the MEX value for the current position and updates the permutation \( p \) accordingly.
   - The MEX value is updated after each assignment to ensure it reflects the smallest unused index.

3. **Key Logic**:
   - The loop iterates backward from \( n-1 \) to 0, which ensures that the MEX calculation is done considering the future values of the permutation.
   - The logic \( p[i] = \text{mex} - a[i] \) and updating \( \text{mex} \) to be the minimum of itself and \( p[i] \) ensures that the permutation \( p \) is constructed correctly.

4. **Edge Cases**:
   - The code handles the constraints and guarantees that at least one valid permutation exists.
   - The sum of \( n \) over all test cases does not exceed \( 2 \cdot 10^5 \), ensuring the solution is efficient.

5. **Output**:
   - The permutation \( p \) is printed for each test case, which matches the problem requirements.

Based on the analysis, the provided code correctly implements the logic to construct a valid permutation \( p \) for each test case.

Correctness: **True**