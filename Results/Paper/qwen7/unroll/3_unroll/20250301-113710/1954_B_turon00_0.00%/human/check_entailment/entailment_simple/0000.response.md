Reasoning:
1. The function `func()` correctly reads the number of test cases `t`.
2. For each test case, it reads the size of the array `n` and the array `a`.
3. It initializes `tmp` with the first element of the array `a` and creates a set `aa` of the array elements to check if all elements are the same.
4. If all elements are the same (`len(aa) == 1`), it prints `-1`, which is correct because the array is already beautiful and cannot be made non-beautiful by removing elements.
5. It then iterates through the array to find the minimum length of consecutive segments with the same number. This is done by counting consecutive elements equal to `tmp` and updating `ans` with the minimum count found.
6. After the loop, it prints `ans`, which should be the minimum number of elements to remove to make the array non-beautiful.
7. The logic handles the constraints and additional conditions correctly.

Given the above analysis, the provided program appears to be correct based on the problem description and the execution states provided.

Correctness: **True**