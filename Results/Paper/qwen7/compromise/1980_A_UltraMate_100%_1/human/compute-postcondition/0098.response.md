Postcondition: `i` is `next_i`, `ans` is either `ans + (m - hmp[next_i])` if `hmp[i] < m`, or `ans` remains unchanged if `hmp[i] >= m`.