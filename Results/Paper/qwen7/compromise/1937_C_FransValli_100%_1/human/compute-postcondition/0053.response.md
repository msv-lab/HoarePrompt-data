Postcondition: `i` is `i_prev + 2`, `n` must be at least 4, `res` is an input string, `arr` contains `i_prev + 1` and `i`, and `i` is appended to `arr`.