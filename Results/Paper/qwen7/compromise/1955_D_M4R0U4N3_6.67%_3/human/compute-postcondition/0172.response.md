Postcondition: `ans` is increased by 1, `r` is updated to `m + 2`, `old` is equal to `a[r - m]`. If `old` is in the `extra` list, then `extra` list will have removed the element `old`. Otherwise, `done` list will contain the element `old`, `todo` list will have the element `old` added to it, and `extra` list will remain unchanged. Additionally, the length of `done` is guaranteed to be greater than or equal to `k`.