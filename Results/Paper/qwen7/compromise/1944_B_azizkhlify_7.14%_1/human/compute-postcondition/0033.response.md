Postcondition: `res` is an empty list, `re` is 0, `ul` is 2 * `k`, `ur` is 0, `i` is `n`, and either we break out of the most internal loop or if statement.