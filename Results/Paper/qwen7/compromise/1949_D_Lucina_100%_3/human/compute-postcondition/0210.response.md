Postcondition: `nx` is a string, and either `xx[i][j - 1]` is not '?', in which case `nx` is the original string plus the character `xx[i][j - 1]`, or `i` is in the first quarter of `sa` (excluding the last element) or `j` is in the first quarter of `sa` (excluding the last element). In the latter case, `nx` is 'F' followed by the original string value of `nx`. If neither condition is met, `nx` is 'S' followed by the original string value of `nx`, and `n` must be at least 1, and `j` is `j + 1`.