Postcondition: `xx` is a 2D list, `nx` is a string, and `j` is `k + 1` where `k` is the value of `j` from the previous iteration. If `xx[i][j-1]` is not '?', `nx` is a string with `xx[i][j-1]` appended unless `i` or `j` is in `sa[:n // 4 - 1]`, in which case 'F' is appended. If `xx[i][j-1]` is '?', `nx` is either 'F' or a string with 'S' appended, depending on whether `i` or `j` is in `sa[:n // 4 - 1]`.