Postcondition: `e` is a non-empty string that is one character shorter than before, `q` is the next character in the string `e`, `P` is 3 if `q` is '+', otherwise `P` is 2, and `M` is 3.