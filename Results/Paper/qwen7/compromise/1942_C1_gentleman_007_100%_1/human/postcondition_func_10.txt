The function accepts a positive integer `num` and returns a list `p` containing all prime numbers less than or equal to `num`. After processing, the variable `i` is set to the value of `num`.