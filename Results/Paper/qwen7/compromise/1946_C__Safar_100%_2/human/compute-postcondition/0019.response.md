Postcondition: `g[1]` contains at least one element, `node` is the next element in `g[x]` that is not equal to `p`, and the `stack` contains a tuple `(node, x)` appended to it.