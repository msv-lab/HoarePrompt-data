Functionality: **The function accepts four parameters: t (an integer between 1 and 10^4), n (an integer between 2 and 2 * 10^5), a (a list of n integers where each integer is between 1 and 10^6), and q (an integer between 1 and 2 * 10^5). Additionally, q queries are provided, each consisting of two integers l and r (where 1 ≤ l < r ≤ n). The function processes these queries and returns results based on the specified conditions.**

Note: The actual processing logic and return values are not described here as per the given instruction.