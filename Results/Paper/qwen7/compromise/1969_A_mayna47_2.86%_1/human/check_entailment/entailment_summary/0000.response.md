Reasoning:
1. The program correctly handles the input for multiple test cases.
2. For each test case, it reads the number of friends \( n \) and their best friend relationships stored in the list \( p \).
3. The logic in `func_1()` is designed to check if there exists a pair of friends who are each other's best friends' best friends. If such a pair exists, only 2 invitations are needed (one to each of these friends). This is correctly checked with the condition `v[v[v[i]]] == i`.
4. If no such pair exists, the program prints 3, which is also correct because in this case, inviting three friends ensures that at least two will come to the party (as per the examples provided).

Given the execution summary and the logic in the program, the program appears to be correctly implemented according to the problem statement.

Correctness: **True**