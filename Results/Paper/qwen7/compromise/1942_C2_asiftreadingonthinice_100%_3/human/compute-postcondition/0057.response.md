Postcondition: `i` is the next element in `tmp` after `i_end`, `tmp` is a non-empty sorted list, `ans` is increased by `i` if `y` is greater than or equal to `i - 1`, otherwise, `y` is decreased by `i - 1` and `i` is updated accordingly.