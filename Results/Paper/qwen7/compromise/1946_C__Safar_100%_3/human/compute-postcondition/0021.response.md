Postcondition: `node` is a node in `g[x]` that is not equal to `p`, and `stack` now contains the tuples from the previous iteration plus the new tuple (`node`, `x`).