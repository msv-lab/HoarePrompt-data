Postcondition: `j` is 1 or 2, and `n` is a positive integer. If `xx[i][j-1]` is not '?', then `nx` is the value of `xx[i][j-1]`. If `xx[i][j-1]` is '?', then `j` is 2, and `nx` is 'S' if either `i` is in the range `sb[0:n//4]` or `j` is in the range `sb[0:n//4]`; otherwise, `nx` is 'F'.