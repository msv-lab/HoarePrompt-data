Postcondition: **`r` is the new input string, `prev` is `i` if `r` was '=', and the states of `i` and `n` remain unchanged.**