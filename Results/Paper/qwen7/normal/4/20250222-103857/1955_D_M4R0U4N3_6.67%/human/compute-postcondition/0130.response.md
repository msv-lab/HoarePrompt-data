Postcondition: `r` is `m`, `m` is some integer, `n` is some integer greater than `m`. If `old` (which is `a[r - m]`) is in `extra`, then `old` is in `extra` and not in `done`. If `old` is in `done`, then `old` is added to `todo` and removed from `done`. If `old` is not in `done`, then `old` remains unchanged in `done`. The current value of `a[r]` is in `todo`.