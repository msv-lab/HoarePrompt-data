Postcondition: `ans` is increased by 1, `r` is updated to `m + 2`, `old` is equal to `a[r - m]`. If `a[r]` is in the `todo` list, then `todo` list will have the element `a[r]` removed, and `done` set will now contain the element `a[r]`; otherwise, `extra` list will now contain the element `a[r]`.