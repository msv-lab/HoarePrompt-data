Postcondition: `ans` is either 2 or 3; `r` is `m + 2`. If `old` (which is equal to `a[r - m]`) is in `extra`, then `extra` is modified by removing `old`. If `old` is in `done`, then `done` is modified by removing `old` and `todo` now includes the value of `old`. If `old` is not in `done`, then no changes are made to `done` and `todo`.