Postcondition: `ans` is either 2 or 3; `r` is `m + 2`. If `a[r]` is in `todo`, then `todo` now includes `a[r]` and `done` now includes `a[r]`. If `a[r]` is in `extra`, then `extra` is modified by removing `a[r]`. If `a[r]` is not in `todo` or `extra`, then `extra` includes `a[r]` and `done` and `todo` remain unchanged. If `len(done) >= k`, then `ans` becomes either 3 or 4.