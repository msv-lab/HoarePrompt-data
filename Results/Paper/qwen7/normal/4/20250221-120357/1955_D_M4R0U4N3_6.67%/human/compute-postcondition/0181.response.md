Postcondition: `ans` is either 2 or 3; `r` is `m + 2`. If `a[r]` is in `todo` or `extra`, then `todo` and `done` are updated accordingly. If `a[r]` is not in `done`, `todo` and `done` remain unchanged. If `a[r]` is not in `todo` or `extra`, then `extra` includes `a[r]` and `done` and `todo` remain unchanged.