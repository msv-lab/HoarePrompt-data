Postcondition: `max_heap` does not contain the item that was popped; `ans` is increased by either the negative value of the first element of the popped item or the maximum of `diff1` and `diff2` (where `diff1` is the absolute difference between `item[1]` and `b[tp1]`, and `diff2` is the absolute difference between `item[1]` and `b[tp2]`); if `item[2]` is equal to `tp1`, then `tp1` is incremented by 1; otherwise, if `item[2]` is greater than `tp1` or equal to `tp2`, `tp2` is decremented by 1.