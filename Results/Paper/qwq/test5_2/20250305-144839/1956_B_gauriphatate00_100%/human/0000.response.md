Alright, I've got this problem to solve. Let's see what it's about. So, there's this card game between me and Nene. We have a deck with 2n cards, and each card has an integer from 1 to n, with each integer appearing exactly twice. So, there are two cards for each integer.

In the beginning, the deck is distributed between me and Nene, each getting n cards. Then, we take turns playing cards, alternating between me and Nene, for a total of 2n turns. Each turn, the player selects one card from their hand, looks at its number, and checks if there's already a card with that number on the table. If there is, the player gets a point. Then, the selected card is placed on the table.

Important points:

- The game is played publicly, meaning both players can see all cards on the table at any time.

- Nene is very smart and plays optimally to maximize her score, and if there are multiple options, she chooses the one that minimizes my score.

My goal is to figure out the maximum number of points I can get by playing optimally, given that Nene is also playing optimally.

First, I need to understand the game mechanics thoroughly.

Each integer from 1 to n appears exactly twice in the deck. So, for each number, there are two cards.

In the initial distribution, me and Nene each get n cards. So, we split the deck evenly.

During the game, we take turns placing one card at a time, alternating between me and Nene.

Scoring:

- A player gets a point if they play a card with a number that's already on the table.

Objective:

- Determine the maximum number of points I can get, assuming Nene plays optimally to maximize her score and minimize mine.

Let me try to rephrase the problem to make sure I understand it.

We have a set of cards divided between two players. We take turns playing cards, and we score a point if we play a card with a number that's already on the table. Nene plays optimally to maximize her score and, in case of ties, minimize mine. I need to play optimally to maximize my score given Nene's strategy.

I need to find, for each test case, the maximum number of points I can achieve.

Let's look at the example provided to understand better.

Example Input:

5

4

1 1 2 3

8

7 4 1 2 8 8 5 5

8

7 1 4 5 3 4 2 6

3

1 2 3

1

1

Output:

1

2

1

0

0

So, for the first test case, n=4, and my cards are 1,1,2,3. Nene must have the remaining cards: 2,3,4,4.

The explanation says that in one possible sequence of plays:

1. I play one of my 1's.

2. Nene plays one of her 4's.

3. I play my other 1, and since 1 is already on the table, I get 1 point.

4. Nene plays her other 4, and since 4 is already on the table, she gets 1 point.

5. I play my 2.

6. Nene plays her 2, and since 2 is already on the table, she gets 1 point.

7. I play my 3.

8. Nene plays her 3, and since 3 is already on the table, she gets 1 point.

So, I end up with 1 point, and Nene with 3 points.

It's claimed that I can't do better than 1 point if Nene plays optimally.

I need to find a general strategy for any n and any distribution of my cards.

Let me try to think about how to approach this.

First, I need to consider that Nene is playing optimally against me. So, she will try to maximize her points and, in case of ties, minimize my points.

I need to maximize my points, considering Nene's optimal play.

Let me think about what determines whether I get a point or not.

I get a point if, when I play a card, there's already a card with that number on the table.

So, to maximize my points, I want to play cards that have their pairs already on the table.

But, Nene is also trying to maximize her points, so she will play in a way that maximizes her chances of scoring points.

I need to consider the sequence of plays and how Nene's choices affect my possible points.

This seems quite complex. Maybe there's a smarter way to look at it.

Let me consider the number of pairs.

Each number from 1 to n appears exactly twice in the deck.

So, for each number, there are two cards.

I have some of these cards in my hand, and Nene has the rest.

Let me think in terms of "groups" or "pairs".

For each number, there are two cards. Depending on how these two cards are distributed between me and Nene, there are different scenarios.

Case 1: Both cards are in my hand.

In this case, when I play the first card, it doesn't give me a point because it's the first one on the table. When I play the second card, it matches the first one, so I get a point.

Case 2: One card is in my hand, and one is in Nene's hand.

In this case, whichever of us plays their card first, the second player to play that number will get a point.

Case 3: Both cards are in Nene's hand.

In this case, Nene will play both cards, and she will get a point for the second one.

But, I need to consider that Nene is playing optimally to maximize her score and minimize mine.

Wait, in the first case, if I have both cards, I can arrange to play them in a way that I get a point.

In the second case, if I have one card and Nene has the other, then depending on the sequence of plays, I might get a point or Nene might get a point.

This seems tricky.

Let me try to think differently.

Let me consider the concept of "conflicts" or "matches".

For each number, there are two cards. If both are with me, I can get one point by playing them in the right order.

If one is with me and one with Nene, then it depends on who plays first.

Nene is playing optimally to maximize her score and minimize mine.

So, in the case where one card is with me and one with Nene, Nene will try to play her card in a way that minimizes my chances of getting a point.

Wait, let's think step by step.

Let me try to model the game.

Let me consider that the game progresses in turns, and at each turn, the player chooses a card to play.

The choice affects the state of the game, which includes which cards are on the table.

Since the game is played publicly, both players know the current state.

Nene is playing optimally, meaning she always makes the best possible move considering the current state.

Given that, I need to anticipate her moves and choose my moves accordingly.

This seems like a zero-sum game, and the optimal strategy would involve some kind of minimax approach.

But, given the constraints (n up to 2*10^5 and t up to 10^4), a full minimax approach is not feasible due to time constraints.

There must be a smarter way to approach this problem.

Let me think about the possible points I can get.

I can get a point only when I play a card that matches a number already on the table.

So, to maximize my points, I need to play my cards in a way that maximizes the number of times I play a card that matches a number already on the table.

But, Nene is trying to minimize that.

So, perhaps I need to consider which numbers have both cards in my hand, and which have one card with me and one with Nene.

Let me categorize the numbers based on the distribution of their cards.

Category 1: Both cards with me.

Category 2: One card with me, one with Nene.

Category 3: Both cards with Nene.

For Category 1:

If I have both cards, I can arrange to play them such that I get one point from this number. I play the first card, which doesn't give a point, and then the second card, which does.

For Category 2:

If I have one card and Nene has the other, then the timing of playing the cards matters.

If I play my card first, then when Nene plays her card, she gets a point.

If Nene plays her card first, then when I play my card, I get a point.

So, in this case, the point goes to whoever plays second.

Since Nene is playing optimally to maximize her score and minimize mine, she will choose to play her card first if possible, so that I get the point when I play mine.

Wait, but Nene wants to maximize her score, so she would prefer to get the point herself.

Wait, let's think carefully.

If Nene plays her card first, then when I play my card, I get the point.

But Nene wants to minimize my score, so she would prefer that I don't get the point.

Therefore, she would prefer to play her card second, so that she gets the point instead of me.

But, since she plays after me, she can choose when to play her card.

Wait, no.

The turns are alternating: I play, then Nene, then me, and so on.

So, the sequence is fixed.

Given that, Nene can choose which card to play on her turn, but the order of turns is fixed.

So, perhaps I need to think in terms of which cards are played when, considering the turn order.

This seems complicated.

Let me try to think about the total possible points.

In the entire game, there are n numbers, each appearing twice.

So, there are n pairs.

Each pair can contribute one point to either me or Nene, depending on who plays the second card of that number.

So, the total points distributed between me and Nene will be n points.

Wait, but in the first example, Nene ends up with 3 points and I with 1, and n=4.

Wait, but in that example, the total points are 4, which is equal to n.

Wait, no, in that example, I have 1 point and Nene has 3, totaling 4 points, which is n.

But in the second test case, n=8, and it's said that I can get 2 points and Nene 6, totaling 8.

So, the total points always sum up to n.

Therefore, my goal is to maximize my points, knowing that Nene will play to maximize hers and, in case of ties, minimize mine.

Given that, perhaps I can think in terms of the number of pairs that are entirely in my hand, and the number of pairs split between me and Nene.

Let me define:

- Let s be the number of numbers for which I have both cards.

- Let t be the number of numbers for which I have one card and Nene has the other.

- Then, the number of numbers for which Nene has both cards is u = n - s - t.

Given that, the total points are n, and I want to maximize my points.

Let's try to see how many points I can get.

For the s numbers where I have both cards, I can arrange to get one point from each of them.

For the t numbers where I have one card and Nene has the other, the point will go to whoever plays second.

Since the turns are alternating, and I start, Nene gets to play after me.

So, for each of these t numbers, depending on who plays their card first, the point goes to the second player.

But since Nene is playing optimally to maximize her score and minimize mine, she will try to arrange to get as many points as possible from these t numbers.

Wait, perhaps I need to think differently.

Let me consider that for each of the t numbers where I have one card and Nene has the other, the point will go to the player who plays second.

Since I play first, then Nene plays, then me, and so on.

So, for each of these t numbers, if Nene can arrange to play her card after I play mine, then she gets the point.

But Nene is trying to maximize her score, so she will try to get as many points as possible from these t numbers.

Given that, perhaps I can only get points from the s numbers where I have both cards.

Wait, but in the first example, s=1 (number 1), t=2 (numbers 2 and 3), u=1 (number 4).

I ended up with 1 point, which comes from the s=1.

So, perhaps my maximum score is equal to s.

But in the second test case, n=8, my cards are 7,4,1,2,8,8,5,5.

So, for numbers:

7: t=1 (I have one, Nene has one)

4: t=1 (I have one, Nene has one)

1: t=1 (I have one, Nene has one)

2: t=1 (I have one, Nene has one)

8: s=1 (I have two)

5: s=1 (I have two)

So, s=2 (numbers 8 and 5), t=4 (numbers 7,4,1,2)

According to the example, I can get 2 points, which matches s=2.

In the third test case, n=8, my cards are 7,1,4,5,3,4,2,6.

So, for numbers:

7: t=1

1: t=1

4: s=1 (I have two 4's)

5: t=1

3: t=1

2: t=1

6: t=1

So, s=1, t=6, u=1

According to the example, I can get 1 point, which is s=1.

In the fourth test case, n=3, my cards are 1,2,3.

So, s=0, t=3, u=0

According to the example, I can get 0 points.

In the fifth test case, n=1, my cards are 1.

So, s=1, t=0, u=0

I can get 1 point.

Wait, but according to the example, I get 0 points.

Wait, but if s=1, according to the earlier assumption, I should get 1 point.

But in the fifth test case, it's said that I get 0 points.

Wait, perhaps I made a mistake.

Let's check the fifth test case.

n=1, my cards are [1]

So, there are two cards with 1, and I have one of them, Nene has the other.

So, s=0, t=1, u=0

In this case, I have t=1.

According to the earlier assumption, I can only get points from s, which is 0.

Hence, I get 0 points.

So, perhaps my maximum score is equal to s, the number of numbers where I have both cards.

Looking back at the first test case, s=1, and I got 1 point.

Second test case, s=2, I got 2 points.

Third test case, s=1, I got 1 point.

Fourth test case, s=0, I got 0 points.

Fifth test case, s=0, I got 0 points.

This seems to match.

So, perhaps the maximum number of points I can get is equal to the number of numbers where I have both cards.

But, is this always true?

Wait, but in the second test case, s=2, and I got 2 points, while Nene got 6 points.

But according to this, I should just play the pairs I have both cards for, and Nene will play the rest in a way that maximizes her points.

Wait, but in the fifth test case, n=1, my cards are [1], which means s=0, and I got 0 points.

So, it seems that the formula holds.

Hence, the maximum number of points I can get is equal to the number of numbers where I have both cards.

Therefore, to compute this, I just need to count how many numbers appear twice in my hand.

That seems straightforward.

Let me confirm this with another example.

Suppose n=2, and my cards are [1,2], Nene has [1,2].

Here, s=0, t=2, u=0

In this case, no matter how we play, I can't get any points because for each number, one card is with me and one with Nene.

So, I should get 0 points.

Another example: n=3, my cards are [1,1,2], Nene has [2,3,3]

Here, s=1 (number 1), t=1 (number 2), u=1 (number 3)

According to the earlier assumption, I can get 1 point from number 1.

Nene will get points from number 2 and number 3.

So, my score is 1, Nene's score is 2.

This seems correct.

Hence, the strategy is to count how many numbers have both cards in my hand.

That is, count the numbers in my hand that appear twice.

So, in the code, I need to count, for each number from 1 to n, how many times it appears in my hand, and count how many numbers appear exactly twice.

Wait, no.

Wait, in the problem statement, it says that each number appears exactly twice in the entire deck, so in the entire deck, each number appears exactly twice.

But in my hand, some numbers may appear twice, some once.

So, for numbers that appear twice in my hand, that means both cards are with me.

For numbers that appear once in my hand, one card is with me and one with Nene.

So, I need to count how many numbers appear twice in my hand.

That will be s.

Hence, the maximum number of points I can get is s.

So, in the code, I need to count, for the input array a, which represents the numbers in my hand, how many unique numbers appear exactly twice.

Wait, no.

Wait, in the input, a is the list of numbers in my hand.

I need to count how many numbers appear exactly twice in a.

But, according to the problem, each number appears at most twice in a, since each number appears exactly twice in the entire deck.

Wait, no.

The problem says: "It is guaranteed that each integer from 1 through n appears in the sequence a_1, a_2, â€¦, a_n at most 2 times."

Wait, no, n is the number of cards each player receives, so a has n elements.

But, since each number can appear at most twice in the entire deck, and a has n elements, it's possible that some numbers appear once or twice in a.

Wait, actually, since n is the number of cards each player receives, and there are 2n cards in total, with each number from 1 to n appearing exactly twice.

So, a has n cards, and each number appears exactly twice in the entire deck.

Hence, in a, each number can appear at most twice.

Hence, to find s, the number of numbers that appear twice in a.

So, in code, I need to count, for the array a, how many unique numbers appear exactly twice.

That's straightforward.

I can use a dictionary to count the frequency of each number in a, and then count how many numbers have a frequency of 2.

Hence, the function func_1(a, n) should do exactly that.

Looking at the provided code:

def func_1(a, n):

count_a = {}

for num in a:

if num in count_a:

count_a[num] += 1

else:

count_a[num] = 1

max_score = 0

for num in range(1, n + 1):

if num in count_a:

if count_a[num] == 2:

max_score += 1

return max_score

This seems correct.

It counts the frequency of each number in a, and then counts how many numbers have exactly two occurrences in a.

This should give s, which, according to my earlier reasoning, is the maximum number of points I can get.

Hence, the code is correct.

Wait, but in the fifth test case, n=1, a=[1], s=1, but according to the example, the output is 0.

Wait, that's a problem.

According to my reasoning, s=1, so I should get 1 point, but the example output is 0.

Hence, there must be a mistake in my reasoning.

I need to revisit this.

In the fifth test case:

n=1

a=[1]

So, there are two cards with number 1, and I have one of them, Nene has the other.

So, s=0 (no number appears twice in my hand), t=1 (number 1 appears once in my hand and once in Nene's hand).

According to the earlier assumption, I should get 0 points.

But according to the code, s=0, which matches the example output of 0.

Wait, but earlier I thought that s=1 for n=1, a=[1], but that's incorrect.

Wait, no, in n=1, a=[1], it means I have one card with 1, and Nene has the other card with 1.

Hence, s=0, because no number appears twice in my hand.

Hence, the maximum score I can get is 0.

Hence, the code is correct in this case.

Wait, but earlier I thought that s=1 for n=1, a=[1], which was a mistake.

No, with n=1, a=[1], s=0, because I don't have both cards of any number.

Hence, the code is correct.

Hence, Correctness: True

**Final Solution**

To solve this problem, we need to determine the maximum number of points you can get in a card game against Nene, given optimal play from both sides.

## Approach

1. **Problem Analysis**:
   - You and Nene each have `n` cards with integers from 1 to `n`, where each integer appears exactly twice in the entire deck.
   - During the game, you alternate turns placing one card at a time on the table.
   - A player scores a point if they play a card with a number that is already on the table.

2. **Optimal Strategy**:
   - To maximize your points, you should focus on playing pairs of cards that you hold both of (i.e., you have two cards with the same number).
   - For numbers where you have only one card, Nene has the other, and Nene will play optimally to maximize her score.

3. **Key Insight**:
   - You can score a point only from the numbers where you hold both cards. For such numbers, you can play one card, and then play the second card to score a point.
   - For numbers where you have only one card, the point will go to Nene because she can control when to play her card to maximize her score.

4. **Algorithm**:
   - Count the frequency of each number in your hand.
   - Count how many numbers appear exactly twice in your hand. This count is the maximum points you can score.

## Solution Code

```python
t = int(input())
results = []
for _ in range(t):
    n = int(input())
    a = list(map(int, input().split()))
    result = func_1(a, n)
    results.append(result)
for res in results:
    print(res)

def func_1(a, n):
    count_a = {}
    for num in a:
        if num in count_a:
            count_a[num] += 1
        else:
            count_a[num] = 1
    max_score = 0
    for num in range(1, n + 1):
        if num in count_a:
            if count_a[num] == 2:
                max_score += 1
    return max_score
```

## Explanation

- **Step-by-step Execution**:
  1. Read the number of test cases `t`.
  2. For each test case:
     - Read `n`, the number of cards each player has.
     - Read the list `a` of integers on your cards.
     - Use `func_1` to calculate the maximum points you can get.
  3. Store and print the results for all test cases.

- **Function `func_1`**:
  - Create a frequency dictionary `count_a` for the numbers in your hand.
  - Initialize `max_score` to 0.
  - Iterate through numbers from 1 to `n`:
    - If a number is in `count_a` and its count is 2, increment `max_score`.
  - Return `max_score`, which represents the maximum points you can get.

This approach ensures that you maximize your score by focusing on the pairs you hold completely, while Nene optimally plays to maximize her score from the remaining pairs.