Alright, I've got this problem to solve. Let's see what it's about. So, there's this card game with 2n cards, and each number from 1 to n appears on exactly two cards. Me and Nene each get n cards. Then, we take turns playing cards, and we get a point if the card we play has a number that's already on the table.

The goal is to maximize my points, assuming Nene plays optimally to maximize her points and minimize mine.

First, I need to understand the game mechanics thoroughly.

- There are 2n cards, with numbers from 1 to n, each appearing twice.

- Me and Nene each have n cards.

- We take turns, starting with me, for a total of 2n turns (n turns each).

- On each turn, we play one card from our hand.

- If the number on the card is already on the table, we get a point.

- The table starts empty.

- Nene plays optimally to maximize her score and minimize mine.

I need to find out the maximum number of points I can get.

Let me think about how to approach this.

First, I need to consider what it means for Nene to play optimally. She wants to maximize her points and minimize mine, in that order.

So, in her turn, she will choose a card that either:

- Gives her a point if possible, or

- Prevents me from getting a point if possible.

Wait, no. More precisely:

- She will choose a card that maximizes her points first.

- If there are multiple options that give the same points for her, she will choose the one that minimizes my points.

So, in other words, her priority is to get as many points as possible for herself, and among the options that give her the same number of points, she chooses the one that is least beneficial for me.

Given that, I need to model the game in a way that takes into account both players' strategies.

Let me consider the possible scenarios.

Each number from 1 to n appears exactly twice in the deck. So, for each number, there are two cards with that number.

Me and Nene divide these cards: I have some cards, and Nene has the remaining ones.

Given that, for each number, I can have:

- Both cards (if I have two cards with the same number),

- One card (if I have one card with that number and Nene has the other), or

- No cards (if Nene has both cards with that number).

Wait, no. According to the problem, "each integer from 1 to n appears in the sequence a1,a2,…,an at most 2 times." But since I have n cards, and there are 2n cards in total, it's possible for me to have one or two cards with the same number, but not more than two.

Wait, no: "It is guaranteed that each integer from 1 through n appears in the sequence a1,a2,…,an at most 2 times."

Actually, since I have n cards, and each number appears at most twice in my hand, but since there are only two cards per number in total, it means that for each number, I can have either one or two cards (but not zero, because if I have zero, Nene would have both, but the total is 2n cards).

Wait, no. Wait: total deck has 2n cards, with each number from 1 to n appearing exactly twice.

Me and Nene each get n cards.

So, for each number from 1 to n:

- Either I have both cards,

- Or I have one card and Nene has the other,

- Or Nene has both cards.

But in the input, I only know my cards. So, for each number from 1 to n:

- If it appears once in my hand, then Nene has the other one.

- If it appears twice in my hand, then Nene has none of that number.

- If it doesn't appear in my hand, then Nene has both cards.

Wait, no: the problem says "It is guaranteed that each integer from 1 through n appears in the sequence a1,a2,…,an at most 2 times."

But since there are 2n cards in total, and each number appears exactly twice in the deck, then:

- If a number appears twice in my hand, then Nene has none of that number.

- If a number appears once in my hand, then Nene has one of that number.

- If a number doesn't appear in my hand, then Nene has both of that number.

Wait, but the problem says "It is guaranteed that each integer from 1 through n appears in the sequence a1,a2,…,an at most 2 times."

But since I have n cards, and there are 2n cards in total, it's possible for some numbers to appear zero times in my hand, meaning Nene has both of those numbers.

Wait, but the problem says "each integer from 1 through n appears in the sequence a1,a2,…,an at most 2 times."

So, for each number from 1 to n:

- It can appear 0, 1, or 2 times in my hand.

- If it appears 0 times in my hand, Nene has both cards.

- If it appears 1 time in my hand, I have one card, Nene has the other.

- If it appears 2 times in my hand, I have both cards, Nene has none.

Got it.

Now, the game proceeds with me and Nene taking turns, starting with me, each playing one card per turn, for a total of 2n turns.

The scoring is: you get a point if the number you play is already on the table.

Nene plays optimally to maximize her score, and among optimal moves, she chooses the one that minimizes my score.

I need to find the maximum score I can achieve assuming Nene plays optimally.

This seems like a game theory problem where both players are playing optimally, and I need to find the outcome.

Let me try to model this.

First, I need to understand what decisions are made each turn.

Each turn, the player whose turn it is selects one card from their hand to play.

The card is placed on the table, and if its number is already on the table, the player scores a point.

The table starts empty.

So, the state of the game can be represented by:

- The set of cards on the table.

- The cards each player has in their hand.

But tracking the entire set of cards on the table seems complicated, especially since n can be up to 2*10^5.

I need a smarter way to approach this.

Let me think about the properties of the game.

Each number can give at most one point to a player, because the second time a player plays a card with a number that's already on the table, the number is already there, so they get a point.

Wait, no. Actually, the scoring is: you get a point if the number you play is already on the table.

So, if a number is already on the table, and you play it again, you get a point.

But, for a given number, only the second time it's played will give a point, because the first time, it's not on the table yet.

Wait, no. Let's think carefully.

- Table is empty.

- Player plays a card with number x. Since x is not on the table, no point.

- Later, if another card with x is played, the player gets a point, because x is already on the table.

So, for each number, the second time it's played, the player who plays it gets a point.

Wait, but it's not necessarily the second player to play it. It's the second time the number is played, regardless of who plays it.

Wait, no. It's per player.

Wait, no. The scoring is: you get a point if the number you play is already on the table, regardless of who played it previously.

So, for a given number, the first player to play it gets no point, and the second player to play it gets a point.

Because when the second player plays it, it's already on the table.

Wait, but actually, the first player to play a number puts it on the table, so the second player to play the same number will get a point, because the number is already on the table.

Wait, but it's not necessarily the second player who plays it. It could be the same player playing it again.

Wait, no. Since each player has their own cards, and the cards are distributed between the two players.

Wait, no. Each player has their own hand of cards, and they can only play from their hand.

So, for a given number, if both cards are held by one player, that player can play both cards, but only the second time they play it will they get a point.

Because the first time, the number isn't on the table yet, so no point; the second time, the number is already on the table, so they get a point.

If the two cards are held by different players, then the player who plays it second gets a point.

Wait, no. More precisely:

- Suppose player A plays a number x first. It's not on the table before, so no point.

- Then, if player B plays the same number x next. It's now on the table, so player B gets a point.

- Or, if player A plays x again, they get a point.

But in this game, since both players have their own cards, and they play one by one, alternating turns, starting with me.

I need to model the sequence of plays to maximize my points, assuming Nene plays optimally to maximize her points and minimize mine.

This seems quite involved.

Let me try to think differently.

Let me consider that for each number, there are two cards. Depending on who has which cards, the scoring can be different.

Let me categorize the numbers based on who has the cards.

For each number x:

- If I have both cards: then, I will play one, and then later play the second one to get a point.

- If Nene has both cards: then, she will play one, then the other to get a point.

- If one card is mine and one is Nene's: then, whoever plays the second card gets a point.

Now, I need to think about the sequence in which we play the cards to maximize my points.

Given that Nene plays optimally to maximize her points and minimize mine.

Wait, perhaps I can think in terms of which numbers can give me a point, assuming optimal play.

Let me consider:

- For numbers where I have both cards: I can arrange to play the second one after it's already on the table, so I can get a point from each such number.

- For numbers where I have one card and Nene has the other: the point will be given to whoever plays the second card.

- Nene will try to play her card second to get the point, unless it's better for me to get the point.

Wait, no. Nene wants to maximize her points and minimize mine.

So, in the case where I have one card and Nene has the other:

- If Nene plays her card after I play mine, she gets a point.

- If I play my card after she plays hers, I get a point.

- Since Nene plays optimally to maximize her points, she will choose to play her card second to get the point.

- If there are multiple options, she chooses the one that minimizes my points.

So, in this scenario, Nene will play her card second to get the point.

Therefore, for numbers where I have only one card, and Nene has the other, Nene will get the point.

Hence, I can only get points from numbers where I have both cards.

Wait, is that correct?

Let me think carefully.

Suppose for a number x, I have both cards.

Then, I can arrange to play one card first, and then the second one later to get a point.

Nene cannot interfere with that because she doesn't have any cards of x.

Hence, I can get a point for each number where I have both cards.

For numbers where I have only one card, and Nene has the other:

- Nene will play her card after I play mine, to get the point.

Because she wants to maximize her points and minimize mine.

Hence, in this case, Nene gets the point.

Therefore, my total points would be equal to the number of numbers where I have both cards.

Wait, but is there any way I can get more points beyond that?

Is there any scenario where I can get a point from a number where I have only one card?

Let me think.

Suppose for number x, I have one card, and Nene has the other.

If I play my card first, then Nene can play her card later to get a point.

If I play my card after Nene plays hers, then I get the point.

But Nene plays optimally to maximize her points and minimize mine.

So, in this case, Nene will choose to play her card after I play mine, so that she gets the point.

Therefore, in this scenario, I cannot get a point from numbers where I have only one card.

Hence, my maximum possible points are equal to the number of numbers where I have both cards.

Wait, but is this always true?

Let me consider an example.

Take the first test case:

n=4

My cards: 1,1,2,3

So, Nene's cards: 2,3,4,4

So, for number 1: I have both cards.

For number 2: I have one card, Nene has one card.

For number 3: I have one card, Nene has one card.

For number 4: Nene has both cards.

According to my earlier reasoning, I should get points only from number 1, which is one point.

And indeed, in the example, it's stated that the answer is 1.

Another test case:

n=1

My cards: 1

Nene's cards: 1

In this case, for number 1, I have one card, Nene has one card.

So, according to my reasoning, I cannot get any points, which matches the sample output of 0.

Another test case:

n=3

My cards: 1,2,3

Nene's cards: 1,2,3

Again, for each number, I have one card, Nene has one card.

So, I cannot get any points, which matches the sample output of 0.

Wait, but in the second test case:

n=8

My cards: 7,4,1,2,8,8,5,5

So, Nene's cards: the remaining cards.

Wait, let's see:

Total cards: two each of 1 to 8.

I have: 7,4,1,2,8,8,5,5

So, Nene has: the other 7,4,1,2,8,5, and whatever's missing.

Wait, no. Wait, for each number, I can see how many I have.

- 7: I have one

- 4: I have one

- 1: I have one

- 2: I have one

- 8: I have two

- 5: I have two

So, Nene has:

- 7: one

- 4: one

- 1: one

- 2: one

- 8: none

- 5: none

Wait, no. Wait, I have two 8's and two 5's, so Nene has none of those.

Wait, but n=8, so numbers from 1 to 8.

I have:

- 7: one

- 4: one

- 1: one

- 2: one

- 8: two

- 5: two

So, Nene has:

- 7: one

- 4: one

- 1: one

- 2: one

- 3: one and one (assuming, but I don't have any 3's, so Nene has both 3's)

- 6: one and one (assuming, but I don't have any 6's, so Nene has both 6's)

Wait, but in the input, it's guaranteed that each integer from 1 to n appears at most twice in my hand.

So, for numbers I have two cards, Nene has none.

For numbers I have one card, Nene has one card.

For numbers I have zero cards, Nene has two cards.

So, in this case:

- For 8 and 5, I have both cards, Nene has none.

- For 7,4,1,2, Nene has one card each.

- For 3 and 6, I have zero, Nene has both.

So, according to my earlier reasoning, I can get points only from numbers where I have both cards, which are 8 and 5.

Hence, maximum points I can get are 2, which matches the sample output.

Another test case:

n=8

My cards: 7,1,4,5,3,4,2,6

So, I have:

- 7: one

- 1: one

- 4: two

- 5: one

- 3: one

- 2: one

- 6: one

So, Nene has:

- 7: one

- 1: one

- 5: one

- 3: one

- 2: one

- 6: one

- 4: none

So, only for number 4, I have both cards.

Hence, maximum points I can get are 1, which matches the sample output.

Wait, but according to the sample output, it's 1 for the third test case.

Wait, no, the third test case has output 1, which corresponds to n=8, my cards:7,1,4,5,3,4,2,6.

Yes, only one number (4) where I have both cards.

Hence, my points are 1.

So, it seems that my earlier reasoning holds.

Therefore, the maximum points I can get are equal to the number of numbers where I have both cards.

Hence, the function `func_1` in the given program counts how many numbers appear twice in my hand, which corresponds to the numbers where I have both cards.

Therefore, the program is correct.

So, the answer is Correctness: **True**

**Final Solution**

To solve this problem, we need to determine the maximum number of points you can score in a card game against Nene, given optimal play from both sides.

## Approach

1. **Problem Analysis**:
   - You and Nene each have `n` cards from a deck of `2n` cards.
   - Each number from `1` to `n` appears exactly twice in the deck.
   - Players take turns playing one card at a time, scoring a point if the card's number is already on the table.

2. **Optimal Strategy**:
   - Nene plays optimally to maximize her score and minimize yours.
   - For numbers where you have both cards, you can arrange to play the second card after the first is on the table, scoring a point.
   - For numbers where you have one card and Nene has the other, Nene will play her card after you to score a point.

3. **Key Insight**:
   - You can only score points from numbers where you have both cards.

4. **Algorithm**:
   - Count the frequency of each number in your hand.
   - Count how many numbers appear twice in your hand, as these are the numbers from which you can score points.

## Solution Code

```python
t = int(input())
results = []
for _ in range(t):
    n = int(input())
    a = list(map(int, input().split()))
    result = func_1(a, n)
    results.append(result)
for res in results:
    print(res)

def func_1(a, n):
    count_a = {}
    for num in a:
        if num in count_a:
            count_a[num] += 1
        else:
            count_a[num] = 1
    max_score = 0
    for num in range(1, n + 1):
        if num in count_a:
            if count_a[num] == 2:
                max_score += 1
    return max_score
```

## Explanation

- **Step-by-step Breakdown**:
  1. Read the number of test cases.
  2. For each test case, read `n` and the list of cards in your hand.
  3. Use `func_1` to calculate the maximum score:
     - Create a frequency dictionary of the numbers in your hand.
     - Iterate through each number from `1` to `n` and check if it appears twice in your hand.
     - Count and return the number of such numbers.

- **Optimal Play**:
  - By only considering numbers where you hold both cards, you ensure that you can score a point from each such number, assuming Nene plays optimally to prevent you from scoring elsewhere.

- **Complexity**:
  - Time: O(n) per test case due to iterating through the list of cards and then through numbers from `1` to `n`.
  - Space: O(n) for storing the frequency dictionary.

This approach ensures that you calculate the maximum possible points you can achieve under optimal play conditions.