Alright, I've got this problem to solve. Let's see what it's asking for. So, Alex has n constraints on an integer k, and there are three types of constraints:

1. k must be greater than or equal to some integer x.

2. k must be less than or equal to some integer x.

3. k must be not equal to some integer x.

And I need to find out how many integers k satisfy all these constraints. Also, it's guaranteed that there's at least one constraint of type 1 and one of type 2, which ensures that the range of k is finite. Plus, no two constraints are the same.

First, I need to understand the input format. There are multiple test cases, and for each test case, I have the number of constraints n, followed by n lines each containing a pair of integers a and x, where a indicates the type of constraint and x is the value.

My goal is to count the number of integers k that satisfy all these constraints for each test case.

Let me think about how to approach this.

I think the key is to determine the range of k based on the constraints of type 1 and 2, and then subtract the numbers that are excluded by the constraints of type 3.

So, for constraints of type 1 (k >= x), I need to find the maximum x among these constraints because k needs to satisfy all of them. Similarly, for constraints of type 2 (k <= x), I need to find the minimum x among these because k has to be less than or equal to all of them.

Then, the possible values of k would be in the range from the maximum of type 1 constraints to the minimum of type 2 constraints.

But, there are also constraints of type 3 (k != x), which means I need to exclude specific values from this range.

Wait, but in the problem statement, it says that no two constraints are the exact same, so all pairs (a, x) are distinct. That means I don't have duplicate constraints.

Let me think about potential edge cases.

For example, if there are multiple type 1 constraints, like:

1 3

1 5

Then, k must be >= 5, because it has to satisfy both k >=3 and k >=5, so effectively k >=5.

Similarly, if there are multiple type 2 constraints, like:

2 10

2 7

Then, k must be <=7, because it has to satisfy both k <=10 and k <=7, so effectively k <=7.

And for type 3 constraints, I just need to exclude specific values from the range determined by type 1 and 2 constraints.

So, in code, I need to:

1. Find the maximum x from all type 1 constraints.

2. Find the minimum x from all type 2 constraints.

3. Collect all x from type 3 constraints.

4. Then, the number of valid k is the number of integers from the maximum type 1 x to the minimum type 2 x, excluding the values listed in type 3 constraints.

But I need to make sure that the range is valid, meaning that the maximum type 1 x is less than or equal to the minimum type 2 x. If not, there are no valid k.

Also, I need to handle the case where type 3 constraints might exclude values outside the range, but since the range is bounded by type 1 and 2 constraints, I only need to consider exclusions within that range.

Let me think about how to implement this.

I can iterate through all constraints, keeping track of the current maximum for type 1 and the current minimum for type 2. For type 3, I can keep a set of excluded values.

Then, after processing all constraints, I can calculate the number of integers in the range [max_type1, min_type2], excluding the values in the excluded set that fall within this range.

I need to be careful with the boundaries. If k must be >= a and <= b, then the number of possible k is b - a + 1, provided a <= b. Otherwise, it's 0.

Also, I need to handle large input sizes efficiently, since n can be up to 100 and t up to 500, which is manageable.

Let me consider the first example:

4

1 3

2 10

3 1

3 5

So, type 1: max(x) = 3

Type 2: min(x) = 10

Type 3: exclude 1 and 5

Range: 3 to 10, which is 3,4,5,6,7,8,9,10

Exclude 5, since 1 is outside the range.

So, 3,4,6,7,8,9,10 → 7 values.

Which matches the sample output.

Another sample:

2

1 5

2 4

Here, max_type1 = 5, min_type2 =4

Since 5 > 4, no possible k, so 0.

Another sample:

10

3 6

3 7

1 2

1 7

3 100

3 44

2 100

2 98

1 3

3 99

So, type 1: max(x)=7 (since 1 7 is the highest among 1 2, 1 7, 1 3)

Type 2: min(x)=98 (from 2 98 and 2 100)

Type 3: exclude 6,7,100,44,99

Range: 7 to 98

Exclude values: 6 (outside), 7, 100 (outside), 44, 99 (outside)

So, exclude 7 and 44 within the range.

Number of k: 98 - 7 +1 = 92, minus 2 exclusions → 90.

Which matches the sample output.

Seems correct.

Now, in the code provided, it follows a similar logic.

It initializes bx to negative infinity (sort of, using a large negative number), ax to positive infinity, and a set cx for type 3 constraints.

Then, for each constraint:

- If a=1, update bx to max(bx, x)

- If a=2, update ax to min(ax, x)

- If a=3, add x to cx

After processing all constraints, if bx >= ax, meaning the range is invalid, output 0.

Else, count the number of exclusions within the range and subtract them from the total range size.

Specifically, tmp counts the number of type 3 constraints within the range [bx, ax].

Then, the number of valid k is (ax - bx +1) - tmp.

This seems correct.

I need to make sure that the initial values of bx and ax are appropriately set.

In the code, bx is initialized to -1, which might not always work, especially for negative x values. But according to the problem, x is at least 1, so bx initialized to -1 is fine since type 1 constraints will update it to at least 1.

Also, ax is initialized to a large number (1000000000.0 +7), which should be sufficient since x can be up to 10^9.

Using a set for cx is efficient for checking if a value is excluded.

Also, the final answer is printed all at once, with all test cases' results separated by newline.

Seems efficient and correct.

Let me think about potential edge cases.

Edge Case 1: n=2, minimal constraints.

- One type 1 and one type 2, with bx == ax.

- For example:

2

1 5

2 5

Then, k must be >=5 and <=5, so k=5.

If there is a type 3 constraint excluding 5, then no valid k.

But in this case, n=2, so only type 1 and type 2, no type 3, so k=5 is valid.

But according to the problem, n>=2, and there can be up to 100 constraints.

Edge Case 2: Multiple overlapping constraints.

- For example:

3

1 1

1 2

2 3

- So, bx = max(1,2) =2

- ax = min(3) =3

- Range: 2,3

- If type 3 excludes 2 and 3, then no valid k.

Edge Case 3: Exclusions outside the range.

- For example:

3

1 2

2 4

3 1

- Range: 2 to 4

- Exclude 1 (which is outside the range), so exclude nothing.

- Valid k: 2,3,4

Edge Case 4: Large range.

- n=2

- 1 1

- 2 1000000000

- No type 3 constraints.

- Number of k: 1000000000 -1 +1 =1000000000

- But in sample input, there's a case with 6 constraints having answer 800000000, which fits.

I think the code handles these cases correctly.

Another thing to consider is the data types. Since x can be up to 10^9, and n up to 100, and t up to 500, using integers should be fine in Python, as Python handles big integers well.

Also, using a set for cx is efficient for lookups and additions.

I don't see any issues with the code logic based on the problem description.

Therefore, I conclude that the given program is correct.

**Final Answer**

\[ \boxed{\text{True}} \]