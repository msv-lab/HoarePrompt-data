Alright, I've got this problem to solve. Let me read it carefully.

So, I'm given two positive integers, n and m, and I need to find the number of ordered pairs (a, b) where 1 ≤ a ≤ n and 1 ≤ b ≤ m, such that a + b is a multiple of b multiplied by the greatest common divisor of a and b. In mathematical terms, a + b should be divisible by b * gcd(a, b).

First, I need to understand what this condition means. Let's denote gcd(a, b) as g. Then, b * g divides a + b. Since g divides both a and b, g divides a + b as well. So, a + b is divisible by g, and we need it to be divisible by b * g.

Let me see if I can simplify this condition.

Given that g divides both a and b, I can write a = g * a' and b = g * b', where a' and b' are coprime integers (since g is the greatest common divisor).

Substituting these into the condition:

a + b = g * a' + g * b' = g * (a' + b')

We need this to be divisible by b * g = g * b' * g.

Wait, b = g * b', so b * g = g * b' * g = g^2 * b'.

So, g * (a' + b') should be divisible by g^2 * b'.

Simplifying, this means that a' + b' should be divisible by g * b'.

But a' and b' are coprime, since g is the gcd of a and b.

Hmm, maybe there's a better way to approach this.

Let me consider the condition again: b * gcd(a, b) divides a + b.

Let me denote d = gcd(a, b). Then, d divides a and d divides b.

So, a = d * a' and b = d * b', where a' and b' are integers with gcd(a', b') = 1.

Substituting into the condition:

b * d divides a + b ⇒ d * b' * d divides d * a' + d * b' ⇒ d^2 * b' divides d(a' + b') ⇒ d * b' divides a' + b'.

Since a' and b' are coprime, and b' divides a' + b', and since b' divides b', it must divide a' as well. But a' and b' are coprime, so b' can only divide a' if b' = 1.

Wait, that seems off. If b' divides a' + b', and b' divides b', then b' divides a' + b' - b' = a'. But a' and b' are coprime, so b' can only divide a' if b' = 1.

Therefore, b' must be 1.

So, b' = 1 ⇒ b = d * 1 = d.

And a = d * a', where a' is coprime with b' = 1, so a' can be any integer.

Wait, but a' and b' are coprime, and b' = 1, so a' can be any positive integer.

Given that, a = d * a' and b = d.

So, the condition simplifies to b = d, and a = d * a', where a' is any positive integer.

Now, the constraints are 1 ≤ a ≤ n and 1 ≤ b ≤ m.

Since a = d * a' and b = d, we have 1 ≤ d * a' ≤ n and 1 ≤ d ≤ m.

Given that d divides a and d divides b, and b = d, it's clear that d divides a.

So, a = d * a', where a' is an integer ≥1.

Now, to count the number of such pairs (a, b), we can iterate over all possible values of d (which is b), and for each d, count the number of a's such that a = d * a' and 1 ≤ a ≤ n.

Given that a = d * a', we have 1 ≤ d * a' ≤ n ⇒ 1 ≤ a' ≤ floor(n / d).

So, for each d from 1 to m, the number of a's is floor(n / d).

Therefore, the total number of pairs is the sum over d from 1 to m of floor(n / d).

Wait, but is that correct? Let me verify with the sample input.

In the first sample input:

n = 1, m = 1

floor(1 / 1) = 1, which matches the sample output of 1.

Second sample input:

n = 2, m = 3

Sum floor(2 / d) for d from 1 to 3:

d=1: floor(2/1) = 2

d=2: floor(2/2) = 1

d=3: floor(2/3) = 0

Total: 2 + 1 + 0 = 3, which matches the sample output of 3.

Third sample input:

n=3, m=5

Sum floor(3/d) for d=1 to 5:

d=1: 3

d=2: 1

d=3: 1

d=4: 0

d=5: 0

Total: 3 + 1 + 1 + 0 + 0 = 5, but the sample output is 4. Wait, that doesn't match.

Wait, perhaps I made a mistake.

Wait, in the third sample input, n=3, m=5, sample output is 4.

But according to my calculation, it should be 5. So, perhaps my reasoning is incomplete.

Let me check which pairs are valid for n=3, m=5.

Possible b values from 1 to 5.

For b=1:

a + 1 must be a multiple of 1 * gcd(a,1). Since gcd(a,1)=1, so a+1 must be a multiple of 1, which is always true. So, all a from 1 to 3 are valid: (1,1), (2,1), (3,1)

For b=2:

a + 2 must be a multiple of 2 * gcd(a,2)

If a is even, gcd(a,2)=2, so a+2 must be a multiple of 4.

If a is odd, gcd(a,2)=1, so a+2 must be a multiple of 2.

For a from 1 to 3:

a=1: gcd(1,2)=1, 1+2=3, which is a multiple of 2? 3/2=1.5, no. So, invalid.

a=2: gcd(2,2)=2, 2+2=4, which is a multiple of 4. So, valid: (2,2)

a=3: gcd(3,2)=1, 3+2=5, which is a multiple of 2? 5/2=2.5, no. So, invalid.

So, only (2,2) is valid for b=2.

For b=3:

a + 3 must be a multiple of 3 * gcd(a,3)

If a is a multiple of 3, gcd(a,3)=3, so a+3 must be a multiple of 9.

If a is not a multiple of 3, gcd(a,3)=1, so a+3 must be a multiple of 3.

For a from 1 to 3:

a=1: gcd(1,3)=1, 1+3=4, which is a multiple of 3? 4/3≈1.333, no.

a=2: gcd(2,3)=1, 2+3=5, which is a multiple of 3? 5/3≈1.666, no.

a=3: gcd(3,3)=3, 3+3=6, which is a multiple of 9? 6/9≈0.666, no.

So, no valid pairs for b=3.

For b=4:

a + 4 must be a multiple of 4 * gcd(a,4)

For a from 1 to 3:

a=1: gcd(1,4)=1, 1+4=5, which is a multiple of 4? 5/4=1.25, no.

a=2: gcd(2,4)=2, 2+4=6, which is a multiple of 8? 6/8=0.75, no.

a=3: gcd(3,4)=1, 3+4=7, which is a multiple of 4? 7/4=1.75, no.

No valid pairs for b=4.

For b=5:

a + 5 must be a multiple of 5 * gcd(a,5)

For a from 1 to 3:

a=1: gcd(1,5)=1, 1+5=6, which is a multiple of 5? 6/5=1.2, no.

a=2: gcd(2,5)=1, 2+5=7, which is a multiple of 5? 7/5=1.4, no.

a=3: gcd(3,5)=1, 3+5=8, which is a multiple of 5? 8/5=1.6, no.

No valid pairs for b=5.

So, total valid pairs: (1,1), (2,1), (2,2), (3,1) → 4 pairs, which matches the sample output.

But according to my earlier reasoning, the sum would be floor(3/1) + floor(3/2) + floor(3/3) + floor(3/4) + floor(3/5) = 3 + 1 + 1 + 0 + 0 = 5, but actually, there are only 4 valid pairs.

So, my earlier reasoning is incorrect.

I must have made a mistake in assuming that for each d from 1 to m, the number of a's is floor(n/d).

Wait, perhaps not all d from 1 to m satisfy the original condition.

Wait, in the earlier simplification, I assumed that d = b = gcd(a, b), and a = d * a', where a' is integer >=1.

But in the third sample input, when d=3, m=5, floor(3/3)=1, but there are no valid pairs for b=3.

So, perhaps not all d from 1 to m are valid.

I need to revisit my earlier steps.

Let me try to think differently.

Given that a + b is a multiple of b * gcd(a, b), let's denote g = gcd(a, b).

Then, b * g divides a + b.

Since g divides a and g divides b, g divides a + b.

So, b * g divides a + b.

But a + b = k * (b * g) for some integer k >=1.

So, a + b = k * b * g.

But since g divides b, let's write b = g * b', where b' is integer >=1.

Then, a = g * a', where a' is integer >=1, and gcd(a', b') = 1.

Substituting:

a + b = g * a' + g * b' = g(a' + b') = k * b * g = k * g * b'

So, a' + b' = k * b'

Therefore, a' = (k - 1) * b'

Since a' and b' are coprime, and b' divides a', then b' must be 1.

Therefore, b' = 1, which implies b = g * 1 = g.

And a' = (k - 1) * 1 = k - 1.

So, a = g * (k - 1), and b = g.

Given that 1 <= a <= n and 1 <= b <= m, we have:

1 <= g * (k - 1) <= n

and

1 <= g <= m

Also, since a' = k - 1 >=1, then k >=2.

So, for each possible g from 1 to m, and for each k from 2 to floor(n / g) + 1, we have a valid pair (a, b) = (g * (k - 1), g).

Wait, but in the earlier sample input, for n=3, m=5, sum floor(n/d) for d from 1 to 5 is 5, but only 4 pairs are valid.

According to this, for each d=g from 1 to m, number of a's is floor(n / d).

But in reality, not all d are valid because for some d, there might be no a's that satisfy the condition.

Wait, perhaps I need to ensure that a = g * (k - 1) and b = g, and that a <=n and b <=m.

Given that, for each g from 1 to m, the number of a's is floor((n - g) / g) + 1, provided that g <= m.

Wait, let's see:

a = g * (k - 1), where k >=2.

So, a >= g * 1 = g, and a <= n.

So, g <= a <= n, and a is a multiple of g.

The number of multiples of g between g and n is floor((n - g) / g) + 1.

Wait, more precisely, the number of integers k such that k >=2 and g * (k - 1) <=n.

Let me set t = k - 1, so t >=1.

Then, a = g * t, with t >=1 and g * t <=n.

So, t <= floor(n / g).

Since t >=1, the number of possible t is floor(n / g).

Therefore, for each g from 1 to m, the number of a's is floor(n / g).

But in the third sample input, n=3, m=5, sum floor(3 / d) for d=1 to 5 is 3 +1 +1 +0 +0 =5, but only 4 pairs are valid.

Wait, perhaps not all g from 1 to m are valid.

Wait, in the earlier manual check for n=3, m=5, g=3, but there are no valid pairs for g=3.

So, perhaps g must satisfy some additional condition.

Wait, perhaps g must divide n.

Wait, no, in the earlier manual check for g=1, floor(3/1)=3, but only 3 a's are possible: a=1,2,3.

But in reality, for g=1, a can be 1,2,3, and b=1.

But in the manual check, (3,1) is invalid because 3 +1=4, which is not a multiple of 1*1=1, but 4 is a multiple of 1, so it should be valid.

Wait, no, 4 is a multiple of 1, so it should be valid.

But in my earlier manual check, I thought (3,1) was valid.

Wait, maybe I made a mistake in the manual check.

Let me re-examine:

For b=1, which is g=1:

a +1 must be a multiple of 1 * gcd(a,1)=1.

Since any integer is a multiple of 1, all a=1,2,3 are valid: (1,1), (2,1), (3,1).

For b=2, g=2:

a +2 must be a multiple of 2 * gcd(a,2).

If a is even, gcd(a,2)=2, so a+2 must be a multiple of 4.

If a is odd, gcd(a,2)=1, so a+2 must be a multiple of 2.

For a=1: a+2=3, which is a multiple of 2? 3/2=1.5, no.

For a=2: a+2=4, which is a multiple of 4? 4/4=1, yes.

For a=3: a+2=5, which is a multiple of 2? 5/2=2.5, no.

So, only (2,2) is valid for b=2.

For b=3, g=3:

a +3 must be a multiple of 3 * gcd(a,3).

If a is a multiple of 3, gcd(a,3)=3, so a+3 must be a multiple of 9.

If a is not a multiple of 3, gcd(a,3)=1, so a+3 must be a multiple of 3.

For a=1: a+3=4, which is a multiple of 3? 4/3≈1.333, no.

For a=2: a+3=5, which is a multiple of 3? 5/3≈1.666, no.

For a=3: a+3=6, which is a multiple of 9? 6/9≈0.666, no.

So, no valid pairs for b=3.

For b=4, g=4:

a +4 must be a multiple of 4 * gcd(a,4).

If a is a multiple of 4, gcd(a,4)=4, so a+4 must be a multiple of 16.

If a is a multiple of 2 but not 4, gcd(a,4)=2, so a+4 must be a multiple of 8.

If a is odd, gcd(a,4)=1, so a+4 must be a multiple of 4.

For a=1: a+4=5, which is a multiple of 4? 5/4=1.25, no.

For a=2: a+4=6, which is a multiple of 8? 6/8=0.75, no.

For a=3: a+4=7, which is a multiple of 4? 7/4=1.75, no.

So, no valid pairs for b=4.

For b=5, g=5:

a +5 must be a multiple of 5 * gcd(a,5).

If a is a multiple of 5, gcd(a,5)=5, so a+5 must be a multiple of 25.

If a is not a multiple of 5, gcd(a,5)=1, so a+5 must be a multiple of 5.

For a=1: a+5=6, which is a multiple of 5? 6/5=1.2, no.

For a=2: a+5=7, which is a multiple of 5? 7/5=1.4, no.

For a=3: a+5=8, which is a multiple of 5? 8/5=1.6, no.

So, no valid pairs for b=5.

Total valid pairs: (1,1), (2,1), (2,2), (3,1) → 4 pairs.

But according to the earlier sum floor(n/d) for d=1 to m, it would be 3 +1 +1 +0 +0 =5, but only 4 pairs are valid.

So, there must be a mistake in the sum floor(n/d).

Wait, perhaps d must be <= min(m, n).

Wait, no, d can be up to m, but floor(n/d) might be zero for d > n.

But in this case, d=3, floor(3/3)=1, but there are no valid pairs for d=3.

So, perhaps not all d from 1 to m are valid.

Wait, perhaps d must divide n.

Wait, no, in this case, d=3 divides n=3, but there are no valid pairs for d=3.

Wait, perhaps I need to exclude some d's.

Wait, perhaps when d > n, floor(n/d)=0, but in this case, d=3 <=n=3, floor(3/3)=1, but no valid pairs.

Wait, perhaps the condition is more stringent.

Wait, perhaps in the case d=3, a=3, but a + b =3 +3=6, which needs to be a multiple of b * gcd(a,b)=3 * 3=9. 6 is not a multiple of 9, so (3,3) is invalid.

Wait, but in my earlier sum, floor(3/3)=1, which would count (3,3), but it's invalid.

So, perhaps not all d from 1 to m are valid.

Wait, perhaps d must satisfy that there exists an a such that a + d is a multiple of d * gcd(a, d).

Given that a = d * t, where t >=1 and t <= floor(n/d).

Then, a + d = d * t + d = d(t +1)

Needs to be a multiple of d * gcd(d * t, d) = d * d * gcd(t,1) = d^2.

So, d(t +1) must be a multiple of d^2 ⇒ t +1 must be a multiple of d.

So, t = k * d -1 for some integer k >=1.

But t >=1, so k * d -1 >=1 ⇒ k >= (2)/d.

Wait, for d=3, t = 3k -1.

t must be >=1, so 3k -1 >=1 ⇒ k >= (2)/3, so k >=1.

Thus, t=2,5,8,... up to floor((n - d)/d) +1.

Wait, in this case, for d=3, n=3, t=1, which is less than 2, so no valid t.

Hence, no valid pairs for d=3.

So, in the sum floor(n/d), we need to subtract the invalid t's.

Wait, perhaps the correct count is floor(n/d) minus the number of invalid t's.

But this seems complicated.

Alternatively, perhaps the condition is that t +1 is a multiple of d.

So, t = m * d -1 for some integer m >=1.

Then, a = d * t = d * (m * d -1) = m * d^2 - d.

But a must be <=n, so m * d^2 - d <=n ⇒ m <= (n + d)/d^2.

So, for each d, the number of valid m is floor((n + d)/d^2).

Wait, let's see.

Given t = m * d -1, and t >=1, so m >= (2)/d.

But m must be integer >=1, so m >= ceil(2/d).

But d is integer >=1, so ceil(2/d) = 2 for d=1, and 1 for d>=2.

Wait, this seems messy.

Maybe there's a better way.

Let me consider that t +1 is a multiple of d, as per earlier.

So, t ≡ -1 mod d.

Given t >=1 and t <= floor(n/d), the number of t in this range that satisfy t ≡ -1 mod d.

This is equivalent to t ≡ (d -1) mod d.

So, t can be d -1, 2d -1, 3d -1, etc., up to the maximum t <= floor(n/d).

Let me find how many such t's there are.

Let’s denote the general term as t_k = k * d -1, for k >=1.

We need t_k >=1 and t_k <= floor(n/d).

So, k * d -1 >=1 ⇒ k >= (2)/d.

Since k is integer >=1, k >= ceil(2/d).

For d=1, ceil(2/1)=2, so k >=2.

For d>=2, ceil(2/d)=1, so k >=1.

Then, k * d -1 <= floor(n/d).

So, k <= (floor(n/d) +1)/d.

Wait, k <= floor((floor(n/d) +1)/d).

This seems complicated.

Alternatively, since t = k * d -1 <= floor(n/d), then k <= (floor(n/d) +1)/d.

But this is still messy.

Perhaps there's a better way to count the number of t's that satisfy t ≡ (d -1) mod d.

The number of such t's is floor((n + d)/ (d * d)).

Wait, let's see.

The general formula for the number of integers t in [1, floor(n/d)] such that t ≡ (d -1) mod d is floor((n + d)/(d * d)).

This seems to be a standard result in number theory for counting the number of integers in a range that satisfy a certain congruence.

Therefore, for each d from 1 to m, the number of valid a's is floor((n + d)/(d * d)).

So, the total number of pairs is the sum over d from 1 to m of floor((n + d)/(d * d)).

Let me verify this with the sample input.

First sample input: n=1, m=1

Sum for d=1: floor((1 +1)/(1*1)) = floor(2/1)=2, but only (1,1) is valid, which is 1 pair. So, discrepancy.

Wait, perhaps I made a mistake.

Wait, in the first sample input, n=1, m=1.

Possible pairs: (1,1)

Check condition: a + b =1 +1=2, which should be a multiple of b * gcd(a,b)=1 * 1=1. Since 2 is a multiple of 1, it's valid.

So, only one valid pair, but according to the formula, floor((1 +1)/(1*1))=2.

So, perhaps the formula overcounts.

Wait, perhaps the formula needs to consider that t >=1 and t <= floor(n/d), and t ≡ (d -1) mod d.

For d=1, t ≡ (1 -1)=0 mod 1, which is always true.

So, number of t's in [1, floor(n/d)]= [1,1] that are ≡0 mod1, which is t=1, which is one valid pair.

So, in this case, the formula should give 1, but floor((1 +1)/(1*1))=2, which is incorrect.

Wait, perhaps the formula is floor((n + d)/(d * d)) - floor((d -1)/(d * d)).

But floor((1 +1)/(1*1)) - floor((1 -1)/(1*1)) = 2 - 0 =2, which is still incorrect.

Alternatively, perhaps it's floor((n + d -1)/(d * d)).

For d=1: floor((1 +1 -1)/(1*1))=floor(1/1)=1, which matches.

For d=2: floor((1 +2 -1)/(2*2))=floor(2/4)=0.

So, total pairs: 1 +0=1, which matches the sample input.

For the second sample input: n=2, m=3

Sum for d=1: floor((2 +1)/(1*1))=3

d=2: floor((2 +2)/(2*2))=floor(4/4)=1

d=3: floor((2 +3)/(3*3))=floor(5/9)=0

Total: 3 +1 +0=4, but the sample output is 3.

Wait, but according to the earlier manual check, for n=2, m=3, there are 3 valid pairs: (1,1), (2,1), (2,2).

But according to this formula, it's 4.

Wait, perhaps there is an overlap or miscalc