Postcondition: ***`v` is a valid key in `nbr`, `nbr[v]` is not empty, `i` is either in `marked` or not. If `i` is in `marked`, `res` is `[i]` and `Q` is `[i]`. Otherwise, no change is made to `res` and `Q`.***