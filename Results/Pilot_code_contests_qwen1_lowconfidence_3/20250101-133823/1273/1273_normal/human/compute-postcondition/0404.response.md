Postcondition: ***`q` is a non-empty list with its first element removed, `cur` is the first element of the original `q`, `e[cur]` must have at least one element, and `dep[to]` equals -1***