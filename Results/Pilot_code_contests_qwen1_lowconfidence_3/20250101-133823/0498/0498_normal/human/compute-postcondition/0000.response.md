Output State: **`n` is an integer such that 1 ≤ n ≤ 100 000, `mem` is a Counter object counting the occurrences of elements in the list `w`, `mem2` is a defaultdict of lists, `out` is an empty list**