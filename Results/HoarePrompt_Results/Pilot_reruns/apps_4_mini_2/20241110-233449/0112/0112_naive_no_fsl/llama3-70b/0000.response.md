Correctness: **False**

The provided program does not correctly implement the problem description. Here are some reasons why it is incorrect:

1. **Leading Zeros**: The program does not handle cases where the resulting number cannot have leading zeros correctly. Although it removes '0' from the set of digits, it does not consider that the first digit of the number being constructed cannot be '0'. 

2. **Cube Usage**: The program fails to consider that multiple cubes may be needed to create certain numbers. For example, if Masha needs to form the number 88, the program should check if there are at least two cubes that can provide the digit '8'. The current implementation does not account for the fact that digits must be formed using separate cubes.

3. **Max Number Calculation**: The calculation of `max_num` using `sorted(digits, reverse=True)` is incorrect. It simply constructs the largest number possible from the unique digits available, without accounting for the requirement to form all numbers from 1 up to that maximum.

For example, consider the input:
```
3
0 1 2 3 4 5
6 7 8 9 0 1
2 3 4 5 6 7
```
According to the problem, Masha can build numbers from 1 to 87, but the program might output a number based only on available digits without ensuring that all numbers up to that number can actually be constructed.

Overall, the program's logic does not align with the requirements of forming all integers from 1 to a maximum x, leading to its incorrectness.