The function accepts an integer `n` and a list of 6-element lists of integers `cubes`, and returns the maximum number that can be formed from the unique integers in `cubes`, assuming `n` is within the range 1 ≤ n ≤ 3 and `cubes` is a valid list of 6-element lists of integers. If `n` is outside the valid range or `cubes` is not a valid list, the function's behavior is undefined. If `can_form_number` throws an exception, the function's behavior is also undefined.