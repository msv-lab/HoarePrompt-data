The function accepts a non-empty string `chars` containing digits and a non-empty string `sub`. It generates all valid permutations of `chars` and yields those that satisfy the `is_valid_number` condition relative to `sub`. The function does not return a list of possible numbers; instead, it yields the valid permutations one by one, which means the results are generated lazily and can be iterated over. Additionally, it does not insert `sub` into `chars` at any position; instead, it checks the validity of the complete permutation against `sub`.