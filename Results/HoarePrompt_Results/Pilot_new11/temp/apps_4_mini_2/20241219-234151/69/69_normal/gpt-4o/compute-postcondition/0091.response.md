Postcondition: ***`final_x` and `final_y` are the results of net movements. If `target_pos` is in `position_map`, then `min_length` is updated to the minimum of (`min_length`, `i - position_map[target_pos]`). Additionally, `n` must be greater than `i + 1`, and `target_pos` is equal to `current_x + dx, current_y + dy`.***