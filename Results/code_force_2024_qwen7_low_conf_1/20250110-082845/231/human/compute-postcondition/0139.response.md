Postcondition: ***`i` is `i + 1`, `curType` is the same, `cur[curType]` is the same, `bad` is the same, `badType` is the same, `types` is the same. If `bad != -1` and `i < bad` and `types[i] == badType`, `ans` is the sum of `a[types[i+1]][i+1]` and `a[badType][bad] - a[1 - badType][bad] + a[1 - badType][n + m]`, `val` is `ans - a[types[i]][i] + a[badType][bad] - a[1 - badType][bad] + a[1 - badType][n + m]`, `res` is the list with one additional element, which is the previous `val` plus `a[types[i+1]][n + m]`. Otherwise, `ans` remains the same as the original `ans - a[types[i]][i]`, `val` is `(ans - a[types[i]][i]) + a[types[i]][n + m]`, `res` is the list with one additional element, which is the previous `val` plus `a[types[i+1]][n + m]`.***