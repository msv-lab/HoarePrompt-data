Reasoning:
The provided function attempts to solve the problem by iterating through each test case and determining whether there exists at least one pair of friends who are each other's best friends (i.e., `a[a[i] - 1] == i + 1`). If such a pair exists, the function prints `2`, indicating that at most 2 invitations are needed. Otherwise, it prints `3`, indicating that 3 invitations are needed.

However, the function has several issues that make it incorrect:

1. **Handling of Multiple Test Cases**: The function should handle multiple test cases as indicated in the problem statement. However, the provided function does not reset the variables `n`, `a`, and `z` for each new test case. This means that after processing the first test case, the values of `n`, `a`, and `z` might still be used in subsequent test cases, leading to incorrect results.

2. **Logic Error**: The logic inside the loop that checks for the existence of the pair `(i, a[i] - 1)` is flawed. The function should check for pairs of friends `(i, a[i] - 1)` and see if they are also best friends with each other (`a[a[i] - 1] == i + 1`). The current implementation only checks if `a[a[i] - 1] == i + 1` without ensuring the reverse condition.

3. **Edge Cases**: The function does not handle edge cases properly. For example, when there are only 2 friends, the function should always print `2` because if the first friend's best friend is the second friend and vice versa, sending invitations to both friends will ensure that at least 2 friends come to the party.

Given these issues, the provided function is incorrect.

Correctness: **False**