The function processes an input consisting of \( n \) lines, each containing \( n \) characters that represent transition videos between scenarios. These characters can be 'F' (funny), 'S' (scary), '?' (indicating a undecided transition video), or '.' (no transition video needed). The function calculates counts of 'F' and 'S' characters up to each scenario and then determines two lists, `sa` and `sb`, based on these counts. Depending on the relative sizes of `sa` and `sb`, it either assigns values to `sa` or `sb`. Finally, the function constructs and prints a new set of transition videos for each scenario, ensuring that the number of scary videos does not exceed the number of funny videos by more than a quarter of the total scenarios. If the counts of 'F' and 'S' characters do not allow such construction, the function ensures that the number of funny videos does not exceed the number of scary videos by more than a quarter.