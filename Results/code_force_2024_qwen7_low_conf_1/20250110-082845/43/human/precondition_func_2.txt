t is an integer representing the number of test cases, n is an integer such that 2 <= n <= 10^5, edges is a list of integers where each element a_i (1 <= a_i < i) represents an edge connecting vertex i to vertex a_i, and student_types is a string of length n consisting of characters 'P', 'S', and 'C' where 'P' indicates a partying student, 'S' indicates a sleeping student, and 'C' indicates a student who doesn't care.