Postcondition: ***`s` is a string consisting of lowercase Latin letters and/or question marks, `n` is at least `2 * d + 1`, `max_length` is `max(2 * d, max_length)`, `count` is updated according to the rules provided (specifically, if `count == d`, then `count` is updated based on the specified formula; otherwise, `count` remains unchanged), and `l` is `n - 2 * d - 2`.***