Reasoning:

1. **Function `func_1`**: This function reads a single line of input, splits it into tokens, and converts them to integers. It returns a list of integers, which is used to populate the `l` and `r` lists. This function correctly parses the input and formats it as required.

2. **Function `func_2`**: This function reads an integer input from the user. It is not directly used in the logic of `func_5`, so it doesn't affect the correctness of the main function. However, the presence of this function suggests that there might be other parts of the codebase that require an integer input, but they are not utilized here.

3. **Function `func_3`**: This function reads `n` and `q` followed by `q` pairs of integers `l_i` and `r_i`. It returns a map object containing these pairs, which are later unpacked into `l` and `r`. The function correctly reads the necessary input and formats it as required.

4. **Function `func_4`**: This function reads a single line of input and returns it as a string. It is not directly used in the logic of `func_5`, so it doesn't affect the correctness of the main function.

5. **Function `func_5`**: This function reconstructs the original permutation based on the operations described. It uses a doubly linked list to represent the splits and merges the segments to find the original permutation. The function handles the construction of the linked list, identification of the sequence of nodes, and the calculation of the number of valid permutations correctly. The modulo operation ensures that the result fits within the specified constraints.

Given the detailed analysis of each function and their roles in the overall logic, the program correctly implements the problem statement and handles the input and output as required.

Correctness: **True**