Reasoning:
1. The problem involves constructing a chain from puzzle pieces, where each piece has specific connection requirements.
2. The solution uses dynamic programming to calculate the number of ways to construct the chain for each test case.
3. Function `func_1` calculates the number of ways to build a chain using a dynamic programming approach, where `dp[i][j]` represents the number of ways to build a chain ending with a certain type of piece (`j = 0, 1, 2, 3`).
4. The transition in `func_1` correctly updates the DP table based on the connectivity rules between the pieces.
5. Function `func_2` reads the input for multiple test cases, processes each case using `func_1`, and prints the results.
6. The logic in both functions is consistent with the problem statement and the provided examples.

Given that:
- The transition rules in `func_1` are correctly implemented to account for the connectivity requirements.
- The input handling and output formatting in `func_2` match the problem specification.
- The overall structure and logic of both functions accurately address the problem requirements.

Correctness: **True**