Postcondition: ***`dep` is a list of length `n + 1` where each element except `dep[cur]` is `-1` and `dep[cur]` is `0` or `1`. `cur` is the last element processed, `end` is equal to `cur`. If `dep[to]` is `-1`, then `dep[to]` is set to `1` or `2`, `pred[to]` is equal to `cur`, and `q` is a list with `to` appended to it.***