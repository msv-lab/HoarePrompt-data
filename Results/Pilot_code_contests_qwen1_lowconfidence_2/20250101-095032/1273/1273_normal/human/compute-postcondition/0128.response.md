Postcondition: ***`q` is a deque with at least 2 elements. If `dep[to]` was initially `-1`, then `dep[to]` is now `1` or `2`, `q` contains at least 3 elements (initial 2 elements plus `to`), `end` is True, `e[True]` must have at least one element remaining, and `pred[to]` is True.***