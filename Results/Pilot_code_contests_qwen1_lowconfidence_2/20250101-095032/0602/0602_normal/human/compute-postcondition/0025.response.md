Functionality: **The function `func_3` accepts a tuple `args` containing two integers representing the number of rooms (N) and the number of passages (M), and a dictionary `kwargs` that may contain optional parameters such as `sep` (separator), `file` (output stream), `end` (ending character), and `flush` (flushing the output stream). The function does not return any value. After executing the function, it prints the values of `N` and `M` separated by `sep` (default space) and followed by `end` (default newline), and optionally flushes the output stream if specified.**

**Edge Cases and Missing Functionality:**
- If `kwargs` contains an invalid key, such as `'invalid_key'`, those keys are ignored, and the function continues its execution.
- If `kwargs` does not contain the `sep`, `file`, `end`, or `flush` keys, their default values are used.
- If `args` is empty, the function does nothing.
- If `file` is not a valid stream object, the function raises a `TypeError`.

This summary covers all potential cases based on the provided code and annotations.