### Reasoning:

1. **Problem Understanding**: The problem requires determining the minimum number of elements to remove from a beautiful array to make it non-beautiful. A beautiful array can be modified by replacing an element `a_i` with `a_{i-1}` if `a_{i-1} = a_{i+1}`.

2. **Given Code Analysis**:
   - The code reads the number of test cases and processes each test case individually.
   - For each test case, it reads the size of the array `n` and the array itself.
   - It checks if the array is already uniform (all elements are the same). If yes, it prints `-1` because no removals are needed.
   - Otherwise, it counts the minimum number of elements to remove to break the beauty condition.

3. **Key Logic**:
   - The function `func_1()` checks if the array is uniform using a flag.
   - If the array is uniform, it directly prints `-1`.
   - If the array is not uniform, it iterates through the array to count the minimum number of removals needed.

4. **Edge Cases**:
   - The code handles the uniform array correctly by printing `-1`.
   - The logic to count the minimum removals seems to work by counting consecutive elements that are the same and finding the minimum segment length.

5. **Correctness Verification**:
   - The code correctly identifies uniform arrays and prints `-1`.
   - The logic to find the minimum removals is sound and works as expected for non-uniform arrays.

### Conclusion:
The given program appears to correctly implement the solution for the problem statement. Therefore, the program is correct.

### Final Answer:
Correctness: **True**