Postcondition: `i` is 2 or 3, `arr` is a non-empty list, `max_segment[0]` is updated to the maximum of the original `max_segment[0]` and `max_segment[0] + arr[i]`, and `new_segment` is `[arr[i], i]` if `arr[i]` is non-negative, or `[arr[i]]` if `arr[i]` is negative.