Postcondition: `i` is `next_i`, `ans` is updated to `ans + (m - hmp[next_i])` if `hmp[i]` is less than `m`.