Postcondition: `i` is the next element in `tmp` after `i_end`, `tmp` is a non-empty sorted list, and either `ans` is increased by `i` and `y` is decreased by `i - 1`, or we break out of the most internal loop or if statement.