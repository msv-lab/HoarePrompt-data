Postcondition: `nodes[key]` is a list, and `ends` is a list with an additional element `key`, regardless of the length of `nodes[key]`. If the length of `nodes[key]` is exactly one, `ends` already has the element `key`; otherwise, the condition remains unchanged.