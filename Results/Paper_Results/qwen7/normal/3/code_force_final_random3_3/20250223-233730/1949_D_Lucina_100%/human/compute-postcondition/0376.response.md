Postcondition: `j` is either 2 or 3, `n` is at least 2, and `nx` is a string. If `xx[i][j - 1]` is not '?', then `nx` is increased by `xx[i][j - 1]`. Otherwise, if `i` is in the first `n // 4 - 1` elements of `sb` or `j` is in the first `n // 4 - 1` elements of `sb`, then `nx` ends with 'S'. Otherwise, `nx` contains 'F' appended to its end.