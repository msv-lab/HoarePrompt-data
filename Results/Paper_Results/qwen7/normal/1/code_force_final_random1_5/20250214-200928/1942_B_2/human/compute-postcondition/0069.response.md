Postcondition: `i` is `-len(ar) + 1`, `mex` is updated to `mex - 2*mex + ar[i]`, and `res[i]` is `mex - ar[i]`. If `mex > mex - ar[i]`, then `mex` is updated to `mex - 2*mex + ar[i]`.