Postcondition: `x` is 1, `g` must have at least one entry for `x`, and either the current value of `node` is not equal to `p` and `(node, x)` is appended to `stack`, or there is no action taken since there is no else part.