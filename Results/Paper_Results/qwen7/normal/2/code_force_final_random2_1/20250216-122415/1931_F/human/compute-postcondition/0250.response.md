Postcondition: `i` is `k+3`, `idx1` is either `i` or `k+3`, `idx2` is either `k+3` or `i`, `p1` and `p2` are either 1 or remain the same, and if `i + max(p1, p2) == n - 1` or `idx1 >= 0` and `idx2 >= 0`, we break out of the most internal loop or if statement.