Postcondition: `i` is `k+3`, `idx1` is `k+3`, `idx2` is either `k+3` or remains the same, `p1` and `p2` remain the same, and if `i + max(p1, p2) == n - 1`, we break out of the most internal loop or if statement.