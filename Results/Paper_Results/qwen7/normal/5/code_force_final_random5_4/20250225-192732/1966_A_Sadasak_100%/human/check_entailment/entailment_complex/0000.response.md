### Reasoning:

1. **Problem Understanding**: The problem involves reducing the number of cards in a hand using a specific operation. The goal is to minimize the number of cards remaining after performing the allowed operations.

2. **Given Code Analysis**:
   - The code correctly reads the number of test cases (`t`) and iterates over each test case.
   - For each test case, it reads the number of cards (`n`) and the number of cards to exchange (`k`), and then reads the values on the cards (`nums`).
   - If `k` is greater than `n`, the code directly prints `n` because no operations can be performed.
   - Otherwise, it calls `func_1` to process the card values and determine the minimum number of cards remaining.
   - The function `func_1` creates a frequency table where each unique card value is mapped to its minimum frequency capped at `k`.

3. **Function `func_1` Analysis**:
   - The function correctly processes the list of card values to ensure that each unique value's frequency is capped at `k`.
   - This ensures that if a card value appears more than `k` times, it will only appear `k` times in the resulting frequency table.
   - The function returns this frequency table.

4. **Logic for Minimum Cards Remaining**:
   - If `k` is present in the frequency table values, the code prints `k - 1`.
   - Otherwise, it prints `n`.
   - This logic is correct because if `k` is present in the frequency table, it means we can reduce the number of cards to `k - 1` by exchanging `k` cards at a time. If `k` is not present, no further reduction is possible beyond `n`.

5. **Edge Cases**:
   - The code handles the edge case where `k > n` correctly by printing `n`.
   - The function `func_1` correctly processes the card values and ensures that the frequency is capped at `k`.

### Conclusion:
The given code correctly implements the logic to find the minimum number of cards remaining after performing the allowed operations. Therefore, the code is correct.

### Correctness:
**True**