The function accepts a positive integer `num` and returns a list `p` containing all the prime numbers from 0 to `num`. It initializes three lists to track prime status and prime factors, iterates through numbers up to `num` to update these lists, and finally extracts and returns all prime numbers into the list `p`.