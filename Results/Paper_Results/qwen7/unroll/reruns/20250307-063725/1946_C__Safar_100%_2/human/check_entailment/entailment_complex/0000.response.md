### Reasoning:

1. **Problem Understanding**:
   - The problem requires finding the maximum number \( x \) such that removing exactly \( k \) edges from a tree results in connected components of size at least \( x \).
   - The solution uses a binary search approach to find the maximum \( x \).

2. **Binary Search Function (`func_1`)**:
   - The function `func_1` constructs an adjacency list representation of the tree.
   - It performs a binary search on the possible values of \( x \) to find the largest \( x \) that satisfies the condition.
   - The `check` function is used within the binary search to verify if a given \( x \) is feasible.

3. **Check Function (`check`)**:
   - The `check` function uses a depth-first search (DFS) to explore the tree.
   - It keeps track of the sizes of the connected components formed after removing some edges.
   - It returns `True` if it's possible to form at least \( k + 1 \) components each of size at least \( A \) or if the root component is of size at least \( A \) and exactly \( k \) components are formed.
   - It returns `False` otherwise.

4. **Edge Cases and Constraints**:
   - The constraints are handled correctly, and the binary search ensures that the solution is efficient.
   - The DFS in `check` ensures that all possible ways to form the required components are considered.

5. **Overall Program Flow**:
   - The main loop reads the input and calls `func_1` for each test case.
   - `func_1` correctly initializes the graph and performs the binary search using the `check` function.
   - The final result is printed as expected.

Given the above analysis, the provided code appears to correctly implement the solution to the problem statement.

### Correctness:
**True**