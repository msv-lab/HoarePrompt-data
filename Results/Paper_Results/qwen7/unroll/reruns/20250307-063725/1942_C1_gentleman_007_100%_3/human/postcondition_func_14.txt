The function calculates the factorial of \( n \) and returns the result modulo \( mod \). Given the constraints \( 4 \leq n \leq 10^9 \) and \( 2 \leq x \leq \min(n, 2 \cdot 10^5) \), the function computes \( n! \mod mod \) and ensures the result fits within the specified limits.