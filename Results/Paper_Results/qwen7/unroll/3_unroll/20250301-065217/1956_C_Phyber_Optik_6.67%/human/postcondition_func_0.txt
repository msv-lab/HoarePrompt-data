The function processes multiple test cases, each consisting of an integer `t` (1 ≤ t ≤ 500) and an integer `n` (1 ≤ n ≤ 500), where the sum of `n^2` over all test cases does not exceed 5 × 10^5. For each test case, it calculates a sum based on specific conditions and prints the sum along with a number derived from `n` and `r`. It then prints two blocks of lines: the first block contains `n` lines with the first column as 1 and the second column as numbers from 1 to `n`, and the second block contains `r` lines with the first column as 2 and the second column as numbers from 1 to `n` in a cyclic manner.