Output State: t is a positive integer such that 1 ≤ t ≤ 10^4. For each test case, n is a positive integer such that 1 ≤ n ≤ 2⋅10^5, and the array a is a list of n integers where each integer a_i satisfies 1 ≤ a_i ≤ n. After executing the loop, ans is an integer representing the maximum length of the subarray that can be obtained by removing elements from both ends of a such that the remaining subarray has the same first and last element, or the length of the entire array minus one if no such subarray exists with the same first and last element after removals. The sum of all n across all test cases does not exceed 2⋅10^5.