Output State: t is a positive integer such that 1 ≤ t ≤ 10^4. For each test case, n is a positive integer such that 1 ≤ n ≤ 2⋅10^5, and the array a is a list of n integers where each integer a_i satisfies 1 ≤ a_i ≤ n. After executing the loop, ans is an integer representing the maximum length of the subarray starting from either the first or last element (whichever has more consecutive elements), excluding the first and last elements if they are equal, or the entire array minus one if the first and last elements are different and there are no consecutive duplicates at the start or end. The sum of all n across all test cases does not exceed 2⋅10^5.