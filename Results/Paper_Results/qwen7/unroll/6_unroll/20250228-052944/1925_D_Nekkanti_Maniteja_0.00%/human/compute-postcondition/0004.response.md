Functionality: **The function processes multiple test cases, each containing integers n, m, and k, along with additional integers representing pairs of friends and their associated values. It calculates a sum (s) based on specific formulas involving these inputs and a constant M (10^9 + 7). The final output for each test case is the value of s modulo M.**