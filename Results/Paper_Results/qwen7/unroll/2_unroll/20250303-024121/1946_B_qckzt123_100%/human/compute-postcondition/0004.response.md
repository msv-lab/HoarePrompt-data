Output State: `T` is an integer read from stdin and stripped of whitespace, and 1 ≤ `T` ≤ 10^4; `MOD` is 1000000007; For each input pair `(n, k)` and list `a`, the variable `ans` is calculated based on the given operations and summed up modulo `MOD`; After all iterations, `ans` contains the final result for each input, summed up and taken modulo `MOD`.