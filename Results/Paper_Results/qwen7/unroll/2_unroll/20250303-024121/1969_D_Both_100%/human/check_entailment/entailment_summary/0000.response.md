Reasoning:
1. The problem involves strategic decision-making for both Alice and Bob to maximize or minimize Alice's profit respectively.
2. The provided `func_4` function correctly implements the logic to handle multiple test cases and calculate the optimal profit for Alice.
3. It reads the number of test cases, processes each test case by sorting the items based on Bob's prices, and uses a heap to manage the items efficiently.
4. The function ensures that Bob either takes all items for free if Alice buys fewer than `k` items or takes `k` items for free and buys the rest from Alice.
5. The function iterates through the items, updating the profit based on whether taking an item for free or buying it is more beneficial.
6. The execution summary of `func_4` matches the problem description and the expected behavior.

Given the above points, the function `func_4` correctly implements the logic to solve the problem as described.

Correctness: **True**