Given the problem description and the nature of the task, we need to design test cases that cover both basic and edge scenarios for the interactive problem. Here are the comprehensive test cases:

### Basic Test Cases

#### Test Case 1: Small Permutation
**Objective**: Verify the function works with a small permutation.

**Input**:
```
2
4
```
**Expected Output**:
```
? 0 2 3 1
<
? 1 1 2 3
=
? 1 2 0 3
>
! 3 2
```

#### Test Case 2: Medium Permutation
**Objective**: Verify the function works with a medium-sized permutation.

**Input**:
```
2
8
```
**Expected Output**:
```
? 0 2 3 1
<
? 1 1 2 3
=
? 1 2 0 3
>
! 7 6
```

#### Test Case 3: Large Permutation
**Objective**: Verify the function works with a large permutation.

**Input**:
```
2
10
```
**Expected Output**:
```
? 0 2 3 1
<
? 1 1 2 3
=
? 1 2 0 3
>
! 9 8
```

### Edge Test Cases

#### Test Case 4: All Elements are the Same
**Objective**: Verify the function handles a permutation where all elements are the same.

**Input**:
```
2
2
0 0
```
**Expected Output**:
```
? 0 1 0 1
=
! 0 1
```

#### Test Case 5: Permutation with Maximum XOR
**Objective**: Verify the function handles a permutation where the maximum XOR is achieved by consecutive elements.

**Input**:
```
2
4
0 1 2 3
```
**Expected Output**:
```
? 0 1 2 3
>
! 3 2
```

#### Test Case 6: Permutation with Maximum XOR at Ends
**Objective**: Verify the function handles a permutation where the maximum XOR is achieved by the first and last elements.

**Input**:
```
2
4
3 2 1 0
```
**Expected Output**:
```
? 0 1 2 3
>
! 0 3
```

#### Test Case 7: Permutation with Maximum XOR in Middle
**Objective**: Verify the function handles a permutation where the maximum XOR is achieved by elements in the middle.

**Input**:
```
2
8
0 1 2 3 4 5 6 7
```
**Expected Output**:
```
? 0 1 2 3
=
? 1 2 3 4
=
? 2 3 4 5
=
? 3 4 5 6
=
? 4 5 6 7
>
! 4 7
```

#### Test Case 8: Permutation with Maximum XOR at Ends and Middle
**Objective**: Verify the function handles a permutation where the maximum XOR is achieved by elements at the ends and in the middle.

**Input**:
```
2
8
3 2 1 0 7 6 5 4
```
**Expected Output**:
```
? 0 1 2 3
=
? 1 2 3 4
=
? 2 3 4 5
=
? 3 4 5 6
=
? 4 5 6 7
>
! 3 7
```

#### Test Case 9: Permutation with Maximum XOR at Ends and Middle (Different Order)
**Objective**: Verify the function handles a permutation where the maximum XOR is achieved by elements at the ends and in the middle but in a different order.

**Input**:
```
2
8
7 6 5 4 3 2 1 0
```
**Expected Output**:
```
? 0 1 2 3
=
? 1 2 3 4
=
? 2 3 4 5
=
? 3 4 5 6
=
? 4 5 6 7
>
! 0 7
```

These test cases cover a range of scenarios, including basic and edge cases, ensuring the solution is robust and reliable.