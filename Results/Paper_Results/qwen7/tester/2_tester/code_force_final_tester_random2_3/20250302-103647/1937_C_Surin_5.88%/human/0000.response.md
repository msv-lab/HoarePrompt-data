Given the problem description and the nature of the task, we need to create test cases that cover both basic and edge scenarios for the interactive problem. Here are the test cases:

### Test 1: Basic Case with Small Permutation
**Objective**: Verify the function works correctly with a small permutation.

**Input**:
```
2
4
```
**Output**:
```
? 0 2 3 1
<

? 1 1 2 3
=

? 1 2 0 3
>
! 3 2
! 0 1
```
**Explanation**: This test case checks the basic functionality with a small permutation `[0, 3, 1, 2]`.

### Test 2: Basic Case with Medium Permutation
**Objective**: Verify the function works correctly with a medium-sized permutation.

**Input**:
```
2
8
```
**Output**:
```
? 0 2 3 1
<

? 1 1 2 3
=

? 1 2 0 3
>
? 4 5 6 7
=
? 4 6 5 7
>
! 7 6
! 0 1
```
**Explanation**: This test case checks the basic functionality with a medium-sized permutation `[0, 3, 1, 2, 4, 7, 5, 6]`.

### Test 3: Basic Case with Large Permutation
**Objective**: Verify the function works correctly with a large permutation.

**Input**:
```
2
10
```
**Output**:
```
? 0 2 3 1
<

? 1 1 2 3
=

? 1 2 0 3
>
? 4 5 6 7
=
? 4 6 5 7
>
? 8 9 0 1
>
! 9 8
! 0 1
```
**Explanation**: This test case checks the basic functionality with a large permutation `[0, 3, 1, 2, 4, 7, 5, 6, 8, 9]`.

### Test 4: Edge Case with All Zeros
**Objective**: Verify the function handles a permutation where all elements are zero.

**Input**:
```
2
4
```
**Output**:
```
? 0 1 2 3
=
? 0 2 1 3
=
? 0 3 1 2
=
! 0 3
! 0 3
```
**Explanation**: This test case checks the function with a permutation `[0, 0, 0, 0]`.

### Test 5: Edge Case with All Ones
**Objective**: Verify the function handles a permutation where all elements are one.

**Input**:
```
2
4
```
**Output**:
```
? 0 1 2 3
=
? 0 2 1 3
=
? 0 3 1 2
=
! 0 3
! 0 3
```
**Explanation**: This test case checks the function with a permutation `[1, 1, 1, 1]`.

### Test 6: Edge Case with Single Element
**Objective**: Verify the function handles a permutation with only one element.

**Input**:
```
2
1
```
**Output**:
```
! 0 0
```
**Explanation**: This test case checks the function with a permutation `[0]`.

### Test 7: Edge Case with Two Elements
**Objective**: Verify the function handles a permutation with only two elements.

**Input**:
```
2
2
```
**Output**:
```
? 0 1 0 1
=
! 0 1
```
**Explanation**: This test case checks the function with a permutation `[0, 1]`.

### Test 8: Edge Case with Maximum XOR
**Objective**: Verify the function handles a permutation where the maximum XOR is achieved.

**Input**:
```
2
4
```
**Output**:
```
? 0 1 2 3
>
? 0 2 1 3
>
? 0 3 1 2
>
! 3 0
! 3 0
```
**Explanation**: This test case checks the function with a permutation `[0, 1, 2, 3]`, where the maximum XOR is `3`.

### Test 9: Edge Case with Random Permutation
**Objective**: Verify the function handles a random permutation.

**Input**:
```
2
8
```
**Output**:
```
? 0 2 3 1
<

? 1 1 2 3
=

? 1 2 0 3
>
? 4 5 6 7
=
? 4 6 5 7
>
! 7 6
! 0 1
```
**Explanation**: This test case checks the function with a random permutation `[0, 3, 1, 2, 4, 7, 5, 6]`.

These test cases cover a range of scenarios from basic to edge cases, ensuring the solution is robust and reliable.