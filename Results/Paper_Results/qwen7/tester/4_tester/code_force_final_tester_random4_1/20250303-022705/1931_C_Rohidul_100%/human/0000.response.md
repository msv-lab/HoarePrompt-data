To create comprehensive test cases for the given problem, we need to consider both basic and edge scenarios. Here are the detailed test cases:

### 1. Basic Test Cases

#### Test 1
**Objective**: Verify the function works correctly when the array has distinct elements and requires multiple operations to make all elements equal.

**Input**:
```
6
1 2 3 4 5 1
```
**Output**:
```
4
```
**Explanation**: We can change the subarray [2, 4] to 8, then the subarray [5, 5] to 8, resulting in the array [1, 8, 8, 8, 8, 1]. The cost is (4 - 2 + 1) + (5 - 5 + 1) = 4.

#### Test 2
**Objective**: Verify the function works correctly when the array already has all elements equal.

**Input**:
```
7
1 1 1 1 1 1 1
```
**Output**:
```
0
```
**Explanation**: All elements are already equal, so no operations are needed.

#### Test 3
**Objective**: Verify the function works correctly when the array has a segment of identical elements.

**Input**:
```
8
8 8 8 1 2 8 8 8
```
**Output**:
```
2
```
**Explanation**: Change the subarray [3, 3] to 8 and the subarray [5, 5] to 8, resulting in the array [8, 8, 8, 8, 8, 8, 8, 8]. The cost is (3 - 3 + 1) + (5 - 5 + 1) = 2.

#### Test 4
**Objective**: Verify the function works correctly when the array has only one element.

**Input**:
```
1
1
```
**Output**:
```
0
```
**Explanation**: The array already has one element, so no operations are needed.

#### Test 5
**Objective**: Verify the function works correctly when the array has two elements.

**Input**:
```
2
1 2
```
**Output**:
```
0
```
**Explanation**: The array already has two different elements, so no operations are needed.

#### Test 6
**Objective**: Verify the function works correctly when the array has three elements.

**Input**:
```
3
1 2 3
```
**Output**:
```
1
```
**Explanation**: Change the subarray [1, 1] to 2, resulting in the array [2, 2, 2]. The cost is (1 - 1 + 1) = 1.

### 2. Edge Test Cases

#### Test 7
**Objective**: Verify the function works correctly when the array has a large number of elements but only one unique element.

**Input**:
```
8
1 1 1 1 1 1 1 1
```
**Output**:
```
0
```
**Explanation**: All elements are already equal, so no operations are needed.

#### Test 8
**Objective**: Verify the function works correctly when the array has a large number of elements and only two unique elements.

**Input**:
```
8
1 2 1 2 1 2 1 2
```
**Output**:
```
4
```
**Explanation**: Change the subarray [1, 1] to 2, the subarray [3, 3] to 2, the subarray [5, 5] to 2, and the subarray [7, 7] to 2, resulting in the array [2, 2, 2, 2, 2, 2, 2, 2]. The cost is (1 - 1 + 1) + (3 - 3 + 1) + (5 - 5 + 1) + (7 - 7 + 1) = 4.

#### Test 9
**Objective**: Verify the function works correctly when the array has a large number of elements and only three unique elements.

**Input**:
```
8
1 2 3 1 2 3 1 2
```
**Output**:
```
4
```
**Explanation**: Change the subarray [1, 1] to 2, the subarray [3, 3] to 2, the subarray [5, 5] to 2, and the subarray [7, 7] to 2, resulting in the array [2, 2, 2, 2, 2, 2, 2, 2]. The cost is (1 - 1 + 1) + (3 - 3 + 1) + (5 - 5 + 1) + (7 - 7 + 1) = 4.

#### Test 10
**Objective**: Verify the function works correctly when the array has a large number of elements and the unique elements are spread out.

**Input**:
```
9
9 9 2 9 2 5 5 5 3
```
**Output**:
```
7
```
**Explanation**: Change the subarray [3, 3] to 9, the subarray [5, 5] to 9, the subarray [8, 8] to 5, and the subarray [9, 9] to 5, resulting in the array [9, 9, 9, 9, 9, 5, 5, 5, 5]. The cost is (3 - 3 + 1) + (5 - 5 + 1) + (8 - 8 + 1) + (9 - 9 + 1) = 7.

These test cases cover a wide range of scenarios, ensuring the solution is robust and reliable.