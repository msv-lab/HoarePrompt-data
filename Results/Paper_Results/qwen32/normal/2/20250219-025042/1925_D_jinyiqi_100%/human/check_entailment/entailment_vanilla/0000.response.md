Let's analyze the given program step-by-step to determine its correctness based on the problem description.

### Problem Breakdown

1. **Inputs:**
   - `t`: Number of test cases.
   - For each test case:
     - `n`: Number of children.
     - `m`: Number of pairs of friends.
     - `k`: Number of excursions.
     - `m` lines follow, each containing three integers `a`, `b`, and `f` representing a pair of friends and their initial friendship value.

2. **Objective:**
   - Compute the expected value of the sum of friendship values of all `k` pairs chosen for the excursions.
   - Express the result as a fraction `p/q` where `p` and `q` are coprime.
   - Output `p * q^-1 mod (10^9 + 7)`.

### Analysis of the Provided Program

The program follows these steps:

1. **Reading Input:**
   - Reads the number of test cases `t`.
   - For each test case, reads `n`, `m`, and `k`.
   - Reads the `m` pairs of friends along with their initial friendship values and sums up these friendship values into `sum_f`.

2. **Computation:**
   - Computes `cn2` which is the number of ways to choose 2 children out of `n`, i.e., `n * (n - 1) / 2`.
   - Computes `p` and `q` as follows:
     - `p = 2 * k * cn2 * sum_f + m * k * (k - 1)`
     - `q = 2 * cn2 ** 2`
   - Simplifies the fraction `p/q` by dividing both `p` and `q` by their greatest common divisor (`gcd`).
   - Computes `p * q^-1 mod (10^9 + 7)` using modular exponentiation and prints the result.

### Issues in the Program

Upon careful examination, the formula used to compute `p` and `q` seems incorrect. Let's derive the correct formula.

#### Deriving the Correct Formula

1. **Probability of Choosing a Friend Pair:**
   - Probability of choosing any specific pair of children (friend or not) is `1/cn2`.
   - Probability of choosing a friend pair is `m/cn2`.

2. **Expected Value Calculation:**
   - Let `X_i` be the random variable representing the friendship value of the `i-th` excursion.
   - The expected value of `X_i` is the sum of the probabilities of choosing each friend pair multiplied by their respective friendship values plus the probability of choosing a non-friend pair multiplied by 0.
   - Expected value of `X_i` = `(sum_f / cn2) + (m * (k - 1) / cn2)`.
   - Since there are `k` excursions, the expected sum of friendship values is `k * (sum_f / cn2) + (m * (k - 1) / cn2)`.

3. **Simplifying the Expected Sum:**
   - Expected sum = `k * sum_f / cn2 + m * (k - 1) / cn2`.
   - This can be written as `(k * sum_f + m * (k - 1)) / cn2`.

4. **Final Fraction:**
   - `p = k * sum_f + m * (k - 1)`
   - `q = cn2`

5. **Modular Inverse:**
   - Compute `p * q^-1 mod (10^9 + 7)`.

### Conclusion

The provided program uses an incorrect formula for `p` and `q`. The correct formula should be `p = k * sum_f + m * (k - 1)` and `q = cn2`.

Therefore, the correctness of the program is **False**.

**Correctness: False**