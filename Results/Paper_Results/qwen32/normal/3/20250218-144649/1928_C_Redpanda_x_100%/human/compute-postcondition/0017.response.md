The only object in the loop head is the variable `factor`, so we can only adjust that one. According to the code, whether the loop can execute depends on the `rest` collection. If `rest` has more elements, the loop will execute again for the next element in `rest`.

At the end of the last iteration, `factor` was the last element of `rest`. For the loop to execute one more time, `rest` must have at least one more element, and `factor` should be the next element in `rest`.

State: **`k` is a non-negative integer, `prime` is `primes[k]`, `primes` is a list of primes, `k` is not equal to the length of the primes list, `factors` is a dictionary with `prime` as a key and `factors[prime]` is a non-negative integer, `rest` is a non-empty collection returned by `generate(k + 1)` with at least one more element, `prime_to_i` is `prime`**