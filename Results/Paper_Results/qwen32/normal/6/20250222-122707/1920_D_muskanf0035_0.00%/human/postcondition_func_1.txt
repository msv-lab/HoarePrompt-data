The function reads multiple test cases, each consisting of a number of operations and queries. For each test case, it processes a series of operations and then answers a series of queries, outputting the results for each query.