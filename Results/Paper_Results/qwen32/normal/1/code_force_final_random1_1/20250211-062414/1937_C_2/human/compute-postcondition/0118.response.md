Functionality: **The function accepts two parameters: `t` which is the number of test cases (an integer such that 1 ≤ t ≤ 10³), and for each test case, it accepts `n` (an integer such that 2 ≤ n ≤ 10⁴) and `p` (a permutation of the set {0, 1, ..., n-1}). The sum of `n` over all test cases does not exceed 10⁴. For each test case, the function returns a value based on the properties of the permutation `p`.**