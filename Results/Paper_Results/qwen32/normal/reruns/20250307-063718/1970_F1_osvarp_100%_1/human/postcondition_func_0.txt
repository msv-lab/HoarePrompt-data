The function reads the dimensions and initial state of a Quidditch game grid, processes a series of game commands, and updates the positions of players and the Quaffle, as well as the scores of the blue and red teams based on the game's rules. It outputs the final scores of the game.