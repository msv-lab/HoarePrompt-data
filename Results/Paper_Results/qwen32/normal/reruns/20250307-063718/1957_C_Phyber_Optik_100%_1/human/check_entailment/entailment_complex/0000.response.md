### Reasoning:

The provided program appears to be solving a problem related to counting the number of possible final configurations of a chessboard after a certain number of moves, given the constraints of the game described.

#### Key Points:
1. **Dynamic Programming Array (`dp`)**: The program uses a dynamic programming (DP) array `dp` to store precomputed values for the number of configurations possible for a given board size.
2. **Recurrence Relation**: The recurrence relation `dp[i] = (dp[i - 1] + 2 * (i - 1) * dp[i - 2]) % 1000000007` is used to fill this array. This relation seems to correctly model the problem of placing rooks on the board without them attacking each other.
3. **Precomputation**: The `func_1` function precomputes the values of `dp` up to a certain index (300000 in this case), which is sufficient given the constraints (maximum `n` is 300000).
4. **Handling Invalid Positions**: The program uses a set `invalid` to keep track of rows and columns that are already occupied by rooks after the first `k` moves and their mirrored counterparts.
5. **Final Calculation**: For each test case, the program calculates the number of possible final configurations by using the precomputed `dp` values based on the remaining available positions on the board (`dp[n - len(invalid)]`).

#### Analysis:
- The recurrence relation is designed to correctly count the number of valid configurations for a board of size `i` based on the configurations for smaller boards.
- The program efficiently handles the input constraints and uses precomputation to avoid redundant calculations.
- The modulo operation ensures that the result remains within the required range.

#### Verification:
- The example provided in the problem statement is correctly handled by the program. For the first test case, with `n=4` and `k=1`, the program correctly outputs `3`, which matches the expected result based on the problem description.

### Conclusion:
Based on the analysis, the program seems to be correctly implementing the solution to the problem, handling the constraints efficiently, and producing the correct output for the provided example.

### Correctness:
Correctness: **True**