Functionality: **The function accepts multiple test cases. Each test case consists of an integer `n` (2 ≤ n ≤ 10^5) representing the length of the array, and a list of `n` integers `a_1, a_2, ..., a_n` (1 ≤ a_i ≤ 10^9) representing the elements of the array. The function processes these test cases and returns the result for each case. The total number of test cases `t` satisfies 1 ≤ t ≤ 500, and the sum of `n` over all test cases does not exceed 10^5.**