The function `func()` does not take any input parameters. The interaction with the system is handled through standard input and output as described in the problem statement. Specifically, the function will receive multiple test cases, each starting with an integer `n` (2 ≤ n ≤ 10^5) representing the number of vertices in the graph. The function can then make up to `n` queries of the form "? d" (0 ≤ d ≤ n - 1) to gather information about the graph, and finally output a Hamiltonian path for each test case in the format "! v_1 v_2 ... v_n". The sum of `n` over all test cases does not exceed 10^5.