The function `bfs` calculates the shortest distance from a starting node to a target node in a tree represented by an adjacency list. If there is no path from the start node to the target node, it returns -1.