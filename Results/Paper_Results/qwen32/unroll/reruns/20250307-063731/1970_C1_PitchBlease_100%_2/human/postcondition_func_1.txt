The function `bfs` calculates the shortest distance from a starting node to a target node in a tree represented by an adjacency list. If the target node is reachable from the starting node, it returns the shortest distance; otherwise, it returns -1.