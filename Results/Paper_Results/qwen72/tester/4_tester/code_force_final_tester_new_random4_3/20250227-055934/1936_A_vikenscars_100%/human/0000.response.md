Certainly! Below are the comprehensive test cases for the given interactive problem. These test cases are designed to cover both basic and edge scenarios to ensure the code's robustness, reliability, and scalability.

### Basic Test Cases

#### Test 1: Small Permutation with Distinct XOR Values
**Input**:
```
1
4
```
**Output**:
```
? 0 1 2 3
< 
? 0 2 1 3
< 
? 0 3 1 2
> 
? 1 2 0 3
> 
? 1 3 0 2
> 
! 3 2
```

#### Test 2: Medium Permutation with Distinct XOR Values
**Input**:
```
1
6
```
**Output**:
```
? 0 1 2 3
< 
? 0 2 1 3
< 
? 0 3 1 2
> 
? 1 2 0 3
> 
? 1 3 0 2
> 
? 0 4 1 5
< 
? 0 5 1 4
> 
? 1 4 0 5
> 
! 5 4
```

#### Test 3: Large Permutation with Distinct XOR Values
**Input**:
```
1
10
```
**Output**:
```
? 0 1 2 3
< 
? 0 2 1 3
< 
? 0 3 1 2
> 
? 1 2 0 3
> 
? 1 3 0 2
> 
? 0 4 1 5
< 
? 0 5 1 4
> 
? 1 4 0 5
> 
? 0 6 1 7
< 
? 0 7 1 6
> 
? 1 6 0 7
> 
? 0 8 1 9
< 
? 0 9 1 8
> 
? 1 8 0 9
> 
! 9 8
```

### Edge Test Cases

#### Test 4: Minimum Permutation Size
**Input**:
```
1
2
```
**Output**:
```
? 0 0 1 1
= 
! 0 1
```

#### Test 5: Maximum Permutation Size
**Input**:
```
1
10000
```
**Output**:
```
? 0 1 2 3
< 
? 0 2 1 3
< 
? 0 3 1 2
> 
? 1 2 0 3
> 
? 1 3 0 2
> 
? 0 4 1 5
< 
? 0 5 1 4
> 
? 1 4 0 5
> 
... (queries continue up to 3n = 30000)
! 9999 9998
```

#### Test 6: Permutation with All Elements Equal (Not Possible, but for completeness)
**Input**:
```
1
4
```
**Output**:
```
? 0 0 1 1
= 
? 0 1 2 2
= 
? 0 2 3 3
= 
? 1 2 3 3
= 
! 0 1
```

#### Test 7: Permutation with One Element Repeated (Not Possible, but for completeness)
**Input**:
```
1
4
```
**Output**:
```
? 0 0 1 1
= 
? 0 1 2 2
= 
? 0 2 3 3
= 
? 1 2 3 3
= 
! 0 1
```

#### Test 8: Permutation with Maximum XOR Value at the Beginning
**Input**:
```
1
4
```
**Output**:
```
? 0 1 2 3
> 
? 0 2 1 3
> 
? 0 3 1 2
> 
! 0 1
```

#### Test 9: Permutation with Maximum XOR Value at the End
**Input**:
```
1
4
```
**Output**:
```
? 0 1 2 3
< 
? 0 2 1 3
< 
? 0 3 1 2
< 
? 1 2 0 3
< 
? 1 3 0 2
< 
! 3 2
```

#### Test 10: Permutation with Maximum XOR Value in the Middle
**Input**:
```
1
4
```
**Output**:
```
? 0 1 2 3
< 
? 0 2 1 3
< 
? 0 3 1 2
> 
? 1 2 0 3
> 
? 1 3 0 2
> 
! 1 2
```

#### Test 11: Permutation with All Elements in Ascending Order
**Input**:
```
1
4
```
**Output**:
```
? 0 1 2 3
< 
? 0 2 1 3
< 
? 0 3 1 2
> 
? 1 2 0 3
> 
? 1 3 0 2
> 
! 3 2
```

#### Test 12: Permutation with All Elements in Descending Order
**Input**:
```
1
4
```
**Output**:
```
? 0 1 2 3
> 
? 0 2 1 3
> 
? 0 3 1 2
> 
? 1 2 0 3
> 
? 1 3 0 2
> 
! 0 1
```

#### Test 13: Permutation with Random Distribution
**Input**:
```
1
4
```
**Output**:
```
? 0 1 2 3
< 
? 0 2 1 3
< 
? 0 3 1 2
> 
? 1 2 0 3
> 
? 1 3 0 2
> 
! 3 2
```

#### Test 14: Permutation with Maximum XOR Value at Multiple Positions
**Input**:
```
1
4
```
**Output**:
```
? 0 1 2 3
< 
? 0 2 1 3
< 
? 0 3 1 2
> 
? 1 2 0 3
> 
? 1 3 0 2
> 
! 3 2
```

#### Test 15: Permutation with Equal XOR Values for Multiple Pairs
**Input**:
```
1
4
```
**Output**:
```
? 0 1 2 3
< 
? 0 2 1 3
< 
? 0 3 1 2
> 
? 1 2 0 3
> 
? 1 3 0 2
> 
! 3 2
```

#### Test 16: Multiple Test Cases with Different Permutations
**Input**:
```
2
4
2
```
**Output**:
```
? 0 1 2 3
< 
? 0 2 1 3
< 
? 0 3 1 2
> 
? 1 2 0 3
> 
? 1 3 0 2
> 
! 3 2
? 0 0 1 1
= 
! 0 1
```

#### Test 17: Permutation with Maximum XOR Value at the Corners
**Input**:
```
1
4
```
**Output**:
```
? 0 1 2 3
< 
? 0 2 1 3
< 
? 0 3 1 2
> 
? 1 2 0 3
> 
? 1 3 0 2
> 
! 3 0
```

#### Test 18: Permutation with Maximum XOR Value at the Center
**Input**:
```
1
4
```
**Output**:
```
? 0 1 2 3
< 
? 0 2 1 3
< 
? 0 3 1 2
> 
? 1 2 0 3
> 
? 1 3 0 2
> 
! 1 2
```

#### Test 19: Permutation with Maximum XOR Value at the Edges and Center
**Input**:
```
1
4
```
**Output**:
```
? 0 1 2 3
<