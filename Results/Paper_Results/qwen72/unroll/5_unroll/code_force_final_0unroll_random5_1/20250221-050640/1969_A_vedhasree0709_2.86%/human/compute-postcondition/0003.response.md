Functionality: ** The function `func` processes multiple test cases. For each test case, it reads an integer `n` and a list of integers `p` of length `n`. It checks if there is a pair of friends (i, i+1) such that the best friend of the i-th friend is (i+1) and the best friend of the (i+1)-th friend is (i). If such a pair is found, it prints 2. If no such pair is found, it prints 3. After processing all test cases, the function concludes. **