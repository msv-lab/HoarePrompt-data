Reasoning:

1. **Understanding the Problem**:
   - We need to reconstruct a permutation `p` from an array `a` where `a[i] = MEX(p[1], p[2], ..., p[i]) - p[i]`.
   - The MEX of a sequence is the smallest non-negative integer that is not present in the sequence.
   - The input is guaranteed to have at least one valid permutation `p`.

2. **Algorithm Analysis**:
   - The program initializes `mex` to `n`, which is the maximum possible value for MEX in the permutation.
   - It iterates over the array `ar` in reverse order, from the last element to the first.
   - For each element `ar[i]`, it calculates `res[i]` as `mex - ar[i]`.
   - It then updates `mex` to `mex - ar[i]` if the new value is smaller.

3. **Key Points**:
   - The program correctly reconstructs the permutation by working backwards.
   - The MEX value is updated correctly because it starts from the largest possible value and decreases as needed.
   - The condition `if mex > mex - ar[i]` ensures that `mex` is updated only when the new value is smaller, which is consistent with the MEX definition.
   - The program prints the result as a space-separated string, which matches the required output format.

4. **Edge Cases**:
   - The program handles multiple test cases correctly by using a loop.
   - It processes the input and output in the expected format.
   - The constraints are respected, and the program should work efficiently within the given limits.

5. **Verification**:
   - The example provided in the problem description is correctly handled by the program.
   - The output for the example matches the expected result, which confirms that the logic is sound.

Based on the above reasoning, the program appears to correctly solve the problem as described.

Correctness: **True**