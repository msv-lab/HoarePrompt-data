Precondition: **The function `func` is not properly defined to solve the given problem. It should accept parameters for the number of test cases, the number of children, the number of friend pairs, the number of excursions, and the list of friend pairs with their initial friendship values. The correct function definition should be:**

```
def func(t, test_cases):
```

**Where `t` is an integer representing the number of test cases, and `test_cases` is a list of tuples, each containing `n`, `m`, `k`, and a list of friend pairs with their initial friendship values. Each friend pair is represented as a tuple `(a_i, b_i, f_i)`. The constraints are: 1 ≤ t ≤ 5 · 10^4, 2 ≤ n ≤ 10^5, 0 ≤ m ≤ min(10^5, n(n-1)/2), 1 ≤ k ≤ 2 · 10^5, 1 ≤ a_i, b_i ≤ n, a_i ≠ b_i, and 1 ≤ f_i ≤ 10^9. The sum of n and m over all test cases does not exceed 10^5, and the sum of k over all test cases does not exceed 2 · 10^5.**