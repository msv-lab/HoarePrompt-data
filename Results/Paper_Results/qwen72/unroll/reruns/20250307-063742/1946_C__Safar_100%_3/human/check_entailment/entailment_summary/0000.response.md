### Reasoning:

1. **Input Handling and Structure Construction:**
   - The program reads multiple test cases, each with the number of vertices `n` and the number of edges to remove `k`.
   - It then reads `n-1` edges and constructs an adjacency list `g` to represent the tree.

2. **Binary Search for Maximum Component Size:**
   - The function `func_1` performs a binary search to find the maximum value `x` such that removing exactly `k` edges results in all remaining connected components having at least `x` vertices.
   - The binary search range is from 1 to `n // k`, which is a reasonable upper bound because if `x` is greater than `n // k`, it would be impossible to have `k` components each with at least `x` vertices.

3. **Check Function:**
   - The `check` function is used to determine if a given `A` (the size of the component) is feasible.
   - It uses a depth-first search (DFS) approach to traverse the tree and count the number of vertices in each subtree.
   - The function maintains a stack to simulate the DFS, a set `visited` to keep track of visited nodes, a dictionary `d` to store the size of each subtree, and a variable `r` to count the number of subtrees that meet the condition.
   - If the root node (1) has at least `A` vertices in its subtree and the number of such subtrees is exactly `k`, or if the number of such subtrees is greater than `k`, the function returns `True`.
   - Otherwise, it returns `False`.

4. **Binary Search Logic:**
   - The binary search in `func_1` adjusts the search range based on the result of the `check` function.
   - If `check(mid)` returns `True`, it means that `mid` is a feasible value, so the search range is adjusted to look for a larger value.
   - If `check(mid)` returns `False`, the search range is adjusted to look for a smaller value.
   - The final value of `r` is printed, which is the maximum feasible value of `x`.

5. **Edge Removal and Component Size:**
   - The `check` function effectively simulates the removal of edges by counting the number of subtrees that meet the size condition.
   - The logic ensures that the number of such subtrees is either exactly `k` or more than `k`, which aligns with the problem's requirement of removing exactly `k` edges.

6. **Correctness of the Algorithm:**
   - The binary search and the `check` function together ensure that the program finds the maximum `x` such that removing `k` edges results in all remaining components having at least `x` vertices.
   - The `check` function correctly counts the number of subtrees that meet the size condition, and the binary search correctly identifies the maximum feasible value.

### Conclusion:
Given the problem description and the provided functions, the program appears to correctly implement the logic to find the maximum number `x` such that removing exactly `k` edges results in all remaining connected components having at least `x` vertices.

Correctness: **True**