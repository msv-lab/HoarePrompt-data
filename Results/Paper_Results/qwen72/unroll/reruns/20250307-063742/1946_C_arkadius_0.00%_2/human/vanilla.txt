- The program follows the correct approach to solve the problem.
   - The binary search ensures that the maximum `x` is found efficiently.
   - The tree traversal and component calculation are implemented correctly.
   - The input and output handling are appropriate for the problem's constraints.

### Conclusion:
The given program is correct based on the problem description and the provided input and output examples.

Correctness: