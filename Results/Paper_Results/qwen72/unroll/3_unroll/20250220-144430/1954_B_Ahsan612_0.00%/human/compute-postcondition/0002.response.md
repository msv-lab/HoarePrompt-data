Functionality: **The function `func` is designed to handle multiple test cases. It accepts an integer `t` representing the number of test cases, where 1 ≤ t ≤ 10^4. For each test case, it accepts an integer `n` and a list `a` of `n` integers, where 1 ≤ n ≤ 3 · 10^5 and 1 ≤ a_i ≤ n. The function returns the result for each test case, ensuring that the sum of `n` over all test cases does not exceed 3 · 10^5.**