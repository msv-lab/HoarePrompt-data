The function `func` processes multiple test cases, each containing an integer `n` (representing the number of houses) and a string `a` (indicating the preferred side of the street for each resident). For each test case, the function determines the optimal position `i` to lay a road such that at least half of the residents on each side of the street are satisfied with their side, and the road is as close to the middle of the village as possible. The function prints the optimal position `i` for each test case. If no such position exists, it prints either 0 or `n` depending on the majority preference of the residents.