The function `func` is designed to handle multiple test cases, each involving a grid of characters 'W' and 'B' representing white and black squares, respectively. The grid is defined by its dimensions `n` and `m`, where `1 ≤ n, m ≤ 500`. The total number of test cases, `t`, is such that `1 ≤ t ≤ 10^4`, and the sum of `n * m` over all test cases does not exceed `3 * 10^5`.

Functionality: **The function accepts multiple test cases, each containing a grid of characters 'W' and 'B' with dimensions `n` and `m` (1 ≤ n, m ≤ 500). It processes each test case and returns the result for each grid. The total number of test cases `t` is between 1 and 10^4, and the sum of `n * m` over all test cases does not exceed 3 * 10^5.**