The function `solve` is intended to handle multiple test cases. Each test case includes an integer n (2 ≤ n ≤ 50) representing the number of friends, and a list of integers p of length n (1 ≤ p_i ≤ n, p_i ≠ i, all p_i are distinct) representing the best friends of each friend. The function should be called in a loop where the number of iterations is determined by an integer t (1 ≤ t ≤ 5000) representing the number of test cases.