Output State: **The function should be called within a loop that processes multiple test cases, where each test case consists of an integer n (2 ≤ n ≤ 50) representing the number of friends, and a list of integers p of length n (1 ≤ p_i ≤ n, p_i ≠ i, all p_i are distinct) representing the best friends of each friend. `n` is an input integer between 2 and 50.**