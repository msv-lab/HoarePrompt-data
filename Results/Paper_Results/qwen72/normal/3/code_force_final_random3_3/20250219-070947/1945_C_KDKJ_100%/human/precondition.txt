The function `solve` is part of a program that processes multiple test cases. Each test case includes a single integer `n` (3 ≤ n ≤ 3·10^5) representing the number of houses, and a string `a` of length `n` consisting only of '0' and '1', where '0' indicates a resident's preference to live on the left side and '1' indicates a preference to live on the right side. The function should ensure that at least half of the residents on each side of the road are satisfied with the choice, and the road should be as close to the middle of the village as possible. The sum of `n` over all test cases does not exceed 3·10^5.