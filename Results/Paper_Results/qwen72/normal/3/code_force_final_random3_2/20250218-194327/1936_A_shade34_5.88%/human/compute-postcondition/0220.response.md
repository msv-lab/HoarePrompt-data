The function `func` does not explicitly list its parameters in the provided function signature. However, based on the parameter constraints and relationships given, it can be inferred that the function accepts two parameters: `t` and `n`, where `t` is an integer such that 1 ≤ t ≤ 10^3, and `n` is an integer such that 2 ≤ n ≤ 10^4 for each test case. Additionally, the sum of `n` over all test cases does not exceed 10^4. The function also likely accepts a sequence `p` which is a permutation of integers from 0 to n-1.

Given these constraints, the function is expected to return a value based on the input parameters, but the specific output is not provided in the problem statement. Therefore, the functionality of the function `func` can be described as follows:

Functionality: **The function accepts two parameters `t` and `n`, where `t` is an integer between 1 and 10^3, and `n` is an integer between 2 and 10^4 for each test case. It also accepts a sequence `p` which is a permutation of integers from 0 to n-1. The function returns a value based on these inputs, but the specific output is not detailed.**