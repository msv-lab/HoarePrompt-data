Reasoning:

The program aims to solve the problem of calculating the expected value of the sum of friendship values of all pairs chosen for excursions, and it does so by following these steps:

1. **Input Reading**: The program reads the number of test cases `t` and processes each test case individually.
2. **Initialization**: For each test case, it initializes `n`, `m`, and `k` from the input.
3. **Sum of Friendship Values**: It calculates the sum of initial friendship values `sum_f` for all pairs of friends.
4. **Combinations Calculation**: It calculates the number of ways to choose 2 children out of `n` using the combination formula `cn2 = n * (n - 1) // 2`.
5. **Expected Value Calculation**: It computes the numerator `p` and the denominator `q` for the expected value formula. The formula used is derived from the problem's requirements and the properties of expected values.
6. **GCD and Simplification**: It simplifies the fraction `p/q` by dividing both `p` and `q` by their greatest common divisor (GCD).
7. **Modular Inverse and Result**: It calculates the modular inverse of `q` under modulo \(10^9 + 7\) and multiplies it by `p` to get the final result, which is printed.

Let's break down the correctness of each step:

- **Input Reading**: The input reading is correct and follows the problem's constraints.
- **Sum of Friendship Values**: The sum of friendship values is correctly calculated by iterating over the input pairs.
- **Combinations Calculation**: The combination formula `cn2 = n * (n - 1) // 2` is correct.
- **Expected Value Calculation**: The formula for `p` and `q` is derived from the problem's requirements and is mathematically sound.
- **GCD and Simplification**: The GCD calculation and simplification are correct.
- **Modular Inverse and Result**: The modular inverse calculation and the final result computation are correct.

Given the above reasoning, the program appears to correctly implement the solution to the problem as described.

Correctness: **True**