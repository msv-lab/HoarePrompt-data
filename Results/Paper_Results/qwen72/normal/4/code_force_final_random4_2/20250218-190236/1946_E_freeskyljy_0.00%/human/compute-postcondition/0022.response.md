Postcondition: ***`N`, `M1`, `M2`, `R`, `L`, and `ans` remain unchanged; `nums_left` is `L[-1] - 2`; `i` is `L[-1] - 1` and `L[-1]` must be greater than 2. If `i` is equal to `L[cur]`, then `cur` is `M1 - 3`. Otherwise, `cur` is `M1 - 2` and `ans` is updated to `ans * (L[-1] - 2) % MOD`.***