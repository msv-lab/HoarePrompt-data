n is an integer such that 2 <= n <= 10^6, and f_max_n is the maximum value of f(p) for permutations of length n as defined in the problem description.