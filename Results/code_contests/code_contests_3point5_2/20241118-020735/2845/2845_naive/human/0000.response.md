Correctness: **False**

In the given program, the expected number of unique elements in the chosen segment is incorrectly calculated as `(req + 1) / 2`. This logic does not match the problem description.

For example, consider the input:
```
3
1 2 3
```
The expected number of unique elements in the chosen segment should be `2.333333`, but the program will output `2.0`, which is incorrect.

Therefore, the program does not meet the requirements of the problem description for all potential cases, making the correctness **False**.