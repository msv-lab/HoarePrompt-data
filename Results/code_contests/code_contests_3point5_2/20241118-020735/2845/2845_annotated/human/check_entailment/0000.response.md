Correctness: **False**

The provided program does not correctly calculate the expected number of unique elements in the chosen segment as described in the problem. The program simply calculates the number of unique elements in the array and adds 1, then divides by 2, which does not match the expected value calculation described in the problem.

An example where the program does not work correctly:
Input
2
1 2

Expected Output
1.500000

Actual Output
1.000000

Therefore, the program is incorrect.