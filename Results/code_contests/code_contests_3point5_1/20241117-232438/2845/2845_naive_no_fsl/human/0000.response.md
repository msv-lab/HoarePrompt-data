Correctness: False

The given program does not correctly calculate the expected number of unique elements in the chosen segment. The formula `print(req + 1) / 2` is not in line with the problem description. The expected number of unique elements should be the average of the number of unique elements in all possible segments, not simply adding 1 to the number of unique elements and dividing by 2. 

An example where the program does not work as expected:
Input
2
1 2

Expected Output
1.500000

Actual Output
2.000000

Therefore, the program is incorrect.