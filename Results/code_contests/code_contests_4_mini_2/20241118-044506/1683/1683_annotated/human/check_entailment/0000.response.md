To analyze the correctness of the provided program, let's break down its logic step-by-step based on the problem description.

### Problem Description Recap:
1. Petya has an array of integers and wants to remove duplicates while retaining only the rightmost occurrence of each element.
2. The output should consist of:
   - The number of unique elements left.
   - The unique elements themselves, in the order of their last appearance in the original array.

### Annotations and Code Review:
The annotated program works as follows:
- It reads the number of elements `n` and the list of integers `a`.
- It reverses the list `a` to facilitate processing from the last occurrence to the first.
- It iterates through the reversed list and adds elements to the result list `ans` only if they haven't been added before (tracked using the set `vis`).
- After processing, the result is reversed back to maintain the original order of the last occurrences and printed.

### Assessing Correctness:
Let's evaluate whether the program satisfies the requirements for all potential cases:

1. **Basic Functionality**: The program effectively identifies unique elements from the reversed list and retains their rightmost occurrence. 
2. **Order Preservation**: By reversing the list before processing and reversing it back before output, the program preserves the order of the rightmost occurrences.
3. **Edge Cases**: 
   - When `n = 1`, the program should correctly return 1 and the single element.
   - When all elements are duplicates, it should return 1 and that element.
   - When all elements are unique, it should return `n` and the original list.
   - The maximum constraints (e.g., `n = 50` and all maximum values) should also be handled without performance issues.

### Example Cases:
- For the input `6\n1 5 5 1 6 1\n`, the output is `3\n5 6 1\n`, which is correct.
- For the input `5\n2 4 2 4 4\n`, the output is `2\n2 4\n`, which is also correct.
- For the input `5\n6 6 6 6 6\n`, the output is `1\n6\n`, which holds true as well.

### Conclusion:
Having analyzed the logic, checked against the requirements, and considered edge cases, the program consistently meets the specifications laid out in the problem description.

Thus, the correctness of the program is confirmed.

Correctness: **True**