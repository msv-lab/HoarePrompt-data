Postcondition: ***`ret_path` is a list starting with (0, 0) followed by the result of `func_4` applied to each element in `ret_gp`, which may be empty; `ret_gp` may be updated multiple times based on the values of `s2`, `s` will be a list of indices where bits are '1', `ok` is True, `n` is between 1 and 8, `s1` is unchanged, and `s2` remains unchanged.***