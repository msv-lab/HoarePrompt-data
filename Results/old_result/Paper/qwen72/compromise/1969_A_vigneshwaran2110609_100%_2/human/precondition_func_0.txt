The function should handle multiple test cases. Each test case consists of an integer n (2 ≤ n ≤ 50) representing the number of friends, and a list p of n integers (1 ≤ p_i ≤ n, p_i ≠ i, all p_i are distinct) representing the best friends of each friend. The function should return the minimum number of invitations required for at least 2 friends to attend the party.