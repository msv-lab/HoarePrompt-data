The function `solve` is designed to handle multiple test cases, each containing an array `a` of integers and a series of queries. For each test case, `n` is the number of elements in the array `a` (2 ≤ n ≤ 2 · 10^5), and `q` is the number of queries (1 ≤ q ≤ 2 · 10^5). Each element of the array `a` is an integer (0 ≤ a_i < 2^30). Each query is defined by two integers `l` and `r` (1 ≤ l < r ≤ n), representing the start and end indices of a subarray. The sum of `n` over all test cases and the sum of `q` over all test cases do not exceed 2 · 10^5.