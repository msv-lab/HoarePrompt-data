The function `func` reads an integer `t` representing the number of test cases. For each test case, it reads three integers `n`, `m`, and `k`, and a list `M` of `n` integers representing ticket prices. It calculates the minimum total cost to buy exactly `k` tickets over `n` days, considering the daily purchase limit `m`. After processing all test cases, it prints the calculated minimum cost for each test case. The final state of the program includes the values of `n`, `m`, `k`, and `M` from the last test case, and the list `N` which is the last computed sublist of `M` used in the cost calculation for the last test case.