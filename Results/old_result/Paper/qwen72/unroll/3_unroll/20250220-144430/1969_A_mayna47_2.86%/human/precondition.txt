The function `solve` is expected to handle multiple test cases. Each test case consists of an integer n (2 ≤ n ≤ 50) representing the number of friends, and a list of integers p of length n (1 ≤ p_i ≤ n, p_i ≠ i, all p_i are distinct) where p_i represents the best friend of the i-th friend. The function should ensure that at least 2 friends come to the party.