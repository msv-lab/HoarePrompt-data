The function `func` accepts parameters for multiple test cases. For each test case, it takes the following parameters:
- `t`: An integer representing the number of test cases, where 1 ≤ t ≤ 10^4.
- For each of the `t` test cases:
  - `n`: An integer representing the length of the permutation `p` and the array `a`, where 1 ≤ n ≤ 2 · 10^5.
  - `k`: An integer, where 1 ≤ k ≤ 10^9.
  - `P_B`: An integer, where 1 ≤ P_B ≤ n.
  - `P_S`: An integer, where 1 ≤ P_S ≤ n.
  - `p`: A permutation of length `n`.
  - `a`: An array of length `n` with elements `a_i`, where 1 ≤ a_i ≤ 10^9.

The sum of values of `n` over all test cases does not exceed 2 · 10^5.

Functionality: **The function accepts multiple test cases, each with parameters `n`, `k`, `P_B`, `P_S`, `p`, and `a`. It processes each test case and returns a result based on the provided parameters.**