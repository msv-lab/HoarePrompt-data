Postcondition: ***`n` is an integer such that 2 ≤ n ≤ 2×10^5, `i` is `n-2`, `nodes` is a defaultdict with list as the default factory and must have at least `n-1` keys, `edges` is an empty list, `empty` is True, `s` is the first element of `ends`, `e` is the second element of `ends`, `tree` is a list containing `s`, `prev`, the first element in the list `nodes[prev]`, and `curr`. If `nodes[curr][0] == prev`, then `prev` is now the second element in the list `nodes[prev]` and must not be equal to `e`, and `curr` is now the third element in the list `nodes[curr]` and must not be equal to `e`. Otherwise, `curr` is now the first element in the list `nodes[curr]` and must not be equal to `e`, and `prev` is now equal to the previous value of `curr`.***