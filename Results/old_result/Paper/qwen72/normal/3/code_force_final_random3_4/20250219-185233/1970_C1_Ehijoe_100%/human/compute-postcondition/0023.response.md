Output State: **`n` is an integer such that 2 ≤ n ≤ 2×10^5, `i` is `n-2`, `nodes` is a defaultdict with list as the default factory and must have at least two keys, `edges` is an empty list, `empty` is True, `ends` is a list containing the `key` if the list associated with `key` in `nodes` has exactly one element; otherwise, `ends` is a list containing the `key` and remains an empty list.**