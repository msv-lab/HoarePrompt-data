The function `solve` is part of a program that processes multiple test cases. Each test case includes the length of a permutation `n`, the number of prefix maximums `m_1`, and the number of suffix maximums `m_2`, where `1 <= m_1, m_2 <= n <= 2 * 10^5`. The indices of the prefix maximums are provided in a strictly increasing sequence `p_1 < p_2 < ... < p_{m_1}` (1 <= p_i <= n), and the indices of the suffix maximums are provided in a strictly increasing sequence `s_1 < s_2 < ... < s_{m_2}` (1 <= s_i <= n). The sum of all `n` values across all test cases does not exceed 2 * 10^5.