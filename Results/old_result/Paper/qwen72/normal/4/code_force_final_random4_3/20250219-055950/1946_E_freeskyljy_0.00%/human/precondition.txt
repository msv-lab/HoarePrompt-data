The function `solve` is part of a program that processes multiple test cases. Each test case includes three integers n, m_1, and m_2, where 1 ≤ m_1, m_2 ≤ n ≤ 2 × 10^5, representing the length of the permutation, the number of prefix maximums, and the number of suffix maximums, respectively. The second line of each test case contains m_1 integers p_1 < p_2 < ... < p_{m_1} (1 ≤ p_i ≤ n), the indices of the prefix maximums in increasing order. The third line contains m_2 integers s_1 < s_2 < ... < s_{m_2} (1 ≤ s_i ≤ n), the indices of the suffix maximums in increasing order. The sum of the values of n for all test cases does not exceed 2 × 10^5.