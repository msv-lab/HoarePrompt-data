t is an integer where 1 ≤ t ≤ 10^4, representing the number of test cases. For each test case, n and m are integers where 1 ≤ n, m ≤ 500, representing the dimensions of the grid. The grid is represented by a list of n strings, each of length m, containing characters 'W' and 'B', representing the colors of the squares. The total number of squares across all test cases does not exceed 3 * 10^5.