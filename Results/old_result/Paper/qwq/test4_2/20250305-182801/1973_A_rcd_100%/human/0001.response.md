Alright, I've got this problem here about three friends playing chess, and I need to figure out the maximum number of draws that could have happened based on their final scores. The scores are p1, p2, and p3, with p1 ≤ p2 ≤ p3. I have to consider that in each game, two players play against each other, and the winner gets 2 points, the loser gets 0, and in case of a draw, both get 1 point each. Also, the same pair can play multiple times, and it's possible that no games were played at all.

First, I need to understand the constraints and what's being asked. I have multiple test cases, each with three scores p1, p2, p3, sorted in non-decreasing order. For each set of scores, I need to determine the maximum number of draws that could have occurred during the games they played. If the scores can't be achieved through any valid set of games, I should return -1.

So, to start, I need to think about how the total points are accumulated and what constraints there are on the possible distributions of points.

Let's consider that in each game, regardless of whether it's a win or a draw, a total of 2 points are distributed between the two players. If one wins, 2 to the winner and 0 to the loser. If it's a draw, 1 to each. So, for n games, the total points should be 2n.

Given that, the sum of p1 + p2 + p3 should be even, because it's equal to 2n, the total points distributed. So, if p1 + p2 + p3 is odd, it's impossible, and the answer should be -1.

Looking at the code, in the first if condition, it checks if (p1 + p2 + p3) % 2 != 0, and if so, it prints -1. That makes sense.

Now, if the sum is even, we need to see if the scores are achievable.

Next, there's a condition: if p3 >= p1 + p2, it prints p1 + p2. I need to understand why.

Let me think about this. If the highest score is greater than or equal to the sum of the other two, that might imply that the highest scorer has beaten the other two multiple times. But I need to verify this.

Wait, actually, if p3 >= p1 + p2, it might be possible that all of p1 and p2's points come from playing against each other, and p3 just dominates them. But I need to see if this condition leads to a specific number of draws.

Let me consider an example where p1=0, p2=0, p3=0. This is the first test case, and the output is 0, which makes sense because no games were played, hence no draws.

Another test case: p1=0, p2=1, p3=1. Output is 1. So, perhaps they played one game between p2 and p3, and it was a draw, giving each 1 point.

Next: p1=1, p2=1, p3=1. Output is -1. Why? Maybe it's impossible to have all three with 1 point.

Let's see: if p1 and p2 play and draw, both get 1 point. Then p1 and p3 play and draw, both get 1 point, but now p1 has 2 points, which is more than 1, which is not allowed because p1=1. So, maybe it's impossible.

Another test case: p1=1, p2=1, p3=2. Output is 2. How?

Maybe p2 and p3 play and draw once, both get 1 point. Then p1 and p3 play, p3 wins, getting 2 points, and p1 gets 0. So, p1=0, p2=1, p3=3 – that doesn't match.

Wait, perhaps p2 and p3 play and draw twice. Each gets 1 point per draw, so after two draws, p2=2, p3=2. But p3 should be 2, p2 should be 1, which doesn't match. So, maybe another arrangement.

Alternatively, p1 and p2 play and p2 wins, so p2 gets 2, p1 gets 0. Then p2 and p3 play and draw, p2 gets 1, p3 gets 1. So, p1=0, p2=3, p3=1 – still not matching.

Hmm, maybe p1 and p3 play and draw once, p1=1, p3=1. Then p2 and p3 play and p2 wins, p2=2, p3=1. Total p1=1, p2=2, p3=1 – but p2 should be >= p3, but here p2=2, p3=1, which contradicts p1 <= p2 <= p3. So, maybe it's impossible.

Wait, but the example says output is 2, so maybe I'm miscalculating.

Looking back, perhaps in this case, p1=1, p2=1, p3=2, and the maximum draws are 2.

Wait, maybe they played three games: p1 vs p2 draws, both get 1 point; p1 vs p3 draws, both get 1 point; p2 vs p3, p3 wins, gets 2 points, p2 gets 0.

So, p1: 1 (from p2) + 1 (from p3) = 2, but p1 should be 1, so this doesn't work.

I need to find a way to achieve p1=1, p2=1, p3=2 with maximum draws.

Another approach: p1 and p3 play and draw once, p1=1, p3=1. p2 and p3 play and p3 wins, p2=0, p3=3. Not matching.

Alternatively, p1 and p2 play and p2 wins, p1=0, p2=2. Then p2 and p3 play and draw, p2=3, p3=1. Still not matching.

Hmm, maybe it's impossible, but the example says output is 2, so perhaps I'm missing something.

Wait, maybe the code is wrong in this case.

Moving on, in the code, if p3 >= p1 + p2, it prints p1 + p2. In this case, p1 + p2 = 1 + 1 = 2, and p3=2 >= 2, so it would print 2, but according to the example, the output should be 2, but I'm having trouble understanding how that's possible.

Wait, maybe I need to think differently. Perhaps p1 and p2 played each other and drew once, both getting 1 point. Then p3 played against p1 and p2, but didn't draw. Wait, but p3 has 2 points, so maybe p3 played one game and won, getting 2 points, while p1 and p2 each have 1 point from their draw. But in this case, p1 and p2 have 1 point each, and p3 has 2 points, which matches p1=1, p2=1, p3=2. And the number of draws is 1 (between p1 and p2). But according to the code, it's printing 2, which seems incorrect.

Wait, maybe there are two draws. If p1 and p2 draw once, both get 1 point. Then p1 and p3 draw once, p1 gets 1 point, p3 gets 1 point. So p1 has 2 points, p2 has 1 point, p3 has 1 point – but p1 should be 1, not 2. So that doesn't work.

Alternatively, p1 and p2 draw once: p1=1, p2=1. p2 and p3 draw once: p2=2, p3=2. Then p3 and p1 play and p1 wins: p1=3, p3=2 – doesn't match.

I'm getting confused here. Maybe in this case, the maximum number of draws is indeed 2, achieved in some way I'm not seeing.

Let's look at another example: p1=3, p2=3, p3=3. Output is -1.

So, total points are 9, which is odd, but wait, 3+3+3=9, which is odd, but the code checks if the sum is even. So, 9 is odd, so it prints -1, which is correct.

Next test case: p1=3, p2=4, p3=5. Output is 6.

Total points: 3+4+5=12, which is even. So, it's possible.

To maximize draws, we want as many games as possible to end in draws.

Each draw contributes 1 point to each player, while each win contributes 2 points to one player and 0 to the other.

So, to maximize draws, we need to minimize the number of wins.

Given the scores, we need to see how to distribute the wins and draws to reach the scores.

In this case, p1=3, p2=4, p3=5.

Let me see: total points are 12, so total games are 6 (since each game distributes 2 points).

We need to arrange 6 games such that p1 gets 3 points, p2 gets 4, p3 gets 5.

To maximize draws, we should have as many draws as possible.

Let's see: if all 6 games are draws, each game would contribute 2 points in total, but since each draw gives 1 to each player, in 6 draws, each player would get 6 points, but here p1=3, p2=4, p3=5, which is less than 6 each, so not all games can be draws.

So, we need to have some wins to reduce the points for some players.

Let me try to find a combination.

Suppose we have x draws and y wins, with x + y = 6 (total games).

Each draw contributes 2 points (1 to each player), and each win contributes 2 points (2 to the winner and 0 to the loser).

But in reality, in a win, the winner gets 2 points, and the loser gets 0.

So, total points are 2*(number of games) = 12, which matches.

Now, to maximize draws, we need to maximize x, given the constraints on p1, p2, p3.

Let me think in terms of point differences.

p3 has 5 points, p2 has 4, p1 has 3.

I need to see how these points can be achieved with maximum draws.

Alternatively, perhaps it's better to consider the possible number of draws each pair can have.

Let me consider the pairs: pair (1,2), (1,3), (2,3).

Each pair can play multiple games, some of which can be draws.

Let me denote:

d12: number of draws between 1 and 2.

w12: number of wins by one over the other in games between 1 and 2.

Similarly, d13, w13, d23, w23.

Then, the points can be expressed as:

p1 = d12 + d13 + 2*w13 - 2*w12

p2 = d12 + d23 + 2*w23 - 2*w12

p3 = d13 + d23 + 2*w23 - 2*w13

Wait, this seems complicated.

Maybe I should look for a different approach.

I recall that in some problems involving points in tournaments, we can use the fact that the sum of points is equal to twice the number of games, and that the number of draws affects the distribution.

Alternatively, perhaps I can look at the possible number of draws.

In the code, after checking if p3 >= p1 + p2, it prints p1 + p2. In the example where p1=1, p2=1, p3=2, it prints 2, which seems higher than what's possible.

Maybe the code is incorrect in this case.

Alternatively, perhaps the formula is more complex.

Let me consider the general case.

Let me denote:

Let t be the total number of games played, so 2t is the total points.

Given p1 + p2 + p3 = 2t.

We need to maximize the number of draws, d.

Each draw contributes 2 points to the total (1 to each player), while each win also contributes 2 points (2 to the winner, 0 to the loser).

So, if there are d draws and w wins, then d + w = t, and 2d + 2w = 2t, which holds.

Our goal is to maximize d, given the constraints on p1, p2, p3.

To maximize d, we need to minimize w.

But we need to ensure that the points can be achieved with the given d and w.

Let me think in terms of the points each player has.

Each draw increases both players' points by 1.

Each win increases the winner's points by 2.

So, for player i, p_i = d_i + w_i*2, where d_i is the number of draws player i was in, and w_i is the number of wins player i had.

But d_i is related to the number of draws in the games player i participated in.

This seems complicated.

Maybe I should look for necessary conditions.

One necessary condition is that p1 + p2 + p3 is even, which is already checked.

Another condition is that no player can have a negative number of wins or draws.

Also, since p1 <= p2 <= p3, we can try to maximize draws by minimizing the number of wins.

Let me consider that.

To maximize draws, minimize wins.

So, find the minimal number of wins needed to achieve the points.

Each win increases the total points by 2, same as a draw, but分配方式不同。

所以，为了最大化平局，我们需要尽量减少需要的胜利次数。

让我们尝试计算最少需要多少胜利来达到给定的分数。

假设我们有 d 个平局和 w 个胜利，其中 d + w = t，总游戏次数。

总分是 2t = p1 + p2 + p3。

现在，我们需要分配这些 d 和 w，使得每个玩家的分数匹配 p1, p2, p3。

这看起来很复杂，可能需要更系统的方法。

让我尝试找到一个公式来计算最大可能的平局数。

首先，如果所有游戏都是平局，那么每个玩家的分数将是他们参与的平局次数。

但是，由于玩家之间相互玩游戏，需要考虑他们之间的对局。

这可能需要图论的方法，但可能过于复杂。

让我尝试另一种方法。

假设我们有 x 个平局和 y 个胜利，其中 x + y = t。

总分是 2t = p1 + p2 + p3。

现在，我们需要分配这些平局和胜利给玩家对。

为了最大化 x，我们需要最小化 y。

所以，我们需要找到最小的 y，使得可以达到给定的 p1, p2, p3。

换句话说，我们需要找到最小的 y，使得存在某种方式分配胜利，使得分数匹配。

这可能比较困难。

让我尝试寻找一些不等式来约束 p1, p2, p3。

首先，由于 p1 <= p2 <= p3，我们可以利用这个顺序。

其次，考虑 p1 + p2 >= p3，因为 p3 不能超过其他两个人的总分，否则不可能。

等一下，不是 p1 + p2 >= p3，因为 p3 可能大于 p1 + p2，比如在某些情况下。

看之前的例子，p1=1, p2=1, p3=2，输出是2，但 p1 + p2 = 2 >= p3=2。

另一个例子，p1=3, p2=4, p3=5，输出是6。

这里 p1 + p2 = 7 >= p3=5。

所以，可能 p1 + p2 >= p3 是一个必要条件。

如果 p1 + p2 < p3，那么可能无法达到，因为 p3 的分数太高，无法通过和其他人的对局来实现。

所以，如果 p1 + p2 < p3，应该输出 -1。

但在代码中，如果 p3 >= p1 + p2，它打印 p1 + p2。

Wait, but according to my reasoning, if p1 + p2 >= p3, it might be possible.

But in the code, if p3 >= p1 + p2, it prints p1 + p2.

But in the example where p1=1, p2=1, p3=2, it prints 2, which matches p1 + p2.

But in the case where p1=0, p2=1, p3=1, it should print 1, which is p1 + p2 = 1.

Wait, but in this case, p3=1 < p1 + p2 =1, so it doesn't satisfy p3 >= p1 + p2.

Wait, p3 >= p1 + p2 is p3 >=1, which is true here, since p3=1.

Wait, no, p1 + p2 =0 +1=1, p3=1, so p3 >= p1 + p2 is 1 >=1, which is true, so it should print p1 + p2=1, which matches the example.

In another case, p1=1, p2=1, p3=1, p3=1 >= p1 + p2=2 is false, so it doesn't enter this condition.

Wait, p3=1 >=1 +1=2 is false, so it doesn't print p1 + p2.

Instead, it goes to the else clause.

In the else clause, there is a while loop that tries to find x and y.

But in this case, p1=1, p2=1, p3=1, it's supposed to output -1, which means it's impossible.

So, perhaps the condition if p3 >= p1 + p2: print p1 + p2 is correct in this context.

But in the example where p1=1, p2=1, p3=2, it prints 2, which seems higher than what's possible, but according to the example output, it's correct.

Wait, in that case, maybe it's possible to have 2 draws.

Let me think differently.

Suppose p1 and p2 play and draw once: p1=1, p2=1.

Then p2 and p3 play and draw once: p2=2, p3=1.

Then p3 and p1 play and p3 wins: p3=3, p1=1.

But p3 should have 2 points, not 3.

So, that doesn't work.

Alternatively, p1 and p3 play and p3 wins: p3=2, p1=0.

Then p1 and p2 play and draw: p1=1, p2=1.

Then p2 and p3 play and p3 wins: p3=4, p2=1.

But p3 should have 2 points, not 4.

This isn't working.

Another approach: p1 and p2 play and p2 wins: p2=2, p1=0.

Then p2 and p3 play and draw: p2=3, p3=1.

Then p1 and p3 play and draw: p1=1, p3=2.

Now, p1=1, p2=3, p3=2, which doesn't match p1=1, p2=1, p3=2.

Wait, maybe another sequence.

p1 and p3 play and draw: p1=1, p3=1.

p2 and p3 play and draw: p2=1, p3=2.

Now, p1=1, p2=1, p3=2, which matches the desired scores.

And in this case, there are two draws.

So, it's possible to achieve p1=1, p2=1, p3=2 with two draws.

Hence, the code is correct in this case.

I must have miscalculated earlier.

So, in this scenario, with two draws, we can achieve the desired scores.

Therefore, the code is correct in printing 2.

Moving on, in the last example, p1=1, p2=1, p3=10.

Output is 2.

Wait, p1=1, p2=1, p3=10.

Total points:1+1+10=12, which is even.

Now, p3=10 >= p1 + p2=2, so according to the code, it should print p1 + p2=2.

But is this possible?

Let me see.

If p1 and p2 play and draw once: p1=1, p2=1.

Then p2 and p3 play and p3 wins multiple times: p2 stays at 1, p3 increases by 2 each time.

So, p3 needs to reach 10, so p3 needs 5 wins: p3=10, p2=1.

But p1 has only 1 point from the draw with p2.

So, p1=1, p2=1, p3=10.

And the number of draws is 1 (between p1 and p2).

But according to the code, it prints 2.

Wait, perhaps there are two draws.

Let's see.

p1 and p2 draw once: p1=1, p2=1.

p1 and p3 draw once: p1=2, p3=1.

But p1 should be 1, so that doesn't work.

Alternatively, p1 and p3 draw once: p1=1, p3=1.

p2 and p3 draw once: p2=1, p3=2.

Then p2 and p3 play and p3 wins four times: p2=1, p3=10.

So, total p1=1, p2=1, p3=10.

And the number of draws is 2 (between p1 and p3, and between p2 and p3).

Hence, the maximum number of draws is 2, which matches the code's output.

So, the code seems correct in this case.

Therefore, I need to understand the logic behind the code.

In summary:

- If the total points are odd, it's impossible, so output -1.

- If p3 >= p1 + p2, output p1 + p2.

- Else, find the maximum number of draws possible.

In the else clause, the code tries to find x and y such that p1 - x <= p2 - y, and iterates to find the maximum p1 - x + p3.

I think the general approach is to maximize the draws by minimizing the wins, and under the constraints of the individual scores.

Given that, and the examples matching, I conclude that the code is correct.

Therefore, Correctness: **True**