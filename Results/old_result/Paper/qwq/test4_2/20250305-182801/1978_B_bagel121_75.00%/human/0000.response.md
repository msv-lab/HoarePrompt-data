Alright, I have this problem to solve. Let's see what it's asking for. Bob has a bakery, and on the opening day, he baked n buns that he wants to sell. The usual price for each bun is a coins. But to attract customers, he's offering a promotion:

- He can choose some integer k (between 0 and the minimum of n and b)。

- For the first k buns sold, the price is modified: the i-th bun costs (b - i + 1) coins.

- The remaining (n - k) buns are sold at the usual price a coins each.

My task is to help Bob determine the maximum profit he can make by choosing the best k.

First, I need to understand the promotion clearly. So, if he chooses k = 0, he sells all n buns at price a. If he chooses k = 1, he sells the first bun at b coins and the rest at a coins, and so on, up to k = min(n, b).

I need to maximize the total profit, which is the sum of the prices of all buns sold.

Let me think about when it's beneficial to choose a higher k. The modified prices for the first k buns are decreasing: b, b-1, b-2, ..., up to b - k + 1.

So, the total price for the first k buns is the sum of an arithmetic series from b down to b - k + 1.

The sum of this series is (k/2) * (first term + last term) = (k/2) * (b + (b - k + 1)) = (k/2) * (2b - k + 1).

The remaining (n - k) buns are sold at price a each, so their total contribution is a*(n - k).

Therefore, the total profit is: (k/2)*(2b - k + 1) + a*(n - k).

I need to maximize this expression with respect to k, where k can be from 0 to min(n, b).

But since k is an integer, I need to evaluate this expression for integer values of k in that range and find the maximum.

This seems a bit tricky because n, a, and b can be up to 1e9, and t can be up to 1e4, so I need an efficient way to compute this without iterating over each possible k, as that would be too slow.

I need to find a way to determine the optimal k quickly.

Let me consider different cases based on the relationship between a and b.

Case 1: a >= b.

In this case, selling buns at the usual price a is better or equal to the modified price.

Wait, but the modified price for the first k buns is b, b-1, ..., b - k + 1.

So, if a >= b, then selling at a is better than or equal to selling at b.

But for k > 0, the first bun is sold at b, which could be less than a.

Wait, no, if a >= b, then selling all buns at a would give a total of n*a.

If I choose k > 0, then the first k buns are sold at b, b-1, ..., b - k + 1, and the rest at a.

I need to see if choosing k > 0 can give a higher total than n*a.

Let me consider the sum for k buns: sum from i=1 to k of (b - i + 1) = sum from i=1 to k of b - i + 1 = k*b - sum from i=1 to k of i + sum from i=1 to k of 1 = k*b - (k*(k+1)/2) + k = k*b - (k*(k+1)/2) + k = k*(b + 1) - k*(k+1)/2.

So total profit with k is: k*(b + 1) - k*(k+1)/2 + a*(n - k).

I need to maximize this.

But this seems complicated. Maybe there's a better way.

Alternatively, perhaps I can find the value of k where the modified price starts being less advantageous compared to the usual price.

Wait, perhaps I can find the point where the marginal benefit of increasing k stops being positive.

Let me consider the difference in profit when increasing k by 1.

Let’s denote P(k) as the profit when choosing k.

Then, P(k) = sum of modified prices for first k buns + a*(n - k).

I want to find k that maximizes P(k).

Let’s look at P(k+1) - P(k):

= (sum for i=1 to k+1 of modified prices) + a*(n - k - 1) - (sum for i=1 to k of modified prices) - a*(n - k)

= (modified price for (k+1)-th bun) - a.

Wait, no.

Actually, P(k+1) = sum for i=1 to k+1 of (b - i + 1) + a*(n - k - 1)

P(k) = sum for i=1 to k of (b - i + 1) + a*(n - k)

So, P(k+1) - P(k) = (b - (k+1) + 1) + a*(n - k - 1) - a*(n - k) = (b - k) + a*(-1) = b - k - a.

So, P(k+1) - P(k) = b - k - a.

This tells me that as long as b - k - a > 0, increasing k increases the profit.

So, as long as k < b - a, choosing a higher k is better.

When k = b - a, P(k+1) - P(k) = b - (b - a) - a = 0.

And when k > b - a, P(k+1) - P(k) < 0, meaning profit decreases.

Therefore, the optimal k is k = b - a, but we need to make sure that k does not exceed n and that k >= 0.

Wait, let's see:

From P(k+1) - P(k) = b - k - a.

So, as long as b - k - a > 0, increasing k increases profit.

That is, while k < b - a, increase k.

At k = b - a, P(k+1) - P(k) = 0, so profit remains the same.

And for k > b - a, P(k+1) - P(k) < 0, so profit decreases.

Therefore, the maximum profit is achieved at k = b - a.

But k cannot be negative, so k = max(0, b - a).

Also, k cannot exceed n or b, so k = min(n, b, b - a).

Wait, but b - a could be negative.

So, k = min(n, b, max(0, b - a)).

Wait, more precisely, k = min(n, b, b - a + 0) .

Wait, better to write k = min(n, b, b - a, 0).

No, since if b - a < 0, then k = 0.

So, k = min(n, b, b - a + floor(0)).

Wait, perhaps it's better to think of it as k = min(n, b, b - a, 0).

Wait, no, min(n, b, b - a, 0) is not correct.

Actually, since k >= 0, and k <= min(n, b), and k <= b - a.

Wait, but b - a could be negative.

So, effectively, k <= b - a if b - a >= 0, else k <= 0, but k >= 0, so k = 0.

Therefore, k = min(n, b, max(0, b - a)).

That seems correct.

So, the optimal k is k = min(n, b, max(0, b - a)).

Then, the total profit is:

sum of modified prices for first k buns + a*(n - k).

The sum of modified prices is sum from i=1 to k of (b - i + 1) = k*b - sum from i=1 to k of i + sum from i=1 to k of 1 = k*b - k*(k+1)/2 + k = k*(b + 1) - k*(k+1)/2.

So, total profit is k*(b + 1) - k*(k+1)/2 + a*(n - k).

But to compute this efficiently, especially with large n, a, b, I need to make sure that the computation is done using integer arithmetic to avoid precision errors, and handle large numbers correctly.

Also, since n, a, b can be up to 1e9, and t up to 1e4, I need to make sure that the solution is efficient, i.e., O(1) per test case.

Now, looking at the provided program:

def func():

t = int(input())

for _ in range(t):

(n, a, b) = map(int, input().split())

if a >= b:

print(n * a)

else:

k = min(b - a + 1, n)

ans = int((b + (b - k + 1)) / 2 * k)

p2 = (n - k) * a

print(ans + p2)

So, in the case where a >= b, it simply prints n*a, which makes sense because choosing k=0 is optimal.

In the case where a < b, it calculates k = min(b - a + 1, n), then computes the sum of the modified prices for the first k buns and the sum for the remaining n - k buns sold at price a.

Wait, why is it b - a + 1?

From my earlier reasoning, k = min(n, b, max(0, b - a)).

But in the code, it's k = min(b - a + 1, n).

Is this equivalent to min(n, b, max(0, b - a))?

Let me check.

If b - a + 1 <= b, which it is since a < b, then min(b - a + 1, n) is equivalent to min(n, b, b - a + 1).

But we need min(n, b, max(0, b - a)).

So, is min(n, b, b - a + 1) the same as min(n, b, max(0, b - a))?

Wait, b - a + 1 could be greater than b - a, but since k cannot exceed b, which is already covered by min(n, b, ...), I'm getting a bit confused.

Let me plug in some numbers.

Suppose n=4, a=4, b=5.

From the first test case, it's optimal to choose k=1.

Here, a < b, so k = min(b - a + 1, n) = min(5 - 4 + 1, 4) = min(2, 4) = 2.

But in the explanation, it says k=1 is optimal.

Wait, there's a discrepancy here.

With k=1, profit is 5 + 4*3 = 5 + 12 = 17.

With k=2, profit is (5 + 4) + 4*2 = 9 + 8 = 17.

Same as k=1.

But according to the code, k = min(b - a + 1, n) = 2.

Then ans = int((5 + (5 - 2 + 1)) / 2 * 2) = int((5 + 4)/2 * 2) = int(9/2 * 2) = int(4.5 * 2) = int(9) = 9.

p2 = (4 - 2)*4 = 8.

Total = 9 + 8 = 17.

Same as k=1.

So, in this case, it works.

In the second test case, n=5, a=5, b=9.

a < b, so k = min(9 - 5 + 1, 5) = min(5,5) = 5.

ans = int((9 + (9 - 5 + 1))/2 *5) = int((9 + 5)/2 *5) = int(14/2 *5) = int(7*5) = 35.

p2 = (5-5)*5 = 0.

Total = 35 + 0 = 35.

Which matches the example.

In the third test case, n=10, a=10, b=5.

a >= b, so k=0, total = 10*10 = 100.

Which matches the example.

Seems correct so far.

Wait, but in the first test case, k=1 is optimal, but according to the code, k=2 gives the same profit.

So, is the code choosing k=2, but it's actually better to choose k=1.

But in terms of profit, both give 17, so it's fine.

Now, in the code, for k, it's taking min(b - a + 1, n).

But according to my earlier reasoning, it should be min(n, b, max(0, b - a)).

So, is min(b - a + 1, n) equivalent to that?

Wait, perhaps not.

Let me consider a case where a < b, and b - a + 1 > b.

Wait, b - a + 1 > b implies -a +1 >0, which implies a <1.

But a is at least 1, so b - a +1 <= b.

Wait, no, a can be 0, but in the problem, a is at least 1.

Wait, no, a is at least 1, as per the constraints: 1 <= n, a, b <= 1e9.

So, a >=1.

Then, b - a +1 could be less than or equal to b.

Wait, but in the code, it's min(b - a +1, n).

But earlier, I thought it should be min(n, b, max(0, b - a)).

Wait, perhaps they are equivalent.

Let me see.

min(b - a +1, n) vs min(n, b, max(0, b - a)).

If b - a +1 <= b, then min(b - a +1, n) = min(n, b - a +1).

But min(n, b, max(0, b - a)) is considering three terms.

Wait, perhaps I need to consider different scenarios.

Case 1: b - a <= 0.

Then, k = min(n, b, 0) = 0.

In the code, k = min(b - a +1, n).

If b - a <=0, then b - a +1 <=1.

But b - a +1 could be positive or negative.

Wait, b - a +1 >=1 if b >= a -1.

But a >=1, b >=1, so b - a +1 >=1 - a +1 = 2 - a >=1 if a <=1.

But a >=1, so 2 - a >=1 only if a=1.

Wait, this is getting messy.

Perhaps a better way is to derive the formula for the optimal k.

From the earlier reasoning, P(k+1) - P(k) = b - k - a.

So, as long as b - k - a >0, increasing k increases profit.

So, set b - k - a >0 => k < b - a.

Thus, optimal k is k = b - a, but k cannot exceed n or b.

So, k = min(n, b, b - a).

But b - a could be negative, so k = min(n, b, max(0, b - a)).

In the code, k = min(b - a +1, n).

Wait, perhaps the code is choosing k = b - a +1, but that may not be correct.

Wait, in the first test case, n=4, a=4, b=5.

So, b - a =1, so k = min(1 +1,4)=2.

But as per the explanation, k=1 is optimal, although k=2 gives the same profit.

So, it's still correct.

Wait, but in general, is choosing k = b - a +1 optimal?

Wait, in the second test case, n=5, a=5, b=9.

b - a =4, so k = min(4 +1,5)=5.

Which is correct.

In the third test case, n=10, a=10, b=5.

a >=b, so k=0.

In the fourth test case, n=5, a=5, b=11.

b - a =6, so k = min(6 +1,5)=5.

Which is correct.

In the fifth test case, n=1e9, a=1e9, b=1e9.

a >=b, so k=0.

Sixth test case, n=1e9, a=1e9, b=1.

a >=b, so k=0.

Seventh test case, n=1000, a=1, b=1000.

b - a =999, so k = min(999 +1,1000)=1000.

So, k=1000.

Which seems correct.

But is this always correct?

Wait, let's consider a case where b - a +1 > n.

Suppose n=1, a=1, b=1000.

Then, k = min(1000 -1 +1,1)= min(1000,1)=1.

Which is correct.

Another case: n=10, a=2, b=5.

b - a =3, so k = min(3 +1,10)=4.

But min(n, b, max(0, b - a)) = min(10,5,3)=3.

Wait, here, the code chooses k=4, but according to the formula, k should be 3.

Wait, but in this case, P(k+1) - P(k) = b - k - a.

For k=3, P(4) - P(3) = 5 -4 -2 = -1 <0, so P(4) < P(3).

Therefore, k=3 is optimal, not k=4.

So, the code is choosing k=4, but it should be k=3.

Wait, but according to the earlier reasoning, k should be min(n, b, max(0, b - a))=min(10,5,3)=3.

But the code has k = min(b - a +1, n)=min(4,10)=4.

So, in this case, it's choosing k=4, but the optimal k is 3.

Let's compute the profits.

For k=3:

Sum of modified prices: 5 +4+3=12.

Remaining: (10-3)*2=14.

Total:12+14=26.

For k=4:

Sum of modified prices:5+4+3+2=14.

Remaining: (10-4)*2=12.

Total:14+12=26.

Same as k=3.

So, in this case, choosing k=3 or k=4 gives the same profit.

So, the code is still correct.

Wait, but according to the marginal analysis, P(k+1) - P(k) = b - k - a.

For k=3, P(4) - P(3) =5 -4 -2=-1 <0, so P(4) < P(3).

But in this case, P(4) =26 and P(3)=26, which contradicts the earlier formula.

Wait, maybe there's an error in the marginal analysis.

Let me recalculate P(k+1) - P(k).

P(k) = sum from i=1 to k of (b - i +1) + a*(n -k).

Sum from i=1 to k of (b - i +1) = k*b - sum from i=1 to k of i + sum from i=1 to k of 1 =k*b -k*(k+1)/2 +k =k*(b +1) -k*(k+1)/2.

Therefore, P(k) =k*(b +1) -k*(k+1)/2 + a*(n -k).

Then, P(k+1) = (k+1)*(b +1) - (k+1)*(k+2)/2 + a*(n - k -1).

So, P(k+1) - P(k) = [(k+1)*(b +1) - (k+1)*(k+2)/2 + a*(n - k -1)] - [k*(b +1) -k*(k+1)/2 + a*(n -k)].

Simplify:

= (k+1)*(b +1) - (k+1)*(k+2)/2 + a*(n - k -1) - k*(b +1) + k*(k+1)/2 - a*(n -k).

= (k+1)*(b +1) - k*(b +1) - (k+1)*(k+2)/2 + k*(k+1)/2 + a*(n - k -1) - a*(n -k).

= (b +1) - (k+1)*(k+2)/2 - k*(k+1)/2 + a*(-1).

= (b +1) - [(k+1)*(k+2) - k*(k+1)] /2 - a.

= (b +1) - [(k+1)*(k+2 - k)] /2 - a.

= (b +1) - (k+1)*2 /2 - a.

= (b +1) - (k+1) - a.

= b +1 - k -1 - a.

= b - k - a.

So, P(k+1) - P(k) = b - k - a.

So, when b - k - a >0, P(k+1) > P(k), and when b - k - a <0, P(k+1) < P(k).

At b - k - a =0, P(k+1) = P(k).

In the earlier example, n=10, a=2, b=5.

b - a =3.

So, for k=3, P(4) - P(3) =5 -4 -2=-1 <0, but P(4)=26 and P(3)=26.

Wait, but according to the formula, P(4) - P(3) should be -1, but in reality, it's 0.

So, perhaps there's an error in the formula.

Wait, perhaps I made a mistake in calculating P(k).

Let me recalculate P(k).

Sum from i=1 to k of (b - i +1) = sum from i=1 to k of (b +1 - i) = k*(b +1) - sum from i=1 to k of i =k*(b +1) -k*(k+1)/2.

Then, P(k) = k*(b +1) -k*(k+1)/2 + a*(n -k).

Then, P(k+1) = (k+1)*(b +1) - (k+1)*(k+2)/2 + a*(n - k -1).

So, P(k+1) - P(k) = (k+1)*(b +1) - (k+1)*(k+2)/2 + a*(n - k -1) - k*(b +1) +k*(k+1)/2 - a*(n -k).

Simplify:

= (k+1)*(b +1) - k*(b +1) - (k+1)*(k+2)/2 + k*(k+1)/2 + a*(n - k -1) - a*(n -k).

= (b +1) - (k+1)*(k+2)/2 - k*(k+1)/2 - a.

= (b +1) - [(k+1)*(k+2) - k*(k+1)] /2 - a.

= (b +1) - [(k+1)*(k+2 - k)] /2 - a.

= (b +1) - (k+1)*2 /2 - a.

= (b +1) - (k+1) - a.

= b +1 - k -1 - a.

= b - k - a.

So, P(k+1) - P(k) = b - k - a.

But in the earlier example, n=10, a=2, b=5, k=3.

P(4) - P(3) =5 -4 -2=-1, but P(4)=26 and P(3)=26, so P(4) - P(3) should be 0.

Wait, there's inconsistency here.

Wait, perhaps I miscalculated P(4).

Let's compute P(3):

Sum of first 3 modified prices:5 +4+3=12.

Remaining:7*2=14.

Total:26.

P(4):

Sum of first 4 modified prices:5+4+3+2=14.

Remaining:6*2=12.

Total:26.

So, P(4) - P(3) =26 -26=0, but according to the formula, b - k - a=5 -4 -2=-1.

So, the formula suggests P(4) < P(3), but in reality, P(4) = P(3).

So, perhaps the formula is not accurate in all cases.

Wait, maybe there's an off-by-one error.

Let me check for k=2:

Sum of first 2 modified prices:5+4=9.

Remaining:8*2=16.

Total:25.

P(3)=26, which is higher.

P(4)=26.

P(5)= sum of first 5 modified prices:5+4+3+2+1=15.

Remaining:5*2=10.

Total:25.

So, P(5) < P(4).

So, indeed, P(4) - P(3) =0, but according to the formula, b - k - a=5 -4 -2=-1.

So, the formula suggests P(4) < P(3), but in reality, P(4) = P(3).

So, perhaps the formula is not entirely accurate.

Maybe I need to adjust the condition.

Let me think differently.

Let me consider the total profit as a function of k:

P(k) = sum from i=1 to k of (b - i +1) + a*(n -k).

Sum from i=1 to k of (b - i +1) = k*b - sum from i=1 to k of i + sum from i=1 to k of 1 =k*b -k*(k+1)/2 +k =k*(b +1) -k*(k+1)/2.

Therefore, P(k) =k*(b +1) -k*(k+1)/2 + a*(n -k).

Simplify:

P(k) =k*b +k -k*(k+1)/2 + a*n - a*k.

= - (k^2 + k)/2 + (b - a +1)*k + a*n.

This is a quadratic in terms of k: P(k) = - (1/2)*k^2 + (b - a +1 - 1/2)*k + a*n.

Wait, actually, it's a quadratic function in k.

P(k) = - (1/2)*k^2 + (b - a +1)*k + a*n.

The maximum of this quadratic function occurs at k = -B/(2*A), where A = -1/2, B = (b - a +1).

So, k_max = (b - a +1) / (2*0.5) = (b - a +1)/1 = b - a +1.

But k must be an integer between 0 and min(n, b).

So, in the earlier example, b - a +1 =5 -2 +1=4.

But in that case, k=4 gives P(4)=26, and k=3 gives P(3)=26.

So, the maximum is at k=4 or k=3.

So, in general, the optimal k is floor((b - a +1)), but since b - a +1 is integer, it's just b - a +1.

But in the code, k = min(b - a +1, n).

Which seems correct.

So, even if P(k) is the same for k=b - a and k=b - a +1, choosing either is fine.

Hence, the code is correct in choosing k = min(b - a +1, n).

Therefore, the given program is correct.

**Final Answer**

\[ \boxed{\text{True}} \]