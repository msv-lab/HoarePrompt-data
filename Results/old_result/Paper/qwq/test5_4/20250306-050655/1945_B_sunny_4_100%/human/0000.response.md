Alright, I've got this problem to solve. Let's see what it's asking for. So, there are two firework launch installations, each launching fireworks at regular intervals: one every 'a' minutes and the other every 'b' minutes. Each firework remains visible in the sky for 'm + 1' minutes after it's launched. I need to find out the maximum number of fireworks that can be seen in the sky at the same time.

First, I need to understand how the fireworks are launched and when they are visible. Let's break it down.

For the first installation:

- Launches a firework every 'a' minutes: at a, 2a, 3a, ..., ka minutes, where k is any positive integer.

Similarly, for the second installation:

- Launches a firework every 'b' minutes: at b, 2b, 3b, ..., lb minutes, where l is any positive integer.

Each firework is visible from the time it's launched up to m minutes after its launch. So, a firework launched at time t is visible from t to t + m, inclusive.

I need to find a time when the maximum number of these fireworks are visible in the sky.

Let me consider the visibility periods of the fireworks from both installations and see how they overlap.

One approach could be to consider all possible launch times and see how many visibility periods overlap at any given time. But since the numbers can be up to 10^18, it's impractical to iterate through all possible times.

I need a smarter way to calculate the maximum number of overlapping visibility periods.

Let me think about the launch times and their visibility periods.

For the first installation:

- Fireworks are launched at multiples of 'a': a, 2a, 3a, ...

- Each firework is visible from t to t + m, where t is a multiple of 'a'.

Similarly, for the second installation:

- Fireworks are launched at multiples of 'b': b, 2b, 3b, ...

- Each firework is visible from t to t + m, where t is a multiple of 'b'.

I need to find a time when the number of visibility periods overlapping is maximized.

I recall that in scheduling problems, to find the maximum number of overlapping intervals, one can sort the start and end times and keep a running count of active intervals.

But again, with large values up to 10^18, sorting is not feasible.

I need to find a mathematical way to calculate this.

Let's consider the number of fireworks from each installation that are visible at a certain time.

For a given time t, the number of fireworks from the first installation visible at t is the number of launch times k*a such that k*a <= t <= k*a + m.

Similarly, for the second installation, it's the number of launch times l*b such that l*b <= t <= l*b + m.

So, for a specific t, the total number of visible fireworks is the sum of these two counts.

I need to maximize this sum over all possible t.

But calculating this for every t is not practical due to the large range.

I need to find a way to compute this efficiently.

Let me consider the possible times when the number of visible fireworks can change.

The visibility periods start at multiples of 'a' and 'b' and end at t + m for each launch time t.

So, the possible times when the number of visible fireworks changes are at multiples of 'a', multiples of 'b', and at t + m for these multiples.

But again, with large 'a', 'b', and 'm', iterating through all these times is not feasible.

I need a different approach.

Let me think about the problem differently.

Suppose I fix a time t.

The number of fireworks from the first installation visible at t is the number of k such that k*a <= t <= k*a + m, which is equivalent to (t - m)/a <= k <= t/a.

Similarly, for the second installation, it's (t - m)/b <= l <= t/b.

Since k and l must be integers, the number of visible fireworks from the first installation is floor(t/a) - floor((t - m)/a), and similarly for the second installation.

Wait, that seems promising.

Let me formalize this.

For the first installation, the number of visible fireworks at time t is floor(t/a) - floor((t - m)/a).

Similarly, for the second installation, it's floor(t/b) - floor((t - m)/b).

So, the total number of visible fireworks at time t is:

floor(t/a) - floor((t - m)/a) + floor(t/b) - floor((t - m)/b)

I need to maximize this expression over all t.

But m can be up to 10^18, and a and b can be up to 10^18 as well.

I need to find the maximum value of this expression efficiently.

I recall that the expression floor(t/x) - floor((t - m)/x) represents the number of multiples of x that are in the interval [t - m, t].

So, this is essentially counting the number of launch times from each installation whose visibility periods overlap with time t.

I need to maximize the sum of these counts for both installations.

But how do I choose t to maximize this sum?

Let me consider the possible values of t where the expression might achieve its maximum.

I need to look for t where both floor(t/a) - floor((t - m)/a) and floor(t/b) - floor((t - m)/b) are maximized.

I know that floor(t/x) - floor((t - m)/x) is equal to ceil((t - (t - m)) / x) = ceil(m / x).

Wait, is that correct?

Actually, floor(t/x) - floor((t - m)/x) can be equal to ceil(m / x), but only if t is chosen appropriately.

Wait, let's think about it.

The maximum value of floor(t/x) - floor((t - m)/x) is floor(m/x) + 1.

Why? Because the difference can be up to floor(m/x) + 1.

Wait, no.

Actually, floor(t/x) - floor((t - m)/x) <= ceil(m / x).

But I need to confirm this.

Let me consider t such that t - (t - m) = m.

Then, floor(t/x) - floor((t - m)/x) <= ceil(m / x).

But I need to verify this.

Let me take an example.

Suppose t = 10, x = 3, m = 4.

Then floor(10/3) = 3, floor((10 - 4)/3) = floor(6/3) = 2.

So, 3 - 2 = 1.

Ceil(4/3) = 2.

So, 1 <= 2 holds.

Another example: t = 10, x = 2, m = 3.

floor(10/2) = 5, floor((10 - 3)/2) = floor(7/2) = 3.

5 - 3 = 2.

Ceil(3/2) = 2.

So, 2 <= 2 holds.

Another example: t = 10, x = 5, m = 5.

floor(10/5) = 2, floor((10 - 5)/5) = floor(5/5) = 1.

2 - 1 = 1.

Ceil(5/5) = 1.

So, 1 <= 1 holds.

Another example: t = 10, x = 4, m = 4.

floor(10/4) = 2, floor((10 - 4)/4) = floor(6/4) = 1.

2 - 1 = 1.

Ceil(4/4) = 1.

Holds.

Another example: t = 10, x = 1, m = 2.

floor(10/1) = 10, floor((10 - 2)/1) = floor(8/1) = 8.

10 - 8 = 2.

Ceil(2/1) = 2.

Holds.

So, in general, floor(t/x) - floor((t - m)/x) <= ceil(m / x).

And there exists a t such that this equality holds.

Therefore, the maximum value of floor(t/x) - floor((t - m)/x) is ceil(m / x).

Similarly, for the other installation, it's ceil(m / b).

Therefore, the maximum total number of visible fireworks is ceil(m / a) + ceil(m / b).

But wait, in the sample input:

6

6 7 4

According to this, ceil(4/6) + ceil(4/7) = 1 + 1 = 2, which matches the first sample output.

Another sample input:

3 4 10

ceil(10/3) + ceil(10/4) = 4 + 3 = 7, which matches the second sample output.

Another sample:

7 8 56

ceil(56/7) + ceil(56/8) = 8 + 7 = 15, but the sample output is 17.

Wait, that doesn't match.

Hmm, perhaps there's more to it.

Wait, maybe I'm missing something.

Let me check the calculation for the third sample.

a = 7, b = 8, m = 56

ceil(56/7) = 8

ceil(56/8) = 7

Sum is 15, but the sample output is 17.

So, my previous assumption is incorrect.

There must be some overlap or something that I'm missing.

Let me think again.

Perhaps the maximum number of visible fireworks is not just the sum of ceil(m/a) and ceil(m/b), but there could be some interaction between the two installations' launch times.

Wait, maybe there are additional fireworks visible due to overlapping visibility periods from both installations.

But I'm not sure.

Let me consider the third sample in more detail.

a = 7, b = 8, m = 56

Launch times for a: 7, 14, 21, 28, 35, 42, 49, 56, 63, ...

Launch times for b: 8, 16, 24, 32, 40, 48, 56, 64, ...

Each firework is visible for m + 1 = 57 minutes.

Wait, no. The problem says each firework is visible for m + 1 minutes, but in the explanation, it says "visible in the sky for m + 1 minutes after launch, i.e., if a firework was launched after x minutes after the installations were turned on, it will be visible every minute from x to x + m, inclusive."

Wait, there seems to be confusion in the problem statement.

It says "visible in the sky for m + 1 minutes after launch", which would mean from t to t + m inclusive, which is m + 1 minutes.

But in the sample explanation, it says "In the first set of input data, the fireworks are visible in the sky for 5 minutes. Since the first installation launches fireworks every 6 minutes, and the second one every 7 minutes, two fireworks launched from the same installation will not be visible in the sky at the same time. At the same time, after 7 minutes from the start of the holiday, one firework from the first and one from the second camp will be visible. Thus, it is possible to see no more than 2 fireworks simultaneously."

Wait, in the first sample, a=6, b=7, m=4.

So, visibility is from t to t + m, which is t to t + 4.

But in the explanation, it says "the fireworks are visible in the sky for 5 minutes."

So, m + 1 = 5, meaning m = 4.

Okay, that matches.

But in the third sample, a=7, b=8, m=56.

So, visibility is from t to t + 56.

The explanation says:

"In the third set of input data, 17 fireworks will be visible after 112 minutes:

* 9 fireworks launched from the first installation at times [56, 63, 70, 77, 84, 91, 98, 105, 112];

* 8 fireworks launched from the second installation at times [56, 64, 72, 80, 88, 96, 104, 112]."

Wait, at time 112:

Fireworks launched at t=56,63,70,77,84,91,98,105,112 are visible from t to t + 56.

So, for t=56: visible from 56 to 112

t=63: 63 to 119

t=70: 70 to 126

t=77: 77 to 133

t=84: 84 to 140

t=91: 91 to 147

t=98: 98 to 154

t=105:105 to 161

t=112:112 to 168

At time t=112:

- Fireworks launched at t=56,63,70,77,84,91,98,105,112 are visible.

Similarly for the second installation:

Fireworks launched at 56,64,72,80,88,96,104,112.

Each of these is visible at t=112.

So, total visible at t=112: 9 + 8 = 17.

But according to my previous assumption, ceil(m/a) + ceil(m/b) = ceil(56/7) + ceil(56/8) = 8 + 7 = 15.

But in reality, at t=112, there are 17 fireworks visible.

So, my assumption is incorrect.

I need to find another way to calculate the maximum number of visible fireworks.

Let me think about how many fireworks from each installation can be visible at the same time.

For the first installation, the number of visible fireworks at time t is floor(t/a) - floor((t - m - 1)/a)

Similarly, for the second installation, it's floor(t/b) - floor((t - m - 1)/b)

Wait, in programming contests, to calculate the number of multiples of a in the range [t - m, t], it's floor(t/a) - floor((t - m -1)/a)

Let me confirm this.

For example, t=10, a=3, m=4.

floor(10/3) = 3 (multiples: 3,6,9)

floor((10 - 4 -1)/3) = floor(5/3) = 1 (multiples: 3,6)

So, 3 - 1 = 2 fireworks visible.

Which matches the earlier example.

Similarly, t=10, a=2, m=3.

floor(10/2) = 5 (2,4,6,8,10)

floor((10 - 3 -1)/2) = floor(6/2) = 3 (2,4,6)

5 - 3 = 2 fireworks visible.

Which is correct.

Another example: t=10, a=5, m=5.

floor(10/5) = 2 (5,10)

floor((10 -5 -1)/5) = floor(4/5) = 0

2 - 0 = 2 fireworks visible.

Which is correct.

So, the formula floor(t/a) - floor((t - m -1)/a) gives the number of fireworks from the first installation visible at time t.

Similarly for the second installation.

Therefore, the total number of visible fireworks at time t is:

floor(t/a) - floor((t - m -1)/a) + floor(t/b) - floor((t - m -1)/b)

I need to maximize this sum over all t.

But how?

I need to find t that maximizes this expression.

Given that a, b, m can be up to 10^18, I need an efficient way to compute this.

I recall that the maximum value of floor(t/a) - floor((t - m -1)/a) is floor(m/a) + 1.

Similarly for b.

Therefore, the maximum total should be floor(m/a) + 1 + floor(m/b) + 1 = floor(m/a) + floor(m/b) + 2.

Let me check this with the third sample.

a=7, b=8, m=56

floor(56/7) = 8

floor(56/8) = 7

So, 8 + 7 + 2 = 17, which matches the sample output.

Similarly, for the first sample:

a=6, b=7, m=4

floor(4/6) = 0

floor(4/7) = 0

0 + 0 + 2 = 2, which matches the first sample output.

Another sample:

a=3, b=4, m=10

floor(10/3) = 3

floor(10/4) = 2

3 + 2 + 2 = 7, which matches the second sample output.

So, it seems that the maximum number of visible fireworks is floor(m/a) + floor(m/b) + 2.

Wait, but why +2?

Because each floor(m/x) gives the number of multiples of x in [1, m], and +1 accounts for the possibility of a firework launched at t=0.

Wait, but in the problem, installations start launching fireworks at t=0?

Wait, no, they start launching at t=a, 2a, 3a, etc., i.e., t >= a.

Wait, perhaps I need to adjust the formula.

Wait, in the third sample, at t=112:

Fireworks from first installation: floor(112/7) - floor((112 -56 -1)/7) = floor(112/7) - floor(55/7) = 16 - 7 = 9

Fireworks from second installation: floor(112/8) - floor((112 -56 -1)/8) = floor(112/8) - floor(55/8) = 14 - 6 = 8

Total: 9 + 8 = 17, which matches the sample.

Similarly, floor(56/7) = 8 and floor(56/8) = 7, so floor(m/a) + floor(m/b) + 2 = 8 + 7 + 2 = 17.

So, it works.

Another example:

a=1, b=1, m=1

floor(1/1) + floor(1/1) + 2 = 1 + 1 + 2 = 4, which matches the fifth sample output.

Similarly, for a=1, b=1, m=1000000000000000000

floor(1000000000000000000 /1) + floor(1000000000000000000 /1) + 2 = 1000000000000000000 + 1000000000000000000 + 2 = 2000000000000000002, which matches the sixth sample output.

So, it seems that the formula floor(m/a) + floor(m/b) + 2 gives the correct maximum number of visible fireworks.

Therefore, in the code, for each test case, read a, b, m, compute floor(m/a) + floor(m/b) + 2, and print it.

Let me look at the provided code:

def func():

t = int(input())

for qi in range(t):

(a, b, m) = [int(x) for x in input().split()]

ans = m // a + m // b + 2

print(ans)

Yes, it's implementing exactly this formula.

So, I think this is correct.

Let me think if there are any edge cases where this might fail.

Edge case 1: a = 1, b = 1, m = 0

floor(0/1) + floor(0/1) + 2 = 0 + 0 + 2 = 2.

But if m = 0, each firework is visible for m + 1 = 1 minute.

At t = 0, fireworks launched at t=0 from both installations are visible from t=0 to t=0.

So, both fireworks are visible at t=0, total 2, which matches the formula.

Edge case 2: a = 1, b = 2, m = 0

floor(0/1) + floor(0/2) + 2 = 0 + 0 + 2 = 2.

At t=0, firework from a at t=0 is visible at t=0.

Firework from b at t=0 is visible at t=0.

Total: 2, which matches.

Edge case 3: a = 2, b = 3, m = 0

floor(0/2) + floor(0/3) + 2 = 0 + 0 + 2 = 2.

At t=0, no fireworks have been launched yet, as first launches are at t=2 and t=3.

So, are there any fireworks visible at t=0?

Wait, the problem says "in the evening at the camp", so perhaps t=0 is considered to have fireworks launched at t=0.

But according to the problem, installations launch fireworks every a and b minutes, starting at t=0.

So, at t=0, both installations launch fireworks, which are visible from t=0 to t=m.

So, if m >=0, these fireworks are visible at t=0.

Therefore, the formula holds.

Another edge case: a = 1, b = 1, m = 1

floor(1/1) + floor(1/1) + 2 = 1 + 1 + 2 = 4.

At t=0, two fireworks launched, visible from t=0 to t=1.

At t=1, two more fireworks launched, visible from t=1 to t=2.

So, at t=1, fireworks from t=0 and t=1 are both visible, total 4, which matches.

Seems correct.

Another edge case: a = 2, b = 3, m = 1

floor(1/2) + floor(1/3) + 2 = 0 + 0 + 2 = 2.

At t=0, fireworks from a and b launched, visible from t=0 to t=1.

At t=2, firework from a launched, visible from t=2 to t=3.

At t=3, firework from b launched, visible from t=3 to t=4.

So, at t=0, t=1, t=2, t=3, the number of visible fireworks is:

t=0: fireworks from a and b launched at t=0 visible from t=0 to t=1: total 2

t=1: fireworks from a and b launched at t=0 and t=1 (if any)

Wait, t=1: fireworks from t=0 are still visible (t=0 to t=1), and no new fireworks launched at t=1, since a=2 and b=3.

So, only fireworks from t=0 are visible at t=1: total 2.

t=2: firework from a launched at t=2 visible from t=2 to t=3, and firework from t=0 is no longer visible. So, only the firework from t=2 is visible: total 1.

t=3: firework from b launched at t=3 visible from t=3 to t=4, and firework from a launched at t=2 is still visible from t=2 to t=3. So, total 2.

So, the maximum is 2, which matches the formula floor(1/2) + floor(1/3) + 2 = 0 + 0 + 2 = 2.

Good.

Another edge case: a=5, b=10, m=4

floor(4/5) + floor(4/10) + 2 = 0 + 0 + 2 = 2.

At t=0, fireworks from a and b launched, visible from t=0 to t=4.

At t=5, firework from a launched, visible from t=5 to t=9.

At t=10, firework from a and b launched, visible from t=10 to t=14.

At t=4, fireworks from t=0 are visible, total 2.

At t=5, fireworks from t=0 (a) and t=5 (a) are visible, but m=4, so t=0 to t=4, and t=5 to t=9.

At t=5, firework from t=0 is not visible anymore, as t=0 + m =4 <5.

So, only firework from t=5 is visible: total 1.

At t=10, fireworks from t=10 (a and b) are visible, and firework from t=5 (a) is visible from t=5 to t=9, which does not include t=10.

So, only fireworks from t=10 are visible: total 2.

So, maximum is 2, which matches the formula.

Seems correct.

Another test: a=2, b=2, m=2

floor(2/2) + floor(2/2) + 2 = 1 + 1 + 2 = 4.

At t=0, fireworks from a and b launched, visible from t=0 to t=2.

At t=2, fireworks from a and b launched, visible from t=2 to t=4.

At t=1, fireworks from t=0 are visible: total 2.

At t=2, fireworks from t=0 and t=2 are visible: total 4.

So, maximum is 4, which matches the formula.

Good.

I think this formula is correct.

Therefore, the given program is correct.

**Final Answer**

\[ \boxed{\text{See explanation for the solution code.}} \]

**Correctness: True**