Alright, I have this problem to solve. Let's see what it's asking for. So, there are two firework launch installations, each launching fireworks at regular intervals: one every 'a' minutes and the other every 'b' minutes. Each firework remains visible in the sky for 'm + 1' minutes after it's launched. I need to find out the maximum number of fireworks that can be seen in the sky at the same time.

First, I need to understand how the fireworks are launched and when they are visible. Let's consider the launch times:

- The first installation launches at times: a, 2a, 3a, ..., ka, etc.

- The second installation launches at times: b, 2b, 3b, ..., lb, etc.

Each firework launched at time t is visible from t to t + m inclusive. So, the visibility period for each firework is m + 1 minutes.

I need to find a time when the number of visible fireworks is maximized. That means finding a time t where the overlap of visibility periods from both installations is greatest.

Let me think about how to approach this. One way is to consider the rate at which fireworks are launched and how their visibility periods overlap.

First, for a single installation, the number of visible fireworks at any time t is the number of launch times k*a such that t - m <= k*a <= t.

Since a and b are generally different, I need to consider both installations together.

I recall that in similar problems, the key is to look at the least common multiple (LCM) of a and b to find when both installations launch simultaneously. But in this case, since a and b may not have a common multiple within the visibility period, I need to be careful.

Wait, actually, in the problem, it's possible that a and b are such that their launch times coincide at certain times, which would increase the number of visible fireworks.

But more importantly, I need to consider the density of launches within the visibility window.

Let me consider the number of launches from each installation that can have their fireworks visible at the same time t.

For installation a:

Number of launches whose fireworks are visible at t is floor((t + m)/a) - floor(t/a)

Similarly for installation b: floor((t + m)/b) - floor(t/b)

So, the total number of visible fireworks at time t is the sum of these two.

I need to maximize this sum over all possible t.

But since m can be up to 1e18 and a and b can be up to 1e18, I need an efficient way to compute this without iterating over all possible t.

I think the maximum occurs when t is such that both installations have as many launches as possible within the visibility window.

Let me consider the possible overlaps.

Case 1: a and b are co-prime (no common divisors other than 1).

In this case, the launches rarely coincide, so the maximum should be the sum of the individual maximums.

Case 2: a and b have a common multiple within the visibility window.

In this case, there might be multiple launches from both installations within the same visibility window.

Wait, but in the example provided, for a=6, b=7, m=4, the output is 2, which makes sense because the visibility period is 5 minutes, and launches are every 6 and 7 minutes, so at most two fireworks can be visible at the same time.

In another example, a=7, b=8, m=56, the output is 17, which seems higher because the visibility period is longer relative to the launch intervals.

So, perhaps the formula is related to the number of launches from each installation that can occur within the visibility window.

Let me think about it mathematically.

For installation a, the number of launches within the visibility window is floor((t + m)/a) - floor(t/a)

Similarly for b.

To maximize the sum, I need to choose t such that both floor((t + m)/a) - floor(t/a) and floor((t + m)/b) - floor(t/b) are maximized.

I recall that for any real number x, floor(x) is the greatest integer less than or equal to x.

So, floor((t + m)/a) - floor(t/a) can be at most ceil(m/a), I think.

Wait, no. Actually, it can be floor((t + m)/a) - floor(t/a) <= floor(m/a) + 1

Because (t + m)/a - t/a = m/a, and floor is involved.

So, the maximum possible for each installation is floor(m/a) + 1.

Similarly for b.

Therefore, a naive upper bound would be floor(m/a) + 1 + floor(m/b) + 1 = floor(m/a) + floor(m/b) + 2

But in the first example, a=6, b=7, m=4, floor(4/6)=0, floor(4/7)=0, so 0 + 0 + 2 = 2, which matches the sample output.

In the third example, a=7, b=8, m=56, floor(56/7)=8, floor(56/8)=7, so 8 + 7 + 2 = 17, which again matches the sample output.

Wait, but in the second sample input, a=3, b=4, m=10, floor(10/3)=3, floor(10/4)=2, so 3 + 2 + 2 = 7, which matches the sample output.

Similarly, in the fourth sample input, a=5, b=6, m=78123459896, floor(78123459896/5)=15624691979.2, so 15624691979, floor(78123459896/6)=13020576649.333, so 13020576649, sum plus 2 is 15624691979 + 13020576649 + 2 = 28645268630, which matches the sample output.

In the fifth sample input, a=1, b=1, m=1, floor(1/1)=1, so 1 + 1 + 2 = 4, which matches the sample output.

In the sixth sample input, a=1, b=1, m=1000000000000000000, floor(1000000000000000000/1)=1000000000000000000, so 1000000000000000000 + 1000000000000000000 + 2 = 2000000000000000002, which matches the sample output.

So, it seems that the formula floor(m/a) + floor(m/b) + 2 gives the correct answer in all the sample inputs.

Wait, but in the first sample input, m=4, a=6, floor(4/6)=0, floor(4/7)=0, so 0 + 0 + 2 = 2.

But according to the explanation in the note, after 7 minutes, one firework from each installation is visible. So, at t=7, floor((7+4)/6) - floor(7/6) = floor(11/6) - floor(7/6) = 1 - 1 = 0? Wait, that doesn't make sense.

Wait, perhaps I need to adjust the formula.

Let me recast the formula.

The number of launches from a visible at time t is floor((t + m)/a) - floor(t/a)

Similarly for b.

I need to maximize floor((t + m)/a) - floor(t/a) + floor((t + m)/b) - floor(t/b)

I need to find t that maximizes this sum.

I thought that choosing t=0 might be optimal, but in the first sample input, at t=0:

floor((0 + 4)/6) - floor(0/6) = floor(4/6) - 0 = 0 - 0 = 0

floor((0 + 4)/7) - floor(0/7) = floor(4/7) - 0 = 0 - 0 = 0

Total: 0 + 0 = 0

But in the note, at t=112, it's 9 + 8 = 17.

Wait, perhaps t=LCM(a,b) or something like that.

Wait, but in the first sample input, LCM(6,7)=42, but at t=42:

floor((42 + 4)/6) - floor(42/6) = floor(46/6) - floor(42/6) = 7 - 7 = 0

floor((42 + 4)/7) - floor(42/7) = floor(46/7) - floor(42/7) = 6 - 6 = 0

Total: 0 + 0 = 0

But according to the note, at t=112, for a=7 and b=8, it's 9 + 8 = 17.

Wait, perhaps I need to choose t such that t is just after a launch from both installations.

Wait, maybe t is such that t mod a <= m and t mod b <= m.

Wait, perhaps I need to consider the number of launches from a in the interval [t - m, t]

Similarly for b.

So, the number of launches from a in [t - m, t] is floor(t/a) - floor((t - m)/a)

Similarly for b.

So, to maximize the sum, I need to maximize floor(t/a) - floor((t - m)/a) + floor(t/b) - floor((t - m)/b)

I need to find t that maximizes this sum.

I recall that floor(x) - floor(y) = floor(x - y) only under certain conditions, so that might not help directly.

Alternatively, perhaps I can think in terms of the number of multiples of a and b that fall within the interval [t - m, t]

So, for a: floor(t/a) - floor((t - m)/a)

Similarly for b.

I need to maximize floor(t/a) - floor((t - m)/a) + floor(t/b) - floor((t - m)/b)

I need to find t that maximizes this expression.

I think that the maximum occurs when t is such that t is a multiple of a and b as much as possible within the visibility window.

But since a and b may not have a common multiple within the visibility window, I need to consider the individual contributions.

Wait, perhaps I can consider t such that t is a multiple of a and t - m is just before a multiple of a, to maximize floor(t/a) - floor((t - m)/a)

Similarly for b.

Wait, let's consider t such that t is a multiple of a and t is a multiple of b.

In that case, floor(t/a) - floor((t - m)/a) = floor(t/a) - floor((t - m)/a)

Since t is a multiple of a, floor(t/a) = t/a

And floor((t - m)/a) = floor(t/a - m/a) = floor(k - m/a), where k = t/a

So, floor(k - m/a) = k - ceil(m/a)

Therefore, floor(t/a) - floor((t - m)/a) = k - (k - ceil(m/a)) = ceil(m/a)

Similarly for b.

So, in this case, the sum would be ceil(m/a) + ceil(m/b)

But in the first sample input, ceil(4/6)=1, ceil(4/7)=1, sum=2, which matches.

In the third sample input, ceil(56/7)=8, ceil(56/8)=7, sum=15, but in the note, it's 17.

Wait, that doesn't match.

Wait, perhaps I made a mistake.

Wait, in the third sample input, a=7, b=8, m=56

ceil(56/7)=8, ceil(56/8)=7, sum=15, but in the note, it's 1,7

Wait, perhaps there is an overlap when t is a multiple of both a and b, but in this case, LCM(7,8)=56, so t=56k for integer k.

At t=56, floor(56/7)=8, floor((56 - 56)/7)=floor(0/7)=0, so 8 - 0=8 from a

floor(56/8)=7, floor((56 - 56)/8)=0, so 7 - 0=7 from b

Total: 8 + 7=15, but in the note, it's 17.

Wait, perhaps I need to consider that at t=56, the firework launched at t=56 is visible until t=56 + 56=112

Wait, no, m=56, so visibility is t to t + m inclusive, which is 56 to 56 + 56=112

So, at t=112, fireworks launched from a at times: 56, 63, 70, 77, 84, 91, 98, 105, 112

From b at times: 56, 64, 72, 80, 88, 96, 104, 112

So, 9 from a and 8 from b, total 17.

Wait, but according to my earlier formula, floor(112/7) - floor((112 - 56)/7)=floor(16) - floor(8)=16 - 8=8 from a

floor(112/8) - floor((112 - 56)/8)=floor(14) - floor(7)=14 - 7=7 from b

Total: 8 + 7=15, but in reality, it's 9 + 8=17.

So, my formula is missing something.

Wait, perhaps I need to adjust the formula to include t + m in the visibility.

Wait, let's see: floor((t + m)/a) - floor(t/a)

Wait, no, actually, the number of launches from a where k*a is in [t - m, t]

Which is floor(t/a) - floor((t - m)/a)

Wait, but in the note, at t=112, for a=7, m=56:

floor(112/7)=16, floor((112 - 56)/7)=floor(56/7)=8, so 16 - 8=8

But according to the list, there are 9 launches from a in [56, 112]

Wait, perhaps I'm miscalculating.

Wait, t - m = 112 - 56=56, t=112

floor(112/7)=16, floor(56/7)=8, 16 - 8=8

But in the list, launches at 56, 63, 70, 77, 84, 91, 98, 105, 112: that's 9 launches.

Wait, that's odd, because 112/7=16, 56/7=8, 16 - 8=8, but there are 9 launches.

Wait, perhaps floor(t/a) includes t=112, but (t - m)/a=56/7=8, so floor(t/a)=16, floor((t - m)/a)=8, 16 - 8=8

But in reality, there are 9 launches in [56, 112], which are k=8 to k=16, that's 16 - 7=9 launches.

Wait, k ranges from ceil(56/7)=8 to floor(112/7)=16, inclusive, which is 16 - 8 + 1=9 launches.

So, the correct formula should be floor((t + m)/a)/a - ceil(t/a - m/a)

Wait, perhaps I need to use ceil and floor appropriately.

I think I need to find the number of k such that k*a is in [t - m, t]

Which is floor(t/a) - ceil((t - m)/a) + 1

Wait, no, it's floor((t + m)/a) - ceil(t/a - m/a)

Wait, more precisely, the number of k where k*a >= t - m and k*a <= t

Which is ceil((t - m)/a) to floor(t/a), inclusive

So, floor(t/a) - ceil((t - m)/a) + 1

Similarly for b.

So, the total number is floor(t/a) - ceil((t - m)/a) + 1 + floor(t/b) - ceil((t - m)/b) + 1

But in the note, at t=112, for a=7, m=56:

ceil((112 - 56)/7)=ceil(56/7)=8, floor(112/7)=16, so 16 - 8 + 1=9

Similarly for b=8:

ceil((112 - 56)/8)=ceil(56/8)=7, floor(112/8)=14, so 14 - 7 + 1=8

Total: 9 + 8=17, which matches the note.

So, my earlier formula was incorrect; it should be floor(t/a) - ceil((t - m)/a) + 1 for a, and similarly for b.

Therefore, the sum is [floor(t/a) - ceil((t - m)/a) + 1] + [floor(t/b) - ceil((t - m)/b) + 1]

Simplify: floor(t/a) - ceil((t - m)/a) + floor(t/b) - ceil((t - m)/b) + 2

I need to maximize this sum over t.

But this seems complicated. Is there a better way?

Wait, perhaps I can consider that ceil(x) = floor(x + epsilon), or equivalently, ceil(x) = -floor(-x)

So, ceil((t - m)/a) = floor((t - m)/a + epsilon), but since (t - m)/a may not be integer, I need to handle it carefully.

Alternatively, perhaps I can consider t such that t is a multiple of a and b, to maximize the overlaps.

Wait, perhaps I can consider that the maximum occurs when t is a multiple of the least common multiple (LCM) of a and b.

But in the first sample input, LCM(6,7)=42, but at t=42, floor(42/6)=7, ceil((42 - 4)/6)=ceil(38/6)=ceil(6.333)=7, so 7 - 7 + 1=1 from a

Similarly for b: floor(42/7)=6, ceil((42 - 4)/7)=ceil(38/7)=ceil(5.428)=6, so 6 - 6 + 1=1

Total: 1 + 1=2, which matches the first sample.

In the third sample input, a=7, b=8, m=56, t=112, which is LCM(7,8)=56, so t=2*56=112.

As calculated earlier, it gives 9 + 8=17, which matches the note.

So, perhaps choosing t to be a multiple of LCM(a,b) maximizes the sum.

But I need to confirm if this is always the case.

Wait, in the second sample input, a=3, b=4, m=10

LCM(3,4)=12

At t=12:

floor(12/3)=4, ceil((12 - 10)/3)=ceil(2/3)=1, so 4 - 1 + 1=4

floor(12/4)=3, ceil((12 - 10)/4)=ceil(2/4)=1, so 3 - 1 + 1=3

Total: 4 + 3=7, which matches the sample output.

Another option is to choose t such that t is as large as possible, but since there's no upper limit, I need to find a general formula.

Wait, but m can be up to 1e18, and a and b can be up to 1e18, so I need an efficient way to compute this without iterating over t.

I think that choosing t to be a multiple of LCM(a,b) maximizes the number of visible fireworks.

So, let's define L = LCM(a,b)

Then, choose t = k*L for some integer k.

Then, for a:

floor(t/a) - ceil((t - m)/a) + 1 = floor(k*L/a) - ceil((k*L - m)/a) + 1

Similarly for b.

But since L is LCM(a,b), L/a and L/b are integers.

Let’s denote LA = L / a, LB = L / b

Then, floor(k*L/a) = k*LA

ceil((k*L - m)/a) = ceil(k*LA - m/a)

So, floor(t/a) - ceil((t - m)/a) + 1 = k*LA - ceil(k*LA - m/a) + 1

This seems complicated. Maybe there's a better way.

Alternatively, perhaps I can compute floor((t + m)/a) - floor(t/a)

Wait, no, earlier I had floor(t/a) - ceil((t - m)/a) + 1

Wait, perhaps I need to think differently.

I recall that the maximum number of visible fireworks is floor(m/a) + floor(m/b) + 2 when a and b are co-prime, but in the third sample input, a=7, b=8, which are co-prime, and floor(56/7)=8, floor(56/8)=7, sum=8 + 7 + 2=17, which matches.

But in the first sample input, floor(4/6)=0, floor(4/7)=0, sum=0 + 0 + 2=2, which matches.

In the second sample input, floor(10/3)=3, floor(10/4)=2, sum=3 + 2 + 2=7, which matches.

So, it seems that the general formula is floor(m/a) + floor(m/b) + 2

But wait, in the third sample input, floor(56/7)=8, floor(56/8)=7, sum=8 + 7 + 2=17, which matches.

Similarly, in the fourth sample input, floor(78123459896/5)=15624691979, floor(78123459896/6)=13020576649, sum=15624691979 + 13020576649 + 2=28645268628, but the sample output is 28645268630.

Wait, that's off by 2.

So, perhaps the formula is floor((m + a - 1)/a) + floor((m + b - 1)/b) + 2

Wait, for a=7, b=8, m=56:

floor((56 + 6)/7)=floor(62/7)=8

floor((56 + 7)/8)=floor(63/8)=7

Sum=8 + 7 + 2=17, which matches.

In the fourth sample input, floor((78123459896 + 4)/5)=floor(78123459900/5)=15624691980

floor((78123459896 + 5)/6)=floor(78123459901/6)=13020576650

Sum=15624691980 + 13020576650 + 2=28645268632, but the sample output is 28645268630, which is off by 2.

Wait, perhaps I need to adjust the formula.

Wait, perhaps it's floor((t + m)/a) - floor(t/a) + floor((t + m)/b) - floor(t/b)

And to maximize this, choose t such that t is a multiple of a and b.

Wait, for t multiple of a and b, floor(t/a)=t/a, floor(t/b)=t/b

floor((t + m)/a)=floor(t/a + m/a)=floor(t/a) + floor(m/a) + 1 if m/a is not integer, else floor(m/a)

Wait, more precisely, floor((t + m)/a)=floor(t/a + m/a)=floor(t/a) + floor(m/a + t/a - floor(t/a))

But this seems too complicated.

Alternatively, perhaps I can consider that for t multiple of a and b, the expression simplifies.

Wait, perhaps I can consider that for t=k*L, where L=LCM(a,b), then t is a multiple of both a and b.

Then, floor(t/a)=t/a, floor(t/b)=t/b

floor((t + m)/a)=floor(t/a + m/a)=floor(t/a + m/a)=t/a + floor(m/a)

Similarly, floor((t + m)/b)=t/b + floor(m/b)

So, floor((t + m)/a) - floor(t/a)=floor(m/a)

Similarly, floor((t + m)/b) - floor(t/b)=floor(m/b)

So, the total is floor(m/a) + floor(m/b)

But in the first sample input, floor(4/6)=0, floor(4/7)=0, sum=0 + 0=0, but the sample output is 2.

Wait, that doesn't match.

So, perhaps I need to adjust the formula.

Wait, perhaps it's floor((t + m)/a) - floor(t/a) + floor((t + m)/b) - floor(t/b)

At t=0: floor(m/a) + floor(m/b)

At t=k*L, floor((k*L + m)/a) - floor(k*L/a) + floor((k*L + m)/b) - floor(k*L/b)

Which is floor(k*L/a + m/a) - k*(L/a) + floor(k*L/b + m/b) - k*(L/b)

Since L/a and L/b are integers, floor(k*L/a + m/a)=k*(L/a) + floor(m/a)

Similarly, floor(k*L/b + m/b)=k*(L/b) + floor(m/b)

So, floor((k*L + m)/a) - floor(k*L/a)=k*(L/a) + floor(m/a) - k*(L/a)=floor(m/a)

Similarly for b.

So, the sum is floor(m/a) + floor(m/b)

But in the first sample input, this would be 0 + 0=0, but the sample output is 2.

So, there must be something wrong with this approach.

Wait, perhaps I need to consider that m + 1 is the visibility period, so m + 1 minutes.

Wait, in the problem statement, it says each firework is visible from x to x + m inclusive, which is m + 1 minutes.

So, perhaps I need to consider floor((t + m)/a) - floor(t/a)

Similarly for b.

And the sum is floor((t + m)/a) - floor(t/a) + floor((t + m)/b) - floor(t/b)

I need to maximize this sum over t.

I think that choosing t such that t is just after as many launches as possible.

Wait, perhaps I need to consider that floor((t + m)/a) - floor(t/a) is equal to floor((t + m)/a) - floor(t/a) = floor((t mod a + m)/a)

Wait, no, that's not generally true.

Alternatively, perhaps I can consider that floor((t + m)/a) - floor(t/a) is equal to ceil((t mod a + m)/a)

Wait, I'm getting confused.

Let me look for a different approach.

I recall that in similar problems, the maximum number of overlapping events can be found by considering the event with the earliest end time.

But in this case, it's continuous time with discrete launches.

Wait, perhaps I can model this as a timeline where each launch contributes a segment of visibility.

But with a=1e18, b=1e18, m=1e18, I need something efficient.

Wait, perhaps I can consider that for each installation, the number of launches visible at time t is floor((t + m)/a) - floor(t/a)

Similarly for b.

And I need to maximize the sum over t.

I think that the maximum occurs when t is such that t mod a <= m and t mod b <= m.

In other words, t is within m minutes of a multiple of a and within m minutes of a multiple of b.

So, t satisfies t mod a <= m and t mod b <= m.

I need to find such a t that maximizes the sum floor((t + m)/a) - floor(t/a) + floor((t + m)/b) - floor(t/b)

Wait, perhaps I can consider that floor((t + m)/a) - floor(t/a) = floor((t mod a + m)/a)

Similarly for b.

Wait, no, floor((t + m)/a) - floor(t/a) = floor(t/a + m/a) - floor(t/a) = floor(m/a + frac(t/a))

Where frac(x) is the fractional part of x.

But since floor(x) - floor(y) isn't directly helpful, perhaps I need to consider specific cases.

Let me consider a=6, b=7, m=4.

At t=7:

floor((7 + 4)/6) - floor(7/6) = floor(11/6) - 1 = 1 - 1 = 0

floor((7 + 4)/7) - floor(7/7) = floor(11/7) - 1 = 1 - 1 = 0

Total: 0 + 0 = 0

But according to the note, at t=7, two fireworks are visible.

Wait, perhaps I need to consider that the fireworks launched at t=0 and t=7 from installation b.

Wait, but t=0 from installation a is visible from 0 to 4, and t=7 from installation b is visible from 7 to 11.

So, at t=7, the firework from a launched at t=6 is visible from 6 to 10, and from b at t=7 visible from 7 to 11.

So, at t=7, both are visible.

But according to my formula, it's 0 + 0=0, but according to the note, it's 2.

So, perhaps my formula is incorrect.

Wait, perhaps I need to consider the number of launches whose visibility overlaps t.

So, for installation a, the number of launches k where t - m <= k*a <= t

Similarly for b.

So, k*a >= t - m => k >= ceil((t - m)/a)

k*a <= t => k <= floor(t/a)

So, the number of launches from a is floor(t/a) - ceil((t - m)/a) + 1

Similarly for b.

So, the total is [floor(t/a) - ceil((t - m)/a) + 1] + [floor(t/b) - ceil((t - m)/b) + 1]

I need to maximize this sum over t.

In the first sample input, a=6, b=7, m=4

At t=7:

floor(7/6)=1, ceil((7-4)/6)=ceil(3/6)=1, so 1 - 1 + 1=1 from a

floor(7/7)=1, ceil((7-4)/7)=ceil(3/7)=1, so 1 - 1 + 1=1 from b

Total: 1 + 1=2, which matches the note.

At t=0:

floor(0/6)=0, ceil((0-4)/6)=ceil(-4/6)=-1, so 0 - (-1) + 1=2 from a

floor(0/7)=0, ceil((0-4)/7)=ceil(-4/7)=-1, so 0 - (-1) + 1=2 from b

Total: 2 + 2=4, but according to the note, it should be 2.

Wait, perhaps I need to adjust the formula for ceil((t - m)/a)

Wait, ceil((t - m)/a)=ceil((t - m)/a)

But for t < m, t - m < 0, so ceil((t - m)/a) could be negative.

Wait, perhaps I need to set floor((t - m)/a) + 1, but only if t - m >= 0.

Wait, perhaps the correct formula is floor(t/a) - floor((t - m - 1)/a)

This is a standard formula for the number of multiples of a in [t - m, t]

Similarly for b.

So, the number of launches from a visible at t is floor(t/a) - floor((t - m - 1)/a)

Similarly for b.

So, the total is [floor(t/a) - floor((t - m - 1)/a)] + [floor(t/b) - floor((t - m - 1)/b)]

I need to maximize this sum over t.

In the first sample input, a=6, b=7, m=4

At t=7:

floor(7/6)=1, floor((7 - 4 - 1)/6)=floor(2/6)=0, so 1 - 0=1 from a

floor(7/7)=1, floor((7 - 4 - 1)/7)=floor(2/7)=0, so 1 - 0=1 from b

Total: 1 + 1=2, which matches.

At t=6:

floor(6/6)=1, floor((6 - 4 - 1)/6)=floor(1/6)=0, so 1 - 0=1 from a

floor(6/7)=0, floor((6 - 4 - 1)/7)=floor(1/7)=0, so 0 - 0=0 from b

Total: 1 + 0=1

At t=0:

floor(0/6)=0, floor((0 - 4 - 1)/6)=floor(-5/6)=floor(-0.833)=-1, so 0 - (-1)=1 from a

floor(0/7)=0, floor((0 - 4 - 1)/7)=floor(-5/7)=floor(-0.714)=-1, so 0 - (-1)=1 from b

Total: 1 + 1=2

Wait, but according to the note, at t=7, two fireworks are visible, but at t=0, only two fireworks are visible, but in reality, at t=0, the firework launched at t=0 from a is visible from t=0 to t=4, and from b, nothing is launched before t=0 + m =4, so only one firework is visible.

Wait, perhaps there's confusion in the formula.

Wait, perhaps the correct formula is floor((t + m)/a) - floor(t/a) + floor((t + m)/b) - floor(t/b)

Wait, but earlier it didn't match.

Wait, perhaps I need to consider that floor((t + m)/a) - floor(t/a) is the number of launches from a that have launched in the interval (t, t + m]

But I need the number of launches that have launched in [t - m, t]

Wait, I'm getting tangled.

Let me look for an alternative approach.

I recall that in similar problems, the maximum number of overlapping intervals can be found by sorting the start and end times and keeping a counter.

But with a=1e18, b=1e18, m=1e18, I can't simulate that.

I need a mathematical formula.

Wait, perhaps I can consider that for installation a, the number of launches visible at time t is floor((t + m)/a) - floor(t/a)

Similarly for b.

So, the total is floor((t + m)/a) - floor(t/a) + floor((t + m)/b) - floor(t/b)

I need to maximize this sum over t.

I think that the maximum occurs when t is such that t mod a <= m and t mod b <= m.

In other words, t is within m minutes of a multiple of a and within m minutes of a multiple of b.

So, I need to find t that satisfies both conditions.

This can be formulated as finding t such that t ≡ r_a (mod a), where 0 <= r_a <= m

And t ≡ r_b (mod b), where 0 <= r_b <= m

This is a system of congruences that can be solved using the Chinese Remainder Theorem, but only if a and b are co-prime.

But in general, since a and b may not be co-prime, it's more complicated.

Alternatively, perhaps I can consider that the maximum number of visible fireworks is floor(m/a) + floor(m/b) + 2

But in the fourth sample input, floor(78123459896/5)=15624691979, floor(78123459896/6)=13020576649, sum=15624691979 + 13020576649 + 2=28645268628, but the sample output is 28645268630, which is off by 2.

Wait, perhaps I need to add floor(m % a == 0) + floor(m % b == 0) to account for exact multiples.

Wait, in the fourth sample input, m=78123459896, a=5, b=6

m % 5=1, m % 6=4, neither is zero, so sum would be 15624691979 + 13020576649 + 0 + 2=28645268630, which matches the sample output.

In the first sample input, m=4, a=6, b=7

floor(4/6)=0, floor(4/7)=0, plus floor(4 % 6 == 0)=0, floor(4 % 7 == 0)=0, plus 2, sum=2, which matches.

In the third sample input, m=56, a=7, b=8

