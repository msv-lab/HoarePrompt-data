Alright, I've got this problem to solve. Let's see what it's asking for. So, there are two firework installations, each launching fireworks at regular intervals: one every 'a' minutes and the other every 'b' minutes. Each firework remains visible in the sky for 'm + 1' minutes after it's launched. I need to find out the maximum number of fireworks that can be seen in the sky at the same time.

First, I need to understand how the fireworks are launched and when they are visible. Let's consider the launch times:

- The first installation launches at times: a, 2a, 3a, and so on.

- The second installation launches at times: b, 2b, 3b, and so on.

Each firework is visible from the launch time up to m minutes after the launch time, inclusive. So, if a firework is launched at time x, it's visible from time x to x + m.

I need to find a time when the maximum number of fireworks are visible in the sky. That means finding a time t where the number of fireworks launched from both installations that are still visible at time t is maximized.

Let's think about how to approach this.

One way is to consider the visibility periods of the fireworks from both installations and see how they overlap.

Let me consider the first installation:

- Fireworks are launched at times a, 2a, 3a, ...

- Each is visible from t to t + m, where t is the launch time.

Similarly for the second installation:

- Fireworks are launched at times b, 2b, 3b, ...

- Each is visible from t to t + m, where t is the launch time.

I need to find a time t where the number of overlapping visibility periods is maximized.

This seems a bit tricky, especially since a, b, and m can be up to 10^18, which suggests that I need an efficient mathematical approach rather than simulating over time.

Let me try to think about it differently. Suppose I fix a time t, and I want to know how many fireworks from each installation are visible at that time.

For the first installation, a firework launched at ka (where k is a positive integer) is visible at time t if:

ka ≤ t ≤ ka + m

Similarly, for the second installation, a firework launched at lb (where l is a positive integer) is visible at t if:

lb ≤ t ≤ lb + m

So, for a given t, the number of visible fireworks from the first installation is the number of k such that ka ≤ t ≤ ka + m, and from the second installation is the number of l such that lb ≤ t ≤ lb + m.

I need to maximize the sum of these two quantities over all possible t.

Let me try to find expressions for the number of visible fireworks from each installation at time t.

For the first installation:

The number of k such that ka ≤ t ≤ ka + m is equivalent to:

number of k where ka ≤ t and t ≤ ka + m

Which can be rewritten as:

ka ≤ t and ka ≤ t - m

Wait, that doesn't seem right. Let's think again.

Actually, ka ≤ t ≤ ka + m

So, for a given t, the number of k where ka ≤ t and ka + m ≥ t.

Wait, more precisely:

ka ≤ t and ka ≤ t - m

No, that's not correct. Let's solve for k:

ka ≤ t and ka + m ≥ t

Which implies:

k ≤ t / a (since ka ≤ t)

and

k ≥ ceil((t - m)/a) (since ka + m ≥ t => ka ≥ t - m => k ≥ ceil((t - m)/a))

So, the number of k is floor(t / a) - ceil((t - m)/a) + 1

Similarly, for the second installation, the number of l is floor(t / b) - ceil((t - m)/b) + 1

Therefore, the total number of visible fireworks at time t is:

(floor(t / a) - ceil((t - m)/a) + 1) + (floor(t / b) - ceil((t - m)/b) + 1)

I need to maximize this expression over t.

This seems complicated. Maybe there's a better way to approach this.

Let me consider the possible values of t where events happen, i.e., where a firework is launched or becomes invisible.

Key events are at times that are multiples of a or b, and at times that are launch times plus m.

So, events occur at:

- ka for k = 1, 2, 3, ...

- lb for l = 1, 2, 3, ...

- ka + m for k = 1, 2, 3, ...

- lb + m for l = 1, 2, 3, ...

The maximum number of fireworks in the sky is likely to occur at one of these event times because that's when the number of visible fireworks can change.

So, perhaps I should consider t to be one of these event times and calculate the number of visible fireworks at those times.

But with a, b, and m up to 10^18, I can't iterate through all possible t. I need a smarter way.

Let me consider the least common multiple (LCM) of a and b, denoted as LCM(a, b). The patterns of launches repeat every LCM(a, b) minutes.

If I can find the maximum number of visible fireworks within one period of LCM(a, b), that should be sufficient because the pattern repeats.

However, since LCM(a, b) can be up to 10^18 * 10^18, which is way too large, this approach isn't feasible.

I need another way.

Let me consider the problem in terms of time intervals.

For the first installation, the visibility intervals are [ka, ka + m] for each k.

For the second installation, the visibility intervals are [lb, lb + m] for each l.

I need to find a time t where the number of intervals from both installations that contain t is maximized.

This sounds like finding the maximum overlap of intervals.

In general, for interval overlapping problems, the maximum number of overlapping intervals is the maximum number of intervals that contain any particular point.

A standard way to find this is to sort all the start and end events and process them in order, keeping track of the current number of active intervals.

But again, since we're dealing with large numbers, I need a mathematical way to compute this without simulating.

Let me consider the number of fireworks visible from the first installation at time t:

number of k where ka ≤ t < ka + m + 1

Similarly for the second installation.

Wait, in the problem, it says "visible from x to x + m, inclusive", so it's t such that x ≤ t ≤ x + m.

Assuming t is integer, this is equivalent to t in [x, x + m].

So, for firework launched at x, visibility is from x to x + m inclusive.

Hence, for first installation, visible fireworks are those launched at ka where ka ≤ t ≤ ka + m.

Similarly for the second installation.

So, total visible fireworks at time t is:

number of ka where ka ≤ t ≤ ka + m (for first installation)

plus

number of lb where lb ≤ t ≤ lb + m (for second installation)

Which is floor(t / a) - floor((t - m - 1)/a) + 1

Similarly for the second installation: floor(t / b) - floor((t - m - 1)/b) + 1

Wait, this seems similar to what I had earlier, but adjusted for inclusive limits.

So, total visible fireworks at time t is:

floor(t / a) - floor((t - m - 1)/a) + 1 + floor(t / b) - floor((t - m - 1)/b) + 1

I need to maximize this expression over t.

This still seems complicated. Maybe I can find a t where both installations have as many visible fireworks as possible.

Let me consider the case when t is a multiple of a and b, i.e., t is a common multiple of a and b.

At such times, both installations launch fireworks, and these fireworks will be visible for m minutes.

But I need to consider overlaps.

Wait, perhaps I should look for the time t where the number of visible fireworks from both installations is maximized.

Let me consider the number of visible fireworks from the first installation at time t:

number of ka where ka ≤ t ≤ ka + m

which is floor(t / a) - floor((t - m - 1)/a)

Similarly for the second installation: floor(t / b) - floor((t - m - 1)/b)

So, total visible fireworks is:

floor(t / a) - floor((t - m - 1)/a) + floor(t / b) - floor((t - m - 1)/b) + 2

Wait, why +2 at the end? I think I miscounted earlier.

Actually, for each installation, the number of visible fireworks is floor(t / c) - floor((t - m)/c), where c is a or b.

Wait, let's double-check.

If a firework is launched at ka, it's visible from ka to ka + m inclusive.

So, the number of such k where ka ≤ t ≤ ka + m is floor(t / a) - floor((t - m - 1)/a)

Similarly for b.

Hence, total visible fireworks is:

(floor(t / a) - floor((t - m - 1)/a)) + (floor(t / b) - floor((t - m - 1)/b))

I need to maximize this expression over t.

This seems like a function that can be maximized by choosing t appropriately.

But it's still not clear how to find the maximum value without knowing t.

Let me consider specific examples to get some intuition.

Looking back at the sample input:

First test case: a=6, b=7, m=4

According to the explanation, at t=7, we have one firework from each installation visible, so total is 2.

But according to the formula:

floor(7/6) - floor((7-5)/6) + floor(7/7) - floor((7-5)/7)

= 1 - floor(2/6) + 1 - floor(2/7)

= 1 - 0 + 1 - 0 = 2

Which matches the sample explanation.

Another sample: a=7, b=8, m=56

At t=112, number of visible fireworks is 17, as per the explanation.

Let's verify with the formula:

floor(112/7) - floor((112-57)/7) + floor(112/8) - floor((112-57)/8)

= floor(16) - floor(55/7) + floor(14) - floor(55/8)

= 16 - floor(7.857) + 14 - floor(6.875)

= 16 - 7 + 14 - 6

= 9 + 8 = 17

Which matches the sample.

Another sample: a=1, b=1, m=1

At t=1, number of visible fireworks:

floor(1/1) - floor((1-1)/1) + floor(1/1) - floor((1-1)/1)

= 1 - 0 + 1 - 0 = 2

But according to the sample output, it's 4.

Wait, that doesn't match. What's going on here?

Wait, perhaps I'm missing something in the formula.

Let me check the visibility again.

If a firework is launched at t=1, it's visible from t=1 to t=1+m=2.

Similarly, another firework is launched at t=2, visible from t=2 to t=3, and so on.

Wait, but in this case, since a=1 and b=1, fireworks are launched every minute from both installations.

Each firework is visible for m+1 minutes, which is from t to t+m inclusive.

So, for a=1, b=1, m=1, each firework is visible from t to t+1.

So, at t=1, fireworks launched at t=1 and t=0 (if there was one, but t=0 is not considered since launches start at t=a and t=b, which are 1 and 1 here.

Wait, but m=1, so t=1 is visible for t=1 to t=2.

At t=1, fireworks launched at t=1 and t=0 (if any) are visible.

But since launches are at t=1, t=2, t=3, etc., at t=1, fireworks launched at t=1 and t=0 are visible, but t=0 is before the first launch, so only t=1.

Wait, but according to the sample output, it's 4, which suggests that both installations are launching fireworks that are visible at t=1.

Wait, perhaps I need to consider that both installations are launching at t=1, and their fireworks are visible from t=1 to t=2.

So, at t=1, there are two fireworks from installation 1 and two from installation 2, making a total of 4.

Wait, but why two from each installation?

If installations launch every a and b minutes, and a=b=1, then they launch every minute.

So, at t=1, installation 1 launches at t=1, and installation 2 launches at t=1.

Each firework is visible from t=1 to t=2.

So, at t=1, we have:

- Firework from installation 1 launched at t=1, visible from t=1 to t=2.

- Firework from installation 2 launched at t=1, visible from t=1 to t=2.

- If m=1, then t=1 to t=2.

Wait, but the sample output is 4, which suggests that there are two fireworks from each installation visible at t=1.

But according to the problem statement, each installation launches one firework every a or b minutes.

So, why is the sample output 4?

Wait, perhaps I misread the sample output.

Looking back, the sample input is:

6

6 7 4

3 4 10

7 8 56

5 6 78123459896

1 1 1

1 1 1000000000000000000

And the sample output is:

2

7

17

28645268630

4

2000000000000000002

Wait, for a=1, b=1, m=1, output is 4.

But according to my earlier calculation, it should be 2.

Wait, maybe I'm missing something.

Wait, perhaps the formula should be floor(t / a) - floor((t - m)/a) + floor(t / b) - floor((t - m)/b)

Wait, in the earlier calculation, I had +2, but perhaps it's just the sum of the two terms.

Let me recast the formula.

Number of visible fireworks from installation 1 at time t is floor(t / a) - floor((t - m - 1)/a)

Similarly for installation 2.

Wait, in the sample with a=1, b=1, m=1, at t=1:

floor(1 / 1) - floor((1 - 1 - 1)/1) + floor(1 / 1) - floor((1 - 1 - 1)/1)

= 1 - floor(-1/1) + 1 - floor(-1/1)

= 1 - (-1) + 1 - (-1)

= 1 - (-1) is 1 - (-1) = 2, and similarly for the second term.

So, 2 + 2 = 4, which matches the sample output.

Wait, but floor of negative numbers: floor(-1) is -1.

So, floor((1 - 1 - 1)/1) = floor(-1) = -1

Thus, floor(1 / 1) - floor(-1) = 1 - (-1) = 2

Similarly for the second installation: 2

Total: 4

Okay, that makes sense now.

So, the correct formula is:

(floor(t / a) - floor((t - m - 1)/a)) + (floor(t / b) - floor((t - m - 1)/b))

And in the case where t - m - 1 is negative, floor((t - m - 1)/c) is floor of a negative number, which is -ceil((m + 1 - t)/c), but I might not need to worry about that as long as I handle integer division correctly.

Now, I need to maximize this expression over t.

Given that a, b, and m can be up to 10^18, I need an efficient way to compute this.

Let me consider that the maximum number of visible fireworks occurs when t is a multiple of both a and b, or close to it, within m minutes.

Alternatively, perhaps when t is such that many ka and lb are within [t - m, t].

Wait, perhaps I can think in terms of t being aligned with as many ka and lb as possible.

But I need a smarter approach.

Let me consider the number of visible fireworks from installation 1: floor(t / a) - floor((t - m - 1)/a)

Similarly for installation 2.

I need to maximize the sum of these two expressions.

Let me consider that floor(t / a) is the number of multiples of a up to t, and floor((t - m -1)/a) is the number of multiples of a up to t - m -1.

So, floor(t / a) - floor((t - m -1)/a) is the number of multiples of a in the interval [t - m, t].

Similarly for b.

Hence, the total visible fireworks is the number of multiples of a in [t - m, t] plus the number of multiples of b in [t - m, t].

To maximize this, I need to choose t such that [t - m, t] contains as many multiples of a and b as possible.

The maximum possible number would be ceil(m / a) + ceil(m / b), but since the intervals might overlap, I need to consider if there's any overlap in the multiples of a and b within [t - m, t].

If a and b are co-prime, there's less overlap, but if they share common factors, there might be more overlap.

Wait, but in the sample where a=1, b=1, m=1, ceil(1/1) + ceil(1/1) = 1 + 1 = 2, but the sample output is 4.

Wait, that doesn't match. So, my assumption is incorrect.

Wait, perhaps it's floor(t / a) - floor((t - m - 1)/a), which for m=1, a=1, t=1 is 1 - floor(-1) = 1 - (-1) = 2

Similarly for b=1, so total is 4.

So, in this case, it's 2 + 2 = 4, which matches the sample.

So, perhaps the general formula is floor(t / a) - floor((t - m - 1)/a) + floor(t / b) - floor((t - m - 1)/b)

I need to maximize this over t.

Let me consider that floor(t / c) - floor((t - m -1)/c) is equal to floor(t / c) - floor((t - m -1)/c), which is the number of multiples of c in [t - m, t].

I need to find t that maximizes the sum of these for c=a and c=b.

Let me consider that for large m, this sum can be up to floor(m / a) + floor(m / b) + something.

But in the sample where a=1, b=1, m=1, it's 4, which is floor(1/1) - floor(-1/1) + floor(1/1) - floor(-1/1) = 1 - (-1) + 1 - (-1) = 2 + 2 = 4

So, it seems correct.

Another sample: a=7, b=8, m=56

At t=112, floor(112/7) - floor((112 - 57)/7) + floor(112/8) - floor((112 - 57)/8) = 16 - floor(55/7) + 14 - floor(55/8) = 16 - 7 + 14 - 6 = 9 + 8 = 17, which matches the sample.

So, the formula seems consistent with the samples.

Now, I need to implement this efficiently.

Given that t can be up to something like m + max(a, b), but m can be up to 10^18, I can't iterate over t.

I need to find the t that maximizes floor(t / a) - floor((t - m -1)/a) + floor(t / b) - floor((t - m -1)/b)

Let me consider that for t >= m + 1, floor(t / c) - floor((t - m -1)/c) is equal to floor(t / c) - floor(t / c - ceil(m +1 / c)).

Wait, that might not help.

Alternatively, perhaps I can consider that floor(t / c) - floor((t - m -1)/c) is equal to the number of multiples of c in [t - m, t], which is floor(t / c) - floor((t - m -1)/c)

This is equal to the number of k where k*c <= t and k*c >= t - m.

Which is floor(t / c) - floor((t - m -1)/c)

I need to maximize the sum of these for c=a and c=b.

Let me consider that for t >= m +1, this expression is equal to floor(t / a) - floor((t - m -1)/a) + floor(t / b) - floor((t - m -1)/b)

I need to find t that maximizes this.

Let me consider that for t >= m +1, this expression is equal to the number of multiples of a in [t - m, t] plus the number of multiples of b in [t - m, t].

To maximize this, I need to choose t such that [t - m, t] contains as many multiples of a and b as possible.

The interval [t - m, t] has length m +1.

The number of multiples of a in this interval is floor(t / a) - floor((t - m -1)/a)

Similarly for b.

So, to maximize the sum, I need to choose t such that both floor(t / a) - floor((t - m -1)/a) and floor(t / b) - floor((t - m -1)/b) are maximized.

This suggests that t should be chosen such that it is a multiple of a and b, or as close as possible to being a multiple of both.

Wait, perhaps t should be the least common multiple (LCM) of a and b, or a multiple of LCM(a, b).

But in the sample where a=7, b=8, m=56, t=112 is chosen, which is LCM(7,8)=56, and 112 is 2*56.

But in that case, floor(112 /7) - floor((112 -57)/7) + floor(112 /8) - floor((112 -57)/8) = 16 - floor(55/7) + 14 - floor(55/8) = 16 -7 +14 -6 = 9 +8=17

Is there a better t where I can get more than 17?

Let me check t=56: floor(56/7) - floor((56-57)/7) + floor(56/8) - floor((56-57)/8) = 8 - floor(-1/7) + 7 - floor(-1/8) = 8 - (-1) + 7 - (-1) = 8 +1 +7 +1 = 17

Same as t=112.

So, at t=56 and t=112, the number is 17.

Is there a t where it's higher?

Let me check t=168: floor(168/7) - floor((168-57)/7) + floor(168/8) - floor((168-57)/8) = 24 - floor(111/7) + 21 - floor(111/8) = 24 -15 +21 -13 =9 +8=17

Again, 17.

So, it seems that choosing t as a multiple of LCM(a,b) gives the maximum.

But is there a t where it's higher?

Let me consider t=56 +7=63: floor(63/7) - floor((63-57)/7) + floor(63/8) - floor((63-57)/8) =9 - floor(6/7) +7 - floor(6/8) =9 -0 +7 -0 =16

Which is less than 17.

Similarly, t=56 +8=64: floor(64/7)=9, floor((64-57)/7)=floor(7/7)=1 →9 -1=8

floor(64/8)=8, floor((64-57)/8)=floor(7/8)=0 →8 -0=8

Total:8 +8=16

Again, less than 17.

So, seems like multiples of LCM(a,b) give the highest count.

Hence, perhaps the maximum is floor(m / a) + floor(m / b) + something.

Wait, in the sample where a=7, b=8, m=56, floor(56/7)=8, floor(56/8)=7, sum is 15, but the actual maximum is 17.

So, that doesn't match.

Wait, but m is 56, a=7, floor(56/7)=8, b=8, floor(56/8)=7, sum is 15, but in the earlier calculation, we have 17.

So, perhaps I need to consider that t can be beyond m, and include more multiples.

Wait, in the earlier calculation, at t=56, floor(56/7)-floor((56-57)/7)=8 - (-1)=9

Similarly, floor(56/8)-floor((56-57)/8)=7 - (-1)=8

Total:17

So, it's floor(m / a) + floor(m / b) + something.

Wait, but floor(m / a) is floor(56/7)=8, but in the calculation, it's floor(t / a)-floor((t - m -1)/a)=9

Wait, (t - m -1)/a=(56 -56 -1)/7=-1/7, floor(-1/7)=-1

Hence, floor(t / a)-floor((t - m -1)/a)=8 - (-1)=9

Similarly for b: floor(56/8)-floor((56-57)/8)=7 - (-1)=8

Total:17

So, in general, floor(t / a)-floor((t - m -1)/a) = floor(t / a) - floor(t / a - ceil(m +1 / a))

Wait, perhaps it's floor(t / a) - floor((t - m -1)/a) = floor(t / a) - (floor(t / a) - ceil(m +1 / a)) = ceil(m +1 / a)

Wait, no, that's not correct.

Actually, floor(t / a) - floor((t - m -1)/a) is equal to the number of multiples of a in [t - m, t], which is floor(t / a) - floor((t - m -1)/a)

This is equal to the integer division floor(t / a) minus floor((t - m -1)/a)

This value can be calculated directly.

But perhaps there's a better way to express it.

Let me consider that for t >= m +1, floor(t / a) - floor((t - m -1)/a) = ceil(m +1 / a)

Wait, is that true?

Let me check with t=56, a=7, m=56

floor(56/7) - floor((56-57)/7)=8 - (-1)=9

ceil(56 +1 /7)=ceil(57/7)=ceil(8.142)=9

Yes, it matches.

Similarly, for t=56, b=8, floor(56/8)-floor((56-57)/8)=7 - (-1)=8

ceil(57/8)=ceil(7.125)=8

So, in general, floor(t / a) - floor((t - m -1)/a) = ceil((m +1)/a)

Hence, the total visible fireworks is ceil((m +1)/a) + ceil((m +1)/b)

This seems to be a general formula.

Let me verify with the sample inputs.

First sample: a=6, b=7, m=4

ceil(5/6)=1, ceil(5/7)=1, total=1+1=2, which matches the sample.

Second sample: a=3, b=4, m=10

ceil(11/3)=4, ceil(11/4)=3, total=4+3=7, matches the sample.

Third sample: a=7, b=8, m=56

ceil(57/7)=9, ceil(57/8)=8, total=9+8=17, matches the sample.

Fourth sample: a=5, b=6, m=78123459896

ceil(78123459897/5)=ceil(15624691979.2)=15624691980

ceil(78123459897/6)=ceil(13020576649.5)=13020576650

Total:15624691980 +13020576650=28645268630, matches the sample.

Fifth sample: a=1, b=1, m=1

ceil(2/1)=2, ceil(2/1)=2, total=4, matches the sample.

Sixth sample: a=1, b=1, m=1000000000000000000

ceil(1000000000000000001/1)=1000000000000000001, ceil(1000000000000000001/1)=1000000000000000001

Total:1000000000000000001 +1000000000000000001=2000000000000000002, matches the sample.

So, the formula seems to hold: ceil((m +1)/a) + ceil((m +1)/b)

Now, how do I compute ceil((m +1)/a) + ceil((m +1)/b)

In Python, integer division using '//' is floor division.

To compute ceil(x/y), I can use (x + y -1) // y

So, ceil((m +1)/a) = (m +1 + a -1)//a = (m + a)//a

Similarly, ceil((m +1)/b) = (m + b)//b

Hence, the total is (m + a)//a + (m + b)//b

Let me verify with the samples.

First sample: a=6, b=7, m=4

(4 +6)//6 + (4 +7)//7 = 10//6 +11//7 =1 +1=2

Second sample: a=3, b=4, m=10

(10 +3)//3 + (10 +4)//4 =13//3 +14//4=4 +3=7

Third sample: a=7, b=8, m=56

(56 +7)//7 + (56 +8)//8=63//7 +64//8=9 +8=17

Fourth sample: a=5, b=6, m=78123459896

(78123459896 +5)//5 + (78123459896 +6)//6=78123459901//5 +78123459902//6=15624691980 +13020576650=28645268630

Fifth sample: a=1, b=1, m=1

(1 +1)//1 + (1 +1)//1=2//1 +2//1=2 +2=4

Sixth sample: a=1, b=1, m=1000000000000000000

(1000000000000000000 +1)//1 + (1000000000000000000 +1)//1=1000000000000000001 +1000000000000000001=2000000000000000002

All match the sample outputs.

Hence, the correct formula is (m + a)//a + (m + b)//b

Now, looking back at the provided program:

def func():

t = int(input())

for i in range(t):

(a, b, m) = map(int, input().split())

if m < a or m < b:

print(2)

else:

print(m // a + m // b + 2)

This seems incorrect.

First, it checks if m < a or m < b, and if so, prints 2.

Otherwise, it prints m//a + m//b + 2

But according to my earlier reasoning, it should be (m + a)//a + (m + b)//b

Which is equivalent to ceil((m +1)/a) + ceil((m +1)/b)

Wait, but (m + a)//a is equal to ceil(m +1 / a)

Because ceil(x) = (x + a -1)//a for integer x and a.

Hence, ceil((m +1)/a) = (m +1 + a -1)//a = (m + a)//a

Similarly for b.

But in the provided program, it's m//a + m//b + 2

Which is different from (m + a)//a + (m + b)//b

Let me check with the first sample:

a=6, b=7, m=4

m//a=4//6=0, m//b=4//7=0, so 0 + 0 +2=2, which matches the sample.

Second sample: a=3, b=4, m=10

10//3=3, 10//4=2, so 3 +2 +2=7, matches the sample.

Third sample: a=7, b=8, m=56

56//7=8, 56//8=7, so 8 +7 +2=17, matches the sample.

Fourth sample: a=5, b=6, m=78123459896

78123459896//5=15624691979, 78123459896//6=13020576649, sum=15624691979 +13020576649=28645268628, plus 2 is 28645268630, matches the sample.

Fifth sample: a=1, b=1, m=1

1//1=1, 1//1=1, sum=1 +1 +2=4, matches the sample.

Sixth sample: a=1, b=1, m=1000000000000000000

1000000000000000000//1=1000000000000000000, sum=1000000000000000000 +1000000000000000000 +2=2000000000000000002, matches the sample.

So, the provided program seems to be