Alright, I've got this problem to solve. Let's see what it's asking for. So, there's this n by n matrix, initially all zeros, and I can perform two types of operations. Each operation allows me to set a whole row or a whole column to a permutation of numbers from 1 to n. The goal is to maximize the sum of all the elements in the matrix, and I need to do this with no more than 2n operations.

First, I need to understand what these operations do. A Type 1 operation lets me choose a row and set its elements to any permutation of 1 through n. Similarly, a Type 2 operation lets me choose a column and set its elements to any permutation of 1 through n.

Since I can choose any permutation for a row or a column, I can essentially set any value from 1 to n in any position, but with the constraint that in a row or column, each number appears only once because it's a permutation.

Wait, no. Actually, when I set a row or a column, I have to set all its elements according to a single permutation. So, if I set row i to a permutation p, then a[i][j] = p[j] for all j. Similarly, if I set column j to a permutation p, then a[i][j] = p[i] for all i.

So, each operation overwrites an entire row or column with the chosen permutation.

Now, the challenge is to perform these operations in such a way that the final sum of the matrix is maximized, and I can do at most 2n operations.

I need to think about how these operations interact with each other. If I set a row and then set a column, the cell at their intersection will be overwritten by the column operation.

So, overwriting a cell multiple times will depend on the order of operations. I need to find an optimal sequence of operations that maximizes the sum.

Let me consider small values of n to get an intuition.

Take n=1.

Matrix is 1x1, initially 0.

I can perform at most 2 operations.

If I do a Type 1 operation on row 1, setting it to [1], then the matrix becomes [1].

If I do a Type 2 operation on column 1, setting it to [1], it's the same.

So, the maximum sum is 1, and I can achieve it with just one operation.

Now, n=2.

Matrix is 2x2, initially all zeros.

I can perform at most 4 operations.

I need to maximize the sum.

Let's see what happens if I set row 1 to [2,1], and row 2 to [2,1].

So, matrix becomes:

2 1

2 1

Sum is 6.

Alternatively, if I set column 1 to [2,1], and column 2 to [2,1], matrix becomes:

2 2

1 1

Sum is 6.

Wait, but in the example provided in the problem, they achieved a sum of 7 with n=2.

Wait, let's look back at the example.

In the second test case, n=2, and they achieved a sum of 7 with 3 operations.

Wait, how is that possible?

Let me see their operations:

1. Type 1 operation on row 1 with permutation [1,2]. So, row 1 becomes [1,2].

2. Type 1 operation on row 2 with permutation [1,2]. So, row 2 becomes [1,2]. Now, matrix is:

1 2

1 2

Sum is 6.

3. Type 2 operation on column 1 with permutation [1,2]. So, column 1 becomes [1,2]. Now, matrix becomes:

1 2

2 2

Sum is 7.

So, by performing operations in this order, they achieved a higher sum.

This suggests that by combining row and column operations, I can achieve a higher sum than using only row or only column operations.

So, perhaps the strategy is to use both row and column operations to maximize the sum.

But I need to be careful about the order of operations because overwriting can affect the final values.

Let me think about what the maximum possible sum could be.

Each cell can take values from 1 to n, but with the constraints of the operations.

Wait, but actually, a cell can be set multiple times, so in theory, I can set it to the highest possible value, which is n, in the last operation that affects it.

But I need to ensure that, with at most 2n operations, I can set as many cells as possible to n.

Wait, but there are dependencies because of the row and column permutations.

Wait, maybe I need to think in terms of assigning the highest possible values to as many cells as possible, considering the constraints of the permutations.

Alternatively, perhaps there's a formula to compute the maximum sum based on n.

Looking back at the example, for n=2, the maximum sum is 7.

For n=1, it's 1.

Let me compute the formula given in the provided program and see if it matches.

The program prints sum as n*(n+1)*(4*n - 1)//6.

For n=1: 1*2*3//6 = 6//6 =1, which matches.

For n=2: 2*3*7//6=42//6=7, which matches the example.

For n=3: 3*4*11//6=132//6=22.

Let me see if that makes sense.

If I set all rows and columns optimally, what sum can I achieve.

Wait, perhaps there's a way to calculate the maximum sum theoretically.

Each operation can set a row or column to a permutation of 1 to n, so the sum contributed by one row operation is the sum of the permutation, which is n(n+1)/2.

Similarly for a column.

But since operations can overwrite each other, I need to consider the interactions.

Alternatively, maybe think in terms of how many times each cell is set.

But that seems complicated.

Alternatively, perhaps think about the matrix as a whole, and try to maximize the sum by setting cells to as high values as possible.

But given the constraints of operations, it's not straightforward.

Looking back at the provided program, it prints the sum as n*(n+1)*(4*n - 1)//6, and performs 2n operations, setting each row and each column with the permutation from n downto 1.

Wait, but in the example for n=2, doing 4 operations (2 rows and 2 columns) results in sum 7.

Wait, but in the program, it's printing 7 and 4 operations for n=2.

But in the example, they used 3 operations to achieve sum 7.

So, perhaps 2n operations are not necessary, but the program is allowed to use up to 2n operations.

But the problem says that it's always possible to achieve the maximum sum with no more than 2n operations.

So, I need to provide a solution with no more than 2n operations.

The provided program uses exactly 2n operations, performing a row operation and a column operation for each row and column.

But in the example, they achieved the same sum with fewer operations.

So, perhaps using 2n operations is overkill, but it's acceptable as long as the sum is maximized.

Now, I need to verify if the formula n*(n+1)*(4*n - 1)//6 is indeed the maximum possible sum.

Let me check for n=3.

According to the formula: 3*4*11//6=22.

Let me try to see what sum I can achieve.

If I set row 1 to [3,2,1], row 2 to [3,2,1], row 3 to [3,2,1], sum would be 3+2+1 + 3+2+1 + 3+2+1 = 3*6=18.

Alternatively, if I set column 1 to [3,2,1], column 2 to [3,2,1], column 3 to [3,2,1], matrix becomes:

3 3 3

2 2 2

1 1 1

Sum is 3*6=18.

But according to the formula, it's 22.

So, something's off.

Wait, perhaps combining row and column operations can lead to a higher sum.

Let me try.

First, set row 1 to [3,2,1], matrix:

3 2 1

0 0 0

0 0 0

Then, set row 2 to [3,2,1], matrix:

3 2 1

3 2 1

0 0 0

Then, set row 3 to [3,2,1], matrix:

3 2 1

3 2 1

3 2 1

Sum is 3+2+1 + 3+2+1 + 3+2+1 = 18.

Alternatively, set column 1 to [3,2,1], column 2 to [3,2,1], column 3 to [3,2,1], matrix:

3 3 3

2 2 2

1 1 1

Sum is 3+3+3 + 2+2+2 + 1+1+1 = 18.

Same as before.

Now, let's try combining row and column operations.

Set row 1 to [3,2,1], matrix:

3 2 1

0 0 0

0 0 0

Then, set column 1 to [3,2,1], matrix:

3 2 1

2 0 0

1 0 0

Then, set row 2 to [3,2,1], matrix:

3 2 1

3 0 0

1 0 0

Then, set column 2 to [3,2,1], matrix:

3 3 1

3 2 0

1 2 0

Then, set row 3 to [3,2,1], matrix:

3 3 1

3 2 0

3 2 1

Then, set column 3 to [3,2,1], matrix:

3 3 3

3 2 2

3 2 1

Sum is 3+3+3 + 3+2+2 + 3+2+1 = 12+7+6=25.

Wait, but according to the formula, it's 22.

Hmmm.

Wait, perhaps I made a mistake in the operations.

Let me try again.

Start with all zeros.

Set row 1 to [3,2,1], matrix:

3 2 1

0 0 0

0 0 0

Set column 1 to [3,2,1], matrix:

3 2 1

2 0 0

1 0 0

Set row 2 to [3,2,1], matrix:

3 2 1

3 2 1

1 0 0

Set column 2 to [3,2,1], matrix:

3 3 1

3 2 1

1 2 0

Set row 3 to [3,2,1], matrix:

3 3 1

3 2 1

3 2 1

Set column 3 to [3,2,1], matrix:

3 3 3

3 2 2

3 2 1

Sum is 3+3+3 + 3+2+2 + 3+2+1 = 9 + 7 + 6 = 22.

Okay, so I get the sum as 22, which matches the formula.

So, perhaps with 2n operations, it's possible to achieve this sum.

But is there a way to achieve a higher sum?

In my earlier attempt, I thought I achieved 25, but I must have miscalculated.

Let me check again.

Starting from:

3 3 3

3 2 2

3 2 1

Sum is 3+3+3 + 3+2+2 + 3+2+1 = 9 + 7 + 6 = 22.

So, it's indeed 22.

Therefore, the formula seems correct.

Now, I need to verify if the provided program implements this correctly.

The program prints the sum as n*(n+1)*(4*n - 1)//6, and performs 2n operations, setting each row and each column to the permutation [n, n-1, ..., 1].

Wait, but in the n=2 example, using this approach:

Set row 1 to [2,1], matrix:

2 1

0 0

Set column 1 to [2,1], matrix:

2 1

1 0

Set row 2 to [2,1], matrix:

2 1

2 1

Set column 2 to [2,1], matrix:

2 2

2 1

Sum is 2+2 + 2+1 = 7, which matches the example.

So, it seems that this approach achieves the maximum sum.

Therefore, the provided program is correct.

Hence, Correctness: True

**Final Solution**

To solve this problem, we need to maximize the sum of all elements in an n x n matrix using at most 2n operations, where each operation allows us to set a entire row or column to a permutation of numbers from 1 to n.

### Approach

1. **Understanding Operations**:
   - Type 1 operation: Set a entire row to a permutation of numbers from 1 to n.
   - Type 2 operation: Set a entire column to a permutation of numbers from 1 to n.
   
2. **Maximizing Sum**:
   - To maximize the sum, we should aim to set higher values in as many cells as possible.
   - We can achieve this by setting rows and columns to permutations that prioritize higher numbers.

3. **Optimal Strategy**:
   - Use a permutation that starts with the highest number and descends to the lowest for both rows and columns.
   - Perform operations in such a way that higher values are retained in the matrix cells.

4. **Sum Calculation**:
   - The sum of the matrix can be calculated using the formula: 
     \[
     \text{sum} = \frac{n \times (n + 1) \times (4 \times n - 1)}{6}
     \]

### Solution Code

```python
t = int(input())
for _ in range(t):
    func_1()

def func_1():
    import sys
    n = int(sys.stdin.readline())
    sum_matrix = n * (n + 1) * (4 * n - 1) // 6
    operations = 2 * n
    print(sum_matrix, operations)
    permutation = list(range(n, 0, -1))
    for i in range(1, n + 1):
        print(1, i, *permutation)
        print(2, i, *permutation)
```

### Explanation

- **Reading Input**:
  - Read the number of test cases `t`.
  - For each test case, read the size of the matrix `n`.

- **Sum Calculation**:
  - Calculate the maximum sum of the matrix using the formula:
    \[
    \text{sum} = \frac{n \times (n + 1) \times (4 \times n - 1)}{6}
    \]
  - This formula is derived to achieve the maximum possible sum for the given operations.

- **Operations**:
  - Perform operations to set each row and each column to a permutation of numbers from n to 1.
  - This ensures that higher values are placed in the matrix cells effectively.

- **Output**:
  - Print the calculated sum and the number of operations.
  - For each operation, print the operation type (1 for row, 2 for column), the row or column index, and the permutation.

This approach ensures that we maximize the sum of the matrix elements within the constraints of the problem.