Alright, I've got this problem to solve. Let's see what it's asking for. So, Sasha wants to make bets in a casino in such a way that he can guarantee that he'll reach any amount of coins he desires, no matter how high. The casino has some specific rules: when he wins a bet of y coins, he gets y*k coins in return, and if he loses, he loses that y coins. Also, there's a promotion where he can't lose more than x times in a row.

First, I need to understand what it means for Sasha to be able to guarantee that he can reach any number of coins. It means that no matter how the wins and losses occur, as long as the sequence of losses doesn't exceed x in a row, Sasha should be able to keep betting until his coin count is at least any given n.

Given that n can be any integer, potentially arbitrarily large, Sasha needs a strategy where he can keep increasing his coin count without bound, despite possible losses.

Let me think about how bets work. Each bet is a positive integer amount, and it can't exceed his current coins. When he wins, his coins increase by y*(k-1), and when he loses, they decrease by y.

The key here is that Sasha can choose how much to bet each time, and he needs to choose these bets in a way that, even with up to x consecutive losses, he doesn't run out of coins to continue betting.

I recall that in gambling strategies, there are systems like the Martingale system, where you double your bet after each loss to recoup previous losses when you eventually win. But here, the multiplication factor is k, which could be any integer from 2 to 30, and there's a limit on consecutive losses.

So, perhaps Sasha needs to choose his bets in a way that accounts for the maximum number of consecutive losses he might face, which is x.

Let me try to model this.

Suppose Sasha starts with a coins.

He makes a bet of y1 coins.

- If he wins, he gets y1*k coins, so his new total is a - y1 + y1*k = a + y1*(k-1).

- If he loses, he loses y1 coins, so his new total is a - y1.

But he can't lose more than x times in a row.

So, in the worst case, he could lose x times in a row, each time betting some amount, and after x losses, he must still have enough coins to continue betting.

After x losses, his coin count would be a - (y1 + y2 + ... + yx).

And for him to be able to continue betting, this amount must be at least the next bet amount, y{x+1}.

Moreover, he needs to have a strategy where, even in the face of x consecutive losses, he can still make another bet.

This seems similar to the concept of a betting system that can handle a certain number of consecutive losses.

I need to find out if, with a given k, x, and starting a coins, such a strategy exists.

Looking at the sample input and output:

First test case:

2 1 7 → YES

This means k=2, x=1, a=7 → YES

So, with k=2 and x=1, starting with 7 coins, Sasha can guarantee reaching any n.

Second test case:

2 1 1 → NO

k=2, x=1, a=1 → NO

So, starting with 1 coin, it's not possible.

Third test case:

2 3 15 → YES

k=2, x=3, a=15 → YES

And so on.

I need to find a general condition based on k, x, and a that determines whether it's possible or not.

Let me try to derive such a condition.

Suppose Sasha can afford to lose up to x times in a row.

He needs to choose bet amounts y1, y2, ..., such that after any sequence of losses not exceeding x, he still has enough coins to make the next bet.

One approach is to calculate the maximum amount he could lose in x consecutive losses and ensure that he has enough coins to cover that.

But it's more nuanced because he can adjust his bet amounts based on the outcomes.

Wait, in the problem, it says that he can't lose more than x times in a row, which means that after x losses, the next bet must be a win.

No, actually, re-reading the problem, it says "he cannot lose more than x times in a row", which likely means that the casino ensures that he doesn't have more than x consecutive losses. In other words, after x losses, the next bet must be a win.

If that's the case, then Sasha can plan his bets accordingly, knowing that he won't have more than x consecutive losses.

This changes things.

So, Sasha knows that the sequence of losses is limited to x in a row, and beyond that, he must have a win.

Therefore, he can plan his bets to ensure that, even in the face of x consecutive losses, he can keep betting and eventually increase his coin count without bound.

I need to find a strategy for choosing the bet amounts y1, y2, ..., such that, given that there are no more than x consecutive losses, Sasha can keep betting until his coin count is arbitrarily large.

One possible strategy is to choose the bet amounts in such a way that after a win, he can reset his bet to a smaller amount, and after a loss, he increases his bet to recoup previous losses.

This sounds similar to the Martingale system, but generalized for a multiplication factor k.

Let me try to formalize this.

Let’s say Sasha has a certain amount of coins, c.

He chooses to bet y coins, where y is some function of c, k, and x.

If he wins, his new coin count is c - y + y*k = c + y*(k-1).

If he loses, his new coin count is c - y.

Now, he can't lose more than x times in a row, so after x losses, there must be a win.

Therefore, the worst-case scenario is x consecutive losses, followed by a win.

So, if he has a sequence of x losses and then a win, what is the net effect on his coin count?

Let’s say he bets y1, y2, ..., yx, and then y{x+1}, with all the first x bets losing and the {x+1}th bet winning.

After x losses, his coin count is a - (y1 + y2 + ... + yx).

Then, he wins the {x+1}th bet, so he gets y{x+1}*k coins.

So, his new coin count is (a - sum_{i=1 to x} y_i) - y{x+1} + y{x+1}*k = a - sum_{i=1 to x} y_i - y{x+1} + y{x+1}*k.

Simplify: a - sum_{i=1 to x} y_i + y{x+1}*(k - 1).

For him to make progress, this amount should be greater than a, meaning:

- sum_{i=1 to x} y_i + y{x+1}*(1 - k) < 0

Wait, that doesn't seem right.

Wait, actually, he wants a - sum_{i=1 to x} y_i + y{x+1}*(k - 1) > a, which simplifies to - sum_{i=1 to x} y_i + y{x+1}*(k - 1) > 0.

So, y{x+1}*(k - 1) > sum_{i=1 to x} y_i.

This inequality must hold for him to make progress.

So, y{x+1} > sum_{i=1 to x} y_i / (k - 1).

This suggests that the next bet after x losses should be larger than the sum of the previous x bets divided by (k - 1).

This seems complicated. Maybe there's a better way to approach this.

Perhaps I should consider the minimal amount he needs to start with to ensure that he can keep betting despite x consecutive losses.

Let’s think recursively.

Let’s define s(x, k) as the minimal starting amount required to guarantee being able to reach any n, given that the maximum number of consecutive losses is x, and the win multiplier is k.

I need to find s(x, k), and then compare it to a to decide whether it's possible.

If a >= s(x, k), then it's possible; else, it's not.

So, I need to compute s(x, k).

Let’s try to find a recursive formula for s(x, k).

Base case: x = 0.

If x = 0, that means Sasha cannot lose any bets; every bet must be a win.

In this case, he can bet all his coins each time and double them (or multiply by k), so he can grow his coins exponentially with each bet.

Therefore, for x = 0, s(0, k) = 1, since starting with 1 coin, he can keep winning and increasing his coins without bound.

Wait, actually, if x = 0, he cannot have any losses, so every bet must be a win.

Therefore, he can start with 1 coin, bet 1 coin, win k coins, bet k coins, win k^2 coins, and so on.

So, he can reach any n, starting from 1 coin, as long as he always wins.

Hence, for x = 0, s(0, k) = 1.

Now, for x >= 1, it's more complicated.

Let’s consider x = 1.

In this case, Sasha can lose at most once in a row.

So, after one loss, the next bet must be a win.

Let’s think about how much he can afford to lose in this scenario.

Suppose he starts with s coins.

He makes a bet of y1 coins.

- If he wins, he has s - y1 + y1*k = s + y1*(k - 1).

Then, he can make another bet, say y2 coins.

- If he wins again, s + y1*(k - 1) - y2 + y2*k = s + y1*(k - 1) + y2*(k - 1).

And so on.

- If he loses once, he has s - y1.

Then, he must win the next bet.

So, he bets y2 coins, and wins, having (s - y1) - y2 + y2*k = s - y1 - y2 + y2*k = s - y1 + y2*(k - 1).

To make progress, s - y1 + y2*(k - 1) > s, which implies -y1 + y2*(k - 1) > 0, or y2 > y1 / (k - 1).

But y2 must be an integer, so y2 >= ceil(y1 / (k - 1)).

So, to minimize s, perhaps he should choose y1 as small as possible, say y1 = 1.

Then y2 >= ceil(1 / (k - 1)) = 1, since k >= 2.

So, y2 >=1.

Then, after one loss and one win, his coin count is s - 1 + 1*(k - 1) = s - 1 + k - 1 = s + (k - 2).

To make progress, s + (k - 2) > s, which requires k > 2.

But in the sample input, there's k=2, and for k=2, it's possible only if s is large enough.

Wait, perhaps this approach isn't the best.

Let me try to think differently.

Suppose Sasha adopts a strategy where, after a win or after x losses, he resets his bet to a certain value.

Wait, given that he can't have more than x consecutive losses, perhaps he can design his bets such that, after x losses, the next win compensates for all the losses and more.

Let’s formalize this.

Let’s say he has a sequence of x losses and then one win.

Let’s denote the bet amounts as y1, y2, ..., y{x+1}.

After x losses, he has lost y1 + y2 + ... + yx coins.

Then, he wins the {x+1}th bet, gaining y{x+1}*k coins.

So, his net gain is y{x+1}*(k - 1) - (y1 + y2 + ... + yx).

To make progress, this net gain should be positive.

Therefore, y{x+1}*(k - 1) > y1 + y2 + ... + yx.

Now, to minimize the starting coins, perhaps he should choose y1, y2, ..., y{x+1} in a way that y{x+1} is as small as possible, but still satisfies the above inequality.

One possible strategy is to set y{i} = s_i, where s_i is a sequence such that s_{i} = s_{i-1} + s_{i-2} + ... + s_{i-x}.

But this seems complicated.

Alternatively, perhaps y{i} = c * r^{i}, for some constants c and r.

But maybe that's not necessary.

Let’s consider that after x losses, the next bet must be large enough to cover the losses.

So, y{x+1} > (y1 + y2 + ... + yx) / (k - 1).

To minimize the total starting coins, perhaps set y1 = y2 = ... = yx = 1, and y{x+1} = ceil(x / (k - 1)).

But this might not be optimal.

Alternatively, perhaps set y{i} = y{i-1} * m, for some multiplier m.

But this seems too vague.

Let me try to think recursively.

Define s(x, k) as the minimal starting coins needed for given x and k.

Then, s(0, k) = 1, as previously established.

For x >= 1, s(x, k) = 1 + s(x-1, k).

Wait, that doesn't seem right.

Wait, perhaps s(x, k) = 1 + s(x-1, k), but that would suggest s(x, k) = x + 1, which doesn't align with the sample inputs.

For example, in the first sample input, x=1, a=7, which is YES, suggesting s(1,2) <=7.

But according to s(x,k)=x+1, s(1,2)=2, which would imply a=7 >=2, which is true, but in the second sample input, x=1, a=1, which is NO, suggesting s(1,2)>1.

This inconsistency suggests that s(x,k)=x+1 is incorrect.

Let me try to find a better recursive relation.

Consider that with x losses, the maximum losses are y1 + y2 + ... + yx.

Then, the next win must satisfy y{x+1}*(k - 1) > y1 + y2 + ... + yx.

To minimize s(x,k), perhaps set y1 = y2 = ... = yx =1, and y{x+1} = ceil(x / (k - 1)).

Then, s(x,k) = x + y{x+1} = x + ceil(x / (k - 1)).

But in the first sample input, x=1, k=2, so s(1,2)=1 + ceil(1/(2-1))=1 + 1=2.

But a=7 >=2, so YES.

In the second sample input, x=1, k=2, a=1 <2, so NO.

This seems consistent.

Let me check another sample.

Third sample: x=3, k=2, a=15.

s(3,2)=3 + ceil(3/(2-1))=3 + 3=6.

But 15 >=6, so YES.

Wait, but in the sample output, it's YES for a=15, which is greater than or equal to s(3,2)=6.

This seems correct.

Another sample: x=3, k=3, a=6.

s(3,3)=3 + ceil(3/(3-1))=3 + ceil(1.5)=4.

So, s(3,3)=4.

But a=6 >=4, so should be YES, but in the sample output, it's NO.

Wait, that contradicts.

Hmm, perhaps my formula is incorrect.

Let me think again.

Maybe I need to consider that y1, y2, ..., yx can be different.

Perhaps a better approach is to set y{i} = s{i-1}, where s{i} is the minimal starting amount for i losses.

Wait, this is getting too complicated.

Let me look for a different approach.

I recall that in such problems, the condition often boils down to a geometric series or something similar.

Let me consider that after x losses, the next win must cover all the previous losses.

So, the sum of the losses is y1 + y2 + ... + yx.

Then, y{x+1}*(k - 1) > y1 + y2 + ... + yx.

To minimize s(x,k), perhaps choose y1, y2, ..., yx in a way that y{x+1} is minimized.

One strategy is to set y{i} = s{i-1}, where s{i} = s{i-1} + y{i}.

Wait, perhaps it's better to look at the maximum possible losses and ensure that the next win covers them.

Let’s consider that after x losses, the total loss is sum_{i=1 to x} y_i.

Then, y_{x+1} > sum_{i=1 to x} y_i / (k - 1).

To minimize s(x,k), perhaps set y1 = y2 = ... = yx =1, and y_{x+1} = ceil(x / (k - 1)).

Then, s(x,k) = x * y1 + y_{x+1} = x + ceil(x / (k - 1)).

But in the sample input where x=3, k=2, a=15, s(3,2)=3 + ceil(3/1)=6, which matches the YES in the sample output.

But in another sample input where x=3, k=3, a=6, s(3,3)=3 + ceil(3/2)=3 + 2=5.

Wait, ceil(3/2)=2, so s(3,3)=3 + 1=4.

Wait, 3 / 2 =1.5, ceil(1.5)=2.

So, s(3,3)=3 + 2=5.

But in the sample input, a=6 >=5, which should be YES, but the sample output is NO.

This suggests that my formula is incorrect.

Perhaps I need to adjust the formula.

Let me try to think differently.

Suppose that after x losses, the next win must cover all the previous losses.

So, y_{x+1}*(k - 1) >= sum_{i=1 to x} y_i.

To minimize s(x,k), perhaps choose y_i in a way that y_{x+1} is as small as possible.

One way is to set y_i = s_{i-1}, where s_i is the minimal starting amount for i losses.

Wait, perhaps I need to define s_i recursively.

Let’s try to define s_i as the minimal starting amount to handle i losses.

Then, s_0 =1, since with no losses, he can start with 1 coin.

s_1 =1 + s_0 =2, because he can bet 1 coin, and if he loses, he has s_0=1 left.

But in the first sample input, x=1, k=2, s_1=2, which matches a=7 >=2, YES.

Second sample input, x=1, k=2, a=1 <2, NO.

Third sample input, x=3, k=2, s_3=1 + s_2=1 + 1 + s_1=1 +1 +2=4, but in the sample, a=15 >=4, which should be YES, but according to my earlier calculation, s(3,2)=3 + ceil(3/1)=6, which is higher.

Wait, perhaps I need to adjust the calculation.

Wait, maybe s(x,k)=sum_{i=0 to x} ceil(s(x-i,k)/ (k-1)).

This seems too convoluted.

Let me look for a pattern in the sample inputs.

Looking at the sample inputs and outputs:

Test case 1: k=2, x=1, a=7 → YES

Test case 2: k=2, x=1, a=1 → NO

Test case 3: k=2, x=3, a=15 → YES

Test case 4: k=3, x=3, a=6 → NO

Test case 5: k=4, x=4, a=5 → NO

Test case 6: k=5, x=4, a=7 → YES

Test case 7: k=4, x=88, a=1000000000 → NO

Test case 8: k=25, x=69, a=231 → NO

Test case 9: k=13, x=97, a=18806 → NO

From these, it seems that for certain values of k and x, a needs to be at least a certain value to get YES.

Looking back at test case 4: k=3, x=3, a=6 → NO

According to my earlier formula, s(3,3)=3 + ceil(3/2)=3 + 2=5, but a=6 >=5, which should be YES, but it's NO.

So, my formula is incorrect.

Perhaps I need to adjust it.

Let me consider that after x losses, the next win must cover all the losses plus some.

So, y_{x+1}*(k -1) >= sum_{i=1 to x} y_i.

If I set y_i = s_{i-1}, then s_x = sum_{i=0 to x-1} s_i.

This resembles the Fibonacci sequence.

Wait, in the standard Fibonacci sequence, f_n = f_{n-1} + f_{n-2}.

But here, it's s_x = sum_{i=0 to x-1} s_i.

This is similar to s_x = 2*s_{x-1}, because s_{x-1} = sum_{i=0 to x-2} s_i.

Wait, no, s_x = sum_{i=0 to x-1} s_i = s_{x-1} + s_{x-2} + ... + s_0.

This is similar to the partial sum of a geometric series.

Actually, s_x = 2*s_{x-1}, because s_x = s_{x-1} + s_{x-1}.

Wait, that can't be right.

Wait, s_x = sum_{i=0 to x-1} s_i.

Given s_0=1, s_1=1 + s_0=2, s_2=1 + s_0 + s_1=1 +1 +2=4, s_3=1 + s_0 + s_1 + s_2=1 +1 +2 +4=8, and so on.

So, s_x = 1 + sum_{i=0 to x-1} s_i -1 + s_{x-1}.

Wait, perhaps it's better to see that s_x = 1 + s_{x-1}.

Wait, no, from above, s_x = sum_{i=0 to x-1} s_i.

Given that, s_x = s_{x-1} + s_{x-2} + ... + s_0.

This is similar to s_x = 2*s_{x-1}, because s_{x-1} = s_{x-2} + ... + s_0.

Wait, s_x = s_{x-1} + s_{x-1} = 2*s_{x-1}.

Wait, but s_0=1, s_1=1 + s_0=2, s_2=1 + s_0 + s_1=1 +1 +2=4, s_3=1 + s_0 + s_1 + s_2=1 +1 +2 +4=8, and so on.

So, s_x = 2^x.

Wait, s_x = 2^x.

Wait, but for x=0, s_0=1=2^0.

x=1, s_1=2=2^1.

x=2, s_2=4=2^2.

x=3, s_3=8=2^3.

So, s(x,k)=2^x when k=2.

Wait, but in the sample input where k=2, x=1, a=7 >=2^1=2, YES.

x=1, a=1 <2, NO.

x=3, a=15 >=8, YES.

But in another sample input, k=3, x=3, a=6.

If s(x,k)=2^x for k=2, but for k=3, is it different?

Wait, perhaps s(x,k)=ceil(k^(x)/(k-1)) or something.

Wait, in the sample input where k=3, x=3, a=6.

If s(x,k)=(k/(k-1))^x, but (3/2)^3=2.375, ceil(2.375)=3, but a=6 >=3, which should be YES, but the sample output is NO.

So, that's not correct.

Wait, perhaps s(x,k)=sum_{i=0 to x} (k / (k-1))^i.

Wait, that seems too vague.

Let me think differently.

Suppose that after x losses, the next win must cover all the losses.

So, sum_{i=1 to x} y_i <= y_{x+1}*(k-1).

To minimize s(x,k), perhaps set y_i = s_{i-1}, and s_x = sum_{i=1 to x} y_i + y_{x+1}.

Wait, this is getting too tangled.

Let me look for a different approach.

I recall that in such problems, the minimal starting amount often relates to the sum of a geometric series.

Given that, perhaps s(x,k) = sum_{i=0 to x} ceil(y_i / (k-1)).

But I need a better way.

Let me consider that after x losses, the next win must cover all the losses.

So, y_{x+1}*(k-1) >= sum_{i=1 to x} y_i.

To minimize s(x,k), perhaps set y_i =1 for all i.

Then, y_{x+1} >= ceil(x / (k-1)).

Then, s(x,k) = x*1 + y_{x+1} = x + ceil(x / (k-1)).

But in the sample input where x=3, k=3, a=6.

s(3,3)=3 + ceil(3/2)=3 + 2=5.

But a=6 >=5, which should be YES, but the sample output is NO.

So, this formula is incorrect.

Wait, maybe I need to adjust the formula.

Let me consider that y_{x+1} >= sum_{i=1 to x} y_i / (k-1).

If I set y_i =1 for all i, then y_{x+1} >= x / (k-1).

Then, s(x,k) = sum_{i=1 to x} y_i + y_{x+1} = x + ceil(x / (k-1)).

But in the sample input, x=3, k=3, a=6.

s(3,3)=3 + ceil(3/2)=3 + 2=5.

But a=6 >=5, which should be YES, but the sample says NO.

So, perhaps my formula is underestimating s(x,k).

Maybe I need to consider that y_{x+1} >= sum_{i=1 to x} y_i / (k-1), and y_i can be different.

Perhaps choosing y_i =1 is not optimal.

Let me try to set y_i = (k-1)^{i-1}.

Then, sum_{i=1 to x} y_i = sum_{i=0 to x-1} (k-1)^i = ((k-1)^x -1)/(k-1 -1).

Then, y_{x+1} >= sum_{i=1 to x} y_i / (k-1) = (((k-1)^x -1)/ (k-2)) / (k-1) = ((k-1)^x -1)/((k-1)*(k-2)).

This seems too complicated.

Wait, perhaps there's a standard formula for this kind of problem.

I recall that in some betting strategies, the required starting bankroll to handle a certain number of consecutive losses is related to a geometric series.

In particular, for a Martingale system with k=2, the required starting amount is s(x,2)=2^x -1.

But in our case, k can be greater than 2, and x is the maximum number of consecutive losses.

Wait, let's check for k=2.

If s(x,2)=2^x -1, then for x=1, s(1,2)=1, but in the sample input, a=1 is NO, and a=7 is YES, which suggests s(1,2)=1 is too low.

Wait, perhaps s(x,k)=sum_{i=0 to x} floor((k-1)^i).

Wait, for k=2, x=1, s(1,2)=1 +1=2, which matches the first sample.

For k=2, x=3, s(3,2)=1 +1 +1 +1=4, but in the sample input, a=15 >=4, which is YES.

But in another sample, k=3, x=3, s(3,3)=1 +2 +4 +8=15, but a=6 <15, which should be NO.

This seems consistent.

Wait, for k=3, x=3, s(3,3)=1 +2 +4 +8=15, which matches the sample input a=6 <15, NO.

Similarly, for k=5, x=4, s(4,5)=1 +4 +16 +64 +256=337, but in the sample input a=7 <337, which should be NO, but in the sample output, it's YES.

Wait, that contradicts.

Wait, in test case 6: k=5, x=4, a=7 → YES

But according to s(x,k)=sum_{i=0 to x} floor((k-1)^i), s(4,5)=1 +4 +16 +64 +256=337, but a=7 <337, which should be NO, but it's YES.

So, my formula is incorrect.

Perhaps I need to adjust it.

Let me consider that y_i = s_{i-1}, where s_i is the minimal starting amount for i losses.

Then, s_x = sum_{i=1 to x} y_i + y_{x+1}, where y_{x+1} >= sum_{i=1 to x} y_i / (k-1).

Assuming y_i = s_{i-1}, then s_x = sum_{i=0 to x-1} s_i + ceil(sum_{i=0 to x-1} s_i / (k-1)).

This seems recursive and complex.

Perhaps a better way is to consider that s(x,k) = sum_{i=0 to x} floor((k-1)^i).

Wait, for k=2, s(x,2)=sum_{i=0 to x} 1^i = x +1.

But in the first sample, x=1, a=7 >=2, YES.

x=1, a=1 <2, NO.

For k=3, x=3, s(3,3)=1 +2 +4=7, but in the sample input a=6 <7, NO.

Another sample: k=5, x=4, s(4,5)=1 +4 +16 +64=85, a=7 <85, but sample output is YES.

Wait, that contradicts.

Wait, in test case 6: k=5, x=4, a=7 → YES

But according to s(x,k)=sum_{i=0 to x} (k-1)^i = sum_{i=0 to 4} 4^i =1 +4 +16 +64 +256=337, but a=7 <337, which should be NO, but it's YES.

So, my formula is wrong.

Perhaps I need to consider that y_{x+1} >= sum_{i=1 to x} y_i / (k-1), and choose y_i optimally.

Let me try to set y_i = (k-1)^{i-1}.

Then, sum_{i=1 to x} y_i = sum_{i=0 to x-1} (k-1