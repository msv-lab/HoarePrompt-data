Alright, I have this problem to solve. Let's see what it's about.

So, there's this card game with 2n cards, and each number from 1 to n appears on exactly two cards. The deck is divided between me and Nene, each getting n cards. Then, we take turns playing one card at a time, alternating, for a total of 2n turns. The scoring is based on whether the card played matches a number already on the table.

The goal is to maximize my score, assuming Nene plays optimally to maximize her score and minimize mine in case of ties.

First, I need to understand the game mechanics thoroughly.

Each player has n cards, and there are 2n turns. On each turn, the player chooses one card from their hand and plays it on the table. If the number on that card is already present on the table, the player scores a point.

Nene is very smart and will always make the best possible move for herself, considering both maximizing her score and minimizing mine.

I need to figure out, given my hand of cards, what's the maximum score I can achieve if I play optimally.

Let's look at the example to get a better understanding.

In the first test case:

n = 4

My cards: 1, 1, 2, 3

Nene's cards: 2, 3, 4, 4

The sequence of plays could be:

1. I play 1

2. Nene plays 4

3. I play 1 and get 1 point (since 1 is already on the table)

4. Nene plays 4 and gets 1 point

5. I play 2

6. Nene plays 2 and gets 1 point

7. I play 3

8. Nene plays 3 and gets 1 point

So, I end up with 1 point.

Is there a way for me to get more than 1 point? Let's try different sequences.

Suppose I play 2 first:

1. I play 2

2. Nene plays 4

3. I play 1

4. Nene plays 4, gets 1 point

5. I play 1, get 1 point

6. Nene plays 2, gets 1 point

7. I play 3

8. Nene plays 3, gets 1 point

Again, I get only 1 point.

Another sequence:

1. I play 3

2. Nene plays 4

3. I play 1

4. Nene plays 4, gets 1 point

5. I play 1, get 1 point

6. Nene plays 2

7. I play 2, get 1 point

8. Nene plays 3, gets 1 point

Wait, in this sequence, I get 2 points. But is this possible?

Let's see Nene's perspective. Nene is playing optimally to maximize her score and minimize mine.

In the first step, I play 3.

Table: 3

Nene's hand: 2,3,4,4

She can play 2,3, or 4.

If she plays 2:

Table: 3,2

Then I play 1.

Table: 3,2,1

Nene plays 4.

Table: 3,2,1,4

I play 1, get 1 point.

Table: 3,2,1,4,1

Nene plays 4, gets 1 point.

Table: 3,2,1,4,1,4

I play 2, get 1 point.

Table: 3,2,1,4,1,4,2

Nene plays 3, gets 1 point.

Table: 3,2,1,4,1,4,2,3

Total points: I have 2, Nene has 3.

Wait, is this possible? Let's see Nene's optimal play.

In the first step, I play 3.

Nene has 2,3,4,4.

If she plays 3, then:

Table: 3,3

Then I play 1.

Table: 3,3,1

Nene plays 4.

Table: 3,3,1,4

I play 1, get 1 point.

Table: 3,3,1,4,1

Nene plays 4, gets 1 point.

Table: 3,3,1,4,1,4

I play 2.

Table: 3,3,1,4,1,4,2

Nene plays 2, gets 1 point.

Table: 3,3,1,4,1,4,2,2

Total points: I have 1, Nene has 4.

So, in this case, Nene would prefer to play 3 in the first step to maximize her score.

So, perhaps in the first sequence, I get only 1 point.

Hence, the answer is 1.

In the second test case, the answer is 2.

Looking at the program:

def func():

for line in [*open(0)][2::2]:

print(len((tokens := line.split())) - len({*tokens}))

It seems to read every second line starting from the third line (which are the lines containing the card numbers in my hand).

Then, it splits the line into tokens, counts the number of tokens, and subtracts the number of unique tokens.

So, for example, in the first test case:

n = 4

My cards: 1 1 2 3

Number of tokens: 4

Number of unique tokens: 3

Difference: 4 - 3 = 1, which matches the sample output.

In the second test case:

n = 8

My cards: 7 4 1 2 8 8 5 5

Number of tokens: 8

Number of unique tokens: 6

Difference: 8 - 6 = 2, which matches the sample output.

Similarly, for the other test cases, this seems to hold.

So, the program is calculating the number of duplicate cards in my hand.

Wait, but is that equivalent to the maximum points I can score?

In the first test case, I have two 1's, so difference is 1.

In the second test case, I have two 8's and two 5's, so difference is 2.

In the third test case, I have one duplicate (assuming from the output), difference is 1.

In the fourth test case, I have no duplicates, difference is 0.

In the fifth test case, I have one duplicate, difference is 0.

Wait, but in the fifth test case, n=1, and my cards are just 1 (since there are two cards with 1, but I only have one in my hand).

Wait, the input is:

1

1

So, n=1, my cards: 1

Number of tokens: 1

Number of unique tokens: 1

Difference: 0, which matches the sample output.

So, it seems that the program is calculating the number of duplicates in my hand.

But is that the correct approach to solve the problem?

Let me think about the game mechanics again.

I need to maximize my score, considering that Nene is playing optimally against me.

Each time I play a card, I get a point if that card's number is already on the table.

Similarly for Nene.

Nene wants to maximize her score and minimize mine, in that order.

So, she will prioritize her own score over mine.

I need to find a strategy that maximizes my score, assuming Nene is playing optimally.

Let me consider the frequencies of each number in my hand.

Suppose I have multiple cards with the same number.

If I play the first card, it won't give me a point, but if I play the second card, it will give me a point if the first one is already on the table.

The question is, when should I play the duplicate cards to maximize my score?

Also, I need to consider Nene's moves.

Nene will play in a way that maximizes her score and minimizes mine.

So, she will try to prevent me from scoring points.

Wait, perhaps I can think in terms of the number of duplicates I have.

Each duplicate card has the potential to give me one point, provided that the first card of that number is already on the table when I play the second one.

But Nene can interfere with that.

Wait, maybe I need to think about the ordering of plays.

Let me consider that Nene knows my hand and will play accordingly.

Wait, but in reality, she doesn't know exactly which cards I have, but since the problem says "assuming that the cards are already distributed", and I know my cards, but not hers.

But in this problem, it's a bit different because Nene is assumed to be playing optimally against me.

Wait, but in the game, both players can see the table at each step, so it's a public game.

I think the key is to realize that Nene will play in a way that minimizes my potential points.

So, if I have multiple cards with the same number, Nene will try to play in a way that prevents me from scoring points.

Wait, but in reality, Nene doesn't know which cards I have, but since she's playing optimally, perhaps there's some strategy that can be derived.

Wait, perhaps I need to think in terms of graph theory or some combinatorial game theory.

But that might be too complicated.

Let me consider a simpler approach.

Suppose I have k pairs of duplicate cards.

Each pair can potentially give me one point.

But Nene can interfere with that.

However, if I play the first card of a pair, and Nene doesn't have a card with that number, then when I play the second card, it will be already present on the table, and I get a point.

But if Nene has a card with that number, she can play it before I play the second card, thus preventing me from scoring that point.

Wait, no.

Actually, since Nene plays after me in turns, if I play the first card, and Nene doesn't have a card with that number, then when I play the second card, it will already be on the table, and I get a point.

If Nene has a card with that number, she can play it before I play the second card, thus making it so that when I play the second card, I get a point, but she also could have gotten a point if she played her card after the first one was on the table.

Wait, it's getting complicated.

Let me think differently.

Suppose I have m numbers that appear exactly twice in my hand.

Then, the number of duplicates is m.

Is my maximum score equal to m?

In the first test case, m=1 (number 1 appears twice in my hand), and the sample output is 1.

In the second test case, m=0 (no number appears twice in my hand), but the sample output is 2.

Wait, no.

Wait, in the second test case:

n=8

My cards: 7 4 1 2 8 8 5 5

So, numbers 8 and 5 appear twice in my hand, so m=2.

And the sample output is 2.

Similarly, in the third test case, m=1 (assuming from the output), difference is 1.

Wait, but in the fifth test case, n=1, my cards:1, but there is another card with 1 in Nene's hand.

Wait, no, n=1, total cards are 2*1=2, distributed equally, so both me and Nene have one card, which is 1.

But in the input, it's just "1", which is my hand.

So, my hand has one 1, and Nene's hand has one 1.

But according to the program, len(tokens)=1, len(unique)=1, difference=0, which matches the sample output of 0.

So, in this case, m=0 because no number appears twice in my hand.

Wait, but in the second test case, m=2, and the sample output is 2.

In the fourth test case, m=0, output is 0.

In the third test case, m=1, output is 1.

So, it seems that the maximum score I can get is equal to the number of numbers that appear twice in my hand.

But is this always true?

Wait, in the first test case, m=1, output is 1.

In the second test case, m=2, output is 2.

In the third test case, m=1, output is 1.

In the fourth test case, m=0, output is 0.

In the fifth test case, m=0, output is 0.

So, perhaps the maximum score is equal to the number of numbers that appear twice in my hand.

But is this generally true?

Let me think about another example.

Suppose n=3.

My hand: 1,2,3.

Nene's hand:1,2,3.

In this case, m=0.

Possible game:

I play 1.

Nene plays 1, gets 1 point.

I play 2.

Nene plays 2, gets 1 point.

I play 3.

Nene plays 3, gets 1 point.

My score:0.

Another sequence:

I play 3.

Nene plays 1.

I play 2.

Nene plays 2, gets 1 point.

I play 1.

Nene plays 3, gets 1 point.

My score:0.

So, in this case, m=0, and my score is 0, which matches the program's output.

Another example:

n=3.

My hand:1,1,2.

Nene's hand:2,3,3.

Possible game:

I play 1.

Nene plays 2.

I play 1, get 1 point.

Nene plays 3.

I play 2, get 1 point.

Nene plays 3, get 1 point.

My score:2.

Wait, but m=1 (only one number, 1, appears twice in my hand), but my score is 2.

This contradicts the earlier assumption.

Wait, but in this case, m=1, but I got 2 points.

Wait, perhaps I made a mistake in counting m.

Wait, in this case, in my hand:1,1,2.

So, number 1 appears twice, number 2 appears once.

So, m=1.

But according to the program, len(tokens)=3, len(unique)=2, difference=1, which matches m.

But in the game, I got 2 points.

Wait, perhaps this is not possible.

Let's see Nene's optimal play.

I play 1.

Table:1

Nene plays 2.

Table:1,2

I play 1, get 1 point.

Table:1,2,1

Nene plays 3.

Table:1,2,1,3

I play 2, but 2 is already on the table, so I get 1 point.

Table:1,2,1,3,2

Nene plays 3, get 1 point.

Table:1,2,1,3,2,3

Total: I have 2 points, Nene has 2 points.

But Nene's goal is to maximize her score and minimize mine.

Is there a better play for Nene?

Alternative:

I play 1.

Nene plays 3.

Table:1,3

I play 1, get 1 point.

Table:1,3,1

Nene plays 3, get 1 point.

Table:1,3,1,3

I play 2.

Table:1,3,1,3,2

Nene plays 2, get 1 point.

Table:1,3,1,3,2,2

My score:1, Nene's score:3.

So, in this case, Nene chooses to play 3 instead of 2 in the first step, which leads to me getting only 1 point.

So, Nene's optimal play would be to play 3 in the second step, maximizing her own score.

Hence, in this case, my maximum score is 1, which matches m=1.

But according to my earlier calculation, I thought I could get 2 points, but that was incorrect because of Nene's optimal play.

So, perhaps the maximum score I can get is equal to m, where m is the number of numbers that appear twice in my hand.

Wait, but in the earlier example where n=3, my hand:1,1,2; Nene's hand:2,3,3.

In this case, m=1.

And in the optimal play, I can get 1 point.

Similarly, in the first test case, m=1, output=1.

In the second test case, m=2, output=2.

In the third test case, m=1, output=1.

In the fourth test case, m=0, output=0.

In the fifth test case, m=0, output=0.

So, perhaps the maximum score I can get is equal to m, the number of numbers that appear twice in my hand.

But why is that?

Let me try to find a general strategy.

Suppose I have a number x that appears twice in my hand.

I can play the first x, and then later play the second x to get a point.

But Nene can interfere with that by playing her x in between.

However, if Nene doesn't have x, then I can play the second x to get a point.

Wait, but in the earlier example, Nene did have x, and she played it in a way that minimized my score.

Wait, perhaps I need to consider that for each number that appears twice in my hand, I can get one point, assuming that Nene doesn't have that number.

But in reality, Nene has the other copy of the number if it appears only once in my hand.

Wait, let's think differently.

For each number that appears twice in my hand, I can potentially get one point by playing the second copy after the first one is on the table.

Nene cannot prevent this because she doesn't have that number.

For numbers that appear only once in my hand, Nene has the other copy.

So, if I play my copy, Nene can play her copy later to get a point.

Alternatively, if I play a number that appears only once in my hand, and Nene plays another number, then when Nene plays her copy of my number, she gets a point.

But in any case, for numbers that appear only once in my hand, I cannot get a point from them because Nene has the other copy and can play it after I play mine.

Hence, my maximum score is equal to the number of numbers that appear twice in my hand.

Wait, but in the earlier mistaken example, I thought I could get 2 points, but actually, with Nene's optimal play, I could only get 1 point.

Wait, in that case, m=1, and I got 1 point.

So, perhaps it's correct.

Let me formalize this.

Let m be the number of numbers that appear twice in my hand.

Then, my maximum score is m.

Reasoning:

For each number that appears twice in my hand, I can play the first copy, and then later play the second copy to get a point, since Nene doesn't have that number.

For numbers that appear only once in my hand, Nene has the other copy, and she can play it in a way that prevents me from getting a point from it.

Hence, my maximum score is m.

Therefore, the program is correct in calculating m as the number of duplicates in my hand.

In code, it's done by splitting the input line into tokens, counting the total number of tokens, and subtracting the number of unique tokens.

Thus, the correctness is True.

## Final Solution
To solve this problem, we need to determine the maximum number of points we can score in a card game where we and Nene alternately play cards, and points are awarded based on whether a card's number is already present on the table. Nene plays optimally to maximize her score and minimize ours.

### Approach
1. **Understanding the Game Mechanics**:
    - Each player has `n` cards.
    - We take turns playing one card at a time, and points are awarded if the card's number is already on the table.
    - Nene plays optimally to maximize her score and minimize ours.

2. **Key Insight**:
    - For numbers that appear twice in our hand, we can play the first card and later play the second card to score a point (since Nene doesn't have that number).
    - For numbers that appear only once in our hand, Nene has the other copy and can play it to prevent us from scoring additional points from that number.

3. **Solution**:
    - The maximum score we can achieve is equal to the number of unique numbers that appear twice in our hand.

### Solution Code
```python
def main():
    import sys
    input = sys.stdin.read
    data = input().splitlines()
    t = int(data[0])
    for i in range(t):
        n = int(data[2*i + 1])
        a = data[2*i + 2].split()
        duplicates = len(a) - len(set(a))
        print(duplicates)

if __name__ == "__main__":
    main()
```

### Explanation
1. **Reading Input**:
    - Read the number of test cases `t`.
    - For each test case, read `n` and the list of integers in our hand.

2. **Calculating Duplicates**:
    - For each test case, calculate the number of duplicates in our hand by subtracting the number of unique elements from the total number of elements.

3. **Output**:
    - Print the number of duplicates for each test case, which represents the maximum points we can score.

This approach ensures that we achieve the maximum possible score given Nene's optimal play.