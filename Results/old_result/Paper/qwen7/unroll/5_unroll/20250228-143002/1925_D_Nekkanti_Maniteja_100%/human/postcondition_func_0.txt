The function processes multiple test cases, where for each test case, it reads integers n, m, and k, followed by m lines of integers a_i, b_i, and f_i. It calculates the value of `s` using the formula \( s = \sum_{i=0}^{k-1} \left(c \cdot i \cdot c \cdot m + c \cdot a\right) \mod M \), where \( c = \left(\frac{n \cdot (n - 1)}{2}\right)^{-1} \mod M \) and `a` is the sum of `f_i` values. Finally, it prints the value of `s` modulo \( M \) for each test case.