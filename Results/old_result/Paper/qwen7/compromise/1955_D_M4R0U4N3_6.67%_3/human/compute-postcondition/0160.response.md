Postcondition: `ans` is increased by 1, `r` is updated to `m + 1`. Depending on whether `a[r]` is found in `todo`, `old` is either removed from the `extra` list and added to the `todo` set, or added to the `extra` list. `done` now includes `a[r]` if `a[r]` was in `todo`, and `todo` is updated accordingly. `done`, `todo`, and `extra` lists remain as they were at the end of the previous iteration, and the length of `done` is greater than or equal to `k`.