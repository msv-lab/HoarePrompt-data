The function `func_18` accepts two parameters: `p`, a list of integers representing chosen vertices, and `x`, an integer representing the maximum value a vertex can have. The length of `p` is equal to `x`. The function returns `-1` if the first element of the list `p` exceeds `x`. Otherwise, it performs a binary search to find the last index `mid` where the elements in `p` are less than or equal to `x`. The function returns `mid`, which is the midpoint of the last valid range found during the search.