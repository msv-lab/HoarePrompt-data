Postcondition: `r` remains either `r_end + 3` or `r_end + 4`. After executing the if-else block, `old` is moved to `todo`, `ans` is incremented by 1. Depending on the condition in the if statement, `extra` and `todo` are updated as follows:
- If `a[r]` is in `todo`, `todo` is updated accordingly based on whether `old` was in `done` or `todo`.
- If `a[r]` is not in `todo`, `extra` includes `a[r]`, and `todo` is updated accordingly based on whether `old` was in `done` or `todo` if `len(done) >= k`.