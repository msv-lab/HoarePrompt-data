Postcondition: `ans` is 1 if the length of `done` is greater than or equal to `k`, else `ans` is 0; `r` is `m`; `old` is `a[r - m]`; `old` is either already in `done` or has been added to `todo`. If `a[r]` is in `todo`, `done` contains `a[r]` and `todo` does not contain `a[r]`. If `a[r]` is in `extra`, `extra` contains `a[r]` and `old` is either already in `done` or has been added to `todo`.