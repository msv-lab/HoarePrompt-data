Postcondition: `l` is `n - 2`, `r` is 0, `st` is `n - 3`, `end` is increased by 3, `a[0]` is not equal to `a[-1]` if `st == 0` and `end == 0` and `a[0] != a[-1]`. Otherwise, `l` is `n - 2`, `r` is 0, `st` is `n - 3`, `end` is `end + 3`, `a[0]` is equal to `a[-1]`, and `ans` is `- (n - 2)`.