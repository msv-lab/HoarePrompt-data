Postcondition: `w` is a list of integers obtained from splitting the input string and converting each element to an integer, `n` is an input integer. If `n` is greater than or equal to 3, `eta_ln` is `n + 4`, `j` is `n + 4`, `res` is increased by the sum of `q[eta[j]] * (q[eta[j]] - 1) * (q[eta[j]] - 2) // 6` for each `j` from `1` to `n + 3`, and `q[eta[j]] * (q[eta[j]] - 1) // 2 * rho` for each `j` from `1` to `n + 3`, and `rho` is increased by `q[eta[j]]` for each `j` from `1` to `n + 3`. If `n` is less than 3, `n` remains less than 3.