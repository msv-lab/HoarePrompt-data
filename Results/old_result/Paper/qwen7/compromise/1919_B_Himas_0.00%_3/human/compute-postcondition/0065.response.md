Postcondition: `e` is an input string with at least one character, `P` is 2 if `q` was '+', and `M` is 2 if `q` was not '+'.