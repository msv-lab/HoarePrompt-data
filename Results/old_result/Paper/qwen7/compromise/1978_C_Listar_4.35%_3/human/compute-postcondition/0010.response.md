Postcondition: `n` and `k` are integers. If `n` is odd, `max_k` is calculated as `(n * n + k) / 2`. If `n` is even, `max_k` is set to `n`.