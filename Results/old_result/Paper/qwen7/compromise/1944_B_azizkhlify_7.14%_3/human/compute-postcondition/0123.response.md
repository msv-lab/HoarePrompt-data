Postcondition: `res` is an empty list, `i` is `n + 2`, and if `ul` equals `ur`, we break out of the most internal loop or if statement.