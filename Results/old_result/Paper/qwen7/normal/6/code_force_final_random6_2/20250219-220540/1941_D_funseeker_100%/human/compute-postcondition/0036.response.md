Postcondition: `q` is `x`, `temp` contains an element `(x + r) % n`, regardless of whether `c` is '0' or '?'.