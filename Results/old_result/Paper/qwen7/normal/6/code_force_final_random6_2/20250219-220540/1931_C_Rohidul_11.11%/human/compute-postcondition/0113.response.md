Postcondition: `l` is `n - 2`, `r` is 0, `st` is `n - 3`, `end` is increased by 3, `a[0]` is not equal to `a[-1]`