Postcondition: `max_val` is `x - 1` if `x % (x - 3) != 0`, otherwise `max_val` is `x - 2`. If `x % y == 0`, then `max_val` is set to `y`.