Postcondition: `idx1` is either `i` with `p1` being 1 and `p2` being 0, or `idx1` is 0 with `p1` being 0 and `p2` being 1. `idx2` is either 0 with `p2` being 1, or `idx2` is `i` with `p1` being 0.