Postcondition: `old` is equal to `a[r - m]`. If `a[r]` is in `todo`, then `old` remains unchanged and is not in `extra`. If `a[r]` is in `done`, `old` is added to `todo`. If `a[r]` is in `extra`, `old` remains in `extra`. If `a[r]` is not in `todo` or `done` and not in `extra`, `old` remains unchanged and is not in `extra`. Additionally, the length of `done` is greater than or equal to `k`.