Postcondition: `nx` is a string, `j` is `n + 1`, `n` must be greater than or equal to 3. If either `i` is in the range `sb[:n // 4 - 1]` or `j` is in the range `sb[:n // 4 - 1]`, then `nx` ends with 'S'. Otherwise, if the element at index `j-1` in the list `xx[i]` is not `'?'`, then `nx` is the value of `xx[i][j - 1]` followed by 'F'. If the element at index `j-1` in the list `xx[i]` is `'?'`, then `nx` is `'F'` followed by 'F'.