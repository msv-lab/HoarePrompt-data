Postcondition: `xx[i][j - 1]` is '?', `i` is an index within the range of `xx`, and `j - 1` is an index within the range of `xx[i]`; `nx` is a string with an additional character 'S' appended to it if neither `i` nor `j` is in `sa[:n // 4 - 1]`. Otherwise, `nx` is 'F'.