Postcondition: `ends` is a list of all keys from the dictionary `nodes` whose corresponding value lists have a length of exactly one; `s` and `e` are the first and second elements of the list `ends`, respectively; `tree` is a list containing the elements `s` and `curr`; `prev` is equal to `s`; `curr` is the first element of `nodes[s]` and must not be equal to `e`; `tree` has been appended with `curr`. Additionally, `nodes[curr][0]` is not equal to `prev`.