Postcondition: `nodes[key]` is a list. If the length of `nodes[key]` is 1, then `ends` is a list with an additional element `key`. There is no change to `ends` if the length of `nodes[key]` is not 1.