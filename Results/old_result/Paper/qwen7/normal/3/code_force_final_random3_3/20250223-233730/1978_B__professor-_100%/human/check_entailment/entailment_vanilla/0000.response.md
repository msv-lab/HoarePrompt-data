### Reasoning:

1. **Understanding the Problem:**
   - We need to maximize Bob's profit by choosing an optimal `k` (number of buns sold at a modified price).
   - The modified price for the first `i-th` bun is `(b - i + 1)` coins.
   - The remaining buns are sold at the usual price `a` coins each.

2. **Analyzing the Given Code:**
   - The code correctly reads the number of test cases `t`.
   - For each test case, it reads `n`, `a`, and `b`.
   - It handles different scenarios based on the values of `b` and `a`.

3. **Scenarios Handled by the Code:**
   - **Scenario 1:** If `b <= a`, it means selling all buns at the usual price `a` gives the maximum profit.
     ```python
     if b <= a:
         print(n * a)
     ```
   - **Scenario 2:** If `b - a >= n`, it means selling the first `n` buns at the modified prices and the rest at the usual price `a` gives the maximum profit.
     ```python
     elif b - a >= n:
         print(int((2 * b - n + 1) * n // 2))
     ```
   - **Scenario 3:** Otherwise, it calculates the profit by selling the first `b-a+1` buns at modified prices and the rest at the usual price `a`.
     ```python
     else:
         print(int((b - a) * (b - a + 1) // 2 + a * n))
     ```

4. **Verification:**
   - The logic in the code matches the problem statement.
   - The conditions and calculations are correctly implemented to cover all possible scenarios.

### Conclusion:
The given program correctly implements the logic to determine the maximum profit Bob can obtain by selling all buns under the given conditions.

### Correctness:
**True**