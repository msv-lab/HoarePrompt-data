Postcondition: `i` is either `i_prev + 1` or `i_prev + 2`, `n` must be at least 4, `res` is an input string, `arr` contains either `[i]` or `[i_prev + 1, i]` with `i` appended to `arr`.