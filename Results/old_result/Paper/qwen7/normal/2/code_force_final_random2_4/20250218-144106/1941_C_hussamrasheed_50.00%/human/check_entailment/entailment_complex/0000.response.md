Reasoning:
1. The function correctly reads the number of test cases `t`.
2. For each test case, it reads the length of the string `n` and the string `s`.
3. It counts the occurrences of the substring "map" in the original string `s` and stores this count in `m`.
4. It removes all occurrences of "map" from `s` using `s.replace('map', '')`.
5. It then counts the occurrences of the substring "pie" in the modified string `s` and stores this count in `p`.
6. Finally, it prints the sum of `m` and `p`, which represents the minimum number of characters that need to be deleted to make the string beautiful.

Given the problem statement and the annotated program, the logic implemented in the function is correct. The function processes each test case as required and calculates the minimum number of deletions needed to make the string beautiful.

Correctness: **True**