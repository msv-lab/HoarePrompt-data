The function takes an integer `n`, an integer `m` (which is not used in the function), a list `a` of `n` integers, and a string `s` of length `n` consisting of 'L' and 'R'. It constructs a new list `b` by selecting elements from `a` based on the direction specified by `s`. Then, it calculates the cumulative products of the elements in `b` in reverse order and returns these products as a list.