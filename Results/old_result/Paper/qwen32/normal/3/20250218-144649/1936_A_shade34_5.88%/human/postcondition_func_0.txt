The function reads the number of test cases and for each test case, it reads an integer `n` representing the length of a secret permutation `p`. It then performs up to 3n queries to compare the bitwise OR of pairs of elements in `p`. After determining the indices `i` and `j` that maximize the bitwise XOR of `p_i` and `p_j`, it outputs "! i j".