Functionality: **The function takes a positive integer `n`, a list of operations, and a list of queries. It modifies an initially empty array based on the operations and returns a list of elements from the array at positions specified by the queries. Each operation either appends a value to the array or duplicates the array. The queries are indices into the final array, and the function handles indices larger than the array length by using modulo arithmetic.**