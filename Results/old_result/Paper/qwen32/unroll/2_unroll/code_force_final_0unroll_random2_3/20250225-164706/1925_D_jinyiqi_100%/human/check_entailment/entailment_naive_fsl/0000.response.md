Correctness: **False**

Explanation:
The provided program does not correctly compute the expected value of the sum of friendship values of all k pairs chosen for the excursions. The logic in the program seems to be incorrect in the way it calculates the numerator (p) and the denominator (q) of the fraction representing the expected value.

Let's analyze the logic:
- The program calculates the sum of all initial friendship values (`sum_f`).
- It calculates the number of possible pairs of children (`cn2`).
- It then calculates `p` and `q` using the formulas:
  - `p = 2 * k * cn2 * sum_f + m * k * (k - 1)`
  - `q = 2 * cn2 ** 2`

However, these formulas do not correctly represent the expected value of the sum of friendship values of all k pairs chosen for the excursions. The expected value needs to consider the probability of choosing each pair and the changes in friendship values over the excursions.

The correct approach involves calculating the expected contribution of each friendship pair to the total sum over k excursions. This requires a more detailed probabilistic analysis and summation of contributions, which the current program does not do.

Here is a counterexample where the program does not produce the correct output:
- Input:
  ```
  1
  3 2 3
  1 2 1
  2 3 2
  ```
- Expected Output: `10`
- Actual Output of the Program: `16`

In this example, the program incorrectly calculates the expected value. The correct expected value can be calculated as follows:
- There are 3 possible pairs: (1,2), (1,3), (2,3).
- The probability of choosing any specific pair in one excursion is 1/3.
- The expected sum of friendship values over 3 excursions can be calculated by considering the contributions of each friendship pair.

Given the incorrect logic and the counterexample, the program is not correct.