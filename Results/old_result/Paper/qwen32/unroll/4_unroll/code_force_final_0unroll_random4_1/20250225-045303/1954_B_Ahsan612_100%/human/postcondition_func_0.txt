The function processes `t` test cases, each consisting of an integer `n` and a list `a` of `n` integers. For each test case, it determines the smallest number of consecutive occurrences of any single number in the list `a`. If all numbers in the list occur consecutively the same number of times or if the list contains only one type of number, it outputs `-1`. Otherwise, it outputs the smallest number of consecutive occurrences.