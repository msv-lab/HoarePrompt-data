Let's analyze the given Python program step by step to determine its correctness based on the problem description.

### Step-by-Step Reasoning:

1. **Initialization:**
   - The program starts by reading the number of test cases `t`.
   - It initializes an empty list `r` to store the results for each test case.

2. **Processing Each Test Case:**
   - For each test case, it reads the number of constraints `n`.
   - It initializes:
     - `cx` as an empty set to store values that `k` cannot be (from constraints of type 3).
     - `ax` to a very large value (`1000000000 + 7`) to represent the upper bound (from constraints of type 2).
     - `bx` to `-1` to represent the lower bound (from constraints of type 1).

3. **Reading Constraints:**
   - For each constraint, it reads the type `a` and the value `x`.
   - If `a == 1`, it updates `bx` to be the maximum of `x` and the current `bx` (to ensure `k` is at least `x`).
   - If `a == 2`, it updates `ax` to be the minimum of `x` and the current `ax` (to ensure `k` is at most `x`).
   - If `a == 3`, it adds `x` to the set `cx` (to ensure `k` is not equal to `x`).

4. **Checking Feasibility:**
   - After processing all constraints, it checks if `bx >= ax`. If true, it means there are no integers `k` that can satisfy both the lower and upper bounds simultaneously, so it appends `0` to the results list `r`.
   - If `bx < ax`, it calculates the number of integers between `bx` and `ax` inclusive, excluding those in `cx`.

5. **Counting Valid Integers:**
   - It initializes `tmp` to `0` to count how many elements in `cx` fall within the range `[bx, ax]`.
   - It iterates over each element in `cx` and increments `tmp` if the element is within the range.
   - Finally, it calculates the number of valid integers as `ax - bx + 1 - tmp` and appends this to the results list `r`.

6. **Output:**
   - After processing all test cases, it prints the results separated by newlines.

### Analysis of the Program:
- The program correctly handles the constraints and calculates the number of valid integers `k` that satisfy all constraints.
- It ensures that the lower bound `bx` is never greater than the upper bound `ax`.
- It correctly counts and excludes the values that `k` cannot be from the final count.

### Conclusion:
The program correctly implements the logic required to solve the problem as described. Therefore, the correctness of the program is:

Correctness: **True**