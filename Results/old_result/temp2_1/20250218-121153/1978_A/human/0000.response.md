```python
import io
import sys

def capture_output(func, input_data):
    sys.stdin = io.StringIO(input_data)
    captured_output = io.StringIO()
    sys.stdout = captured_output
    func()
    sys.stdout = sys.__stdout__
    return captured_output.getvalue().strip()

# Assuming the provided program is saved as 'program.py' and can be imported from the same dir.
from program import func

# Write your test cases below
# Each test case should include assertions based on the problem description

# Test Case 1
input_data = "5\n2\n1 1\n4\n2 3 3 1\n5\n2 2 3 2 2\n2\n10 3\n3\n1 2 3"
expected_output = "2\n4\n5\n13\n5"
output = capture_output(func, input_data)
assert output == expected_output, f"Test case 1 failed: Expected {expected_output}, got {output}"

# Test Case 2 (Single test case with minimum number of books)
input_data = "1\n2\n1 2"
expected_output = "3"
output = capture_output(func, input_data)
assert output == expected_output, f"Test case 2 failed: Expected {expected_output}, got {output}"

# Test Case 3 (Maximum number of books)
input_data = "1\n100\n" + " ".join([str(i) for i in range(1, 101)])
expected_output = "199"
output = capture_output(func, input_data)
assert output == expected_output, f"Test case 3 failed: Expected {expected_output}, got {output}"

# Test Case 4 (All books have the same number of pages)
input_data = "1\n5\n10 10 10 10 10"
expected_output = "20"
output = capture_output(func, input_data)
assert output == expected_output, f"Test case 4 failed: Expected {expected_output}, got {output}"

# Test Case 5 (Books with varying page counts)
input_data = "1\n7\n5 8 1 3 4 6 2"
expected_output = "14"
output = capture_output(func, input_data)
assert output == expected_output, f"Test case 5 failed: Expected {expected_output}, got {output}"

# Test Case 6 (Books with large page counts)
input_data = "1\n2\n1000000000 1000000000"
expected_output = "2000000000"
output = capture_output(func, input_data)
assert output == expected_output, f"Test case 6 failed: Expected {expected_output}, got {output}"

# If no assertion errors, all tests passed
print("All test cases passed.")
```

This script includes a variety of test cases to ensure the program works correctly under different scenarios, including edge cases and typical use cases.