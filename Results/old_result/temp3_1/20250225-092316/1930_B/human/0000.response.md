```python
# Include necessary imports if any
# Assume the provided program is saved as 'program.py' and can be imported from the same dir.

import io
import sys
from program import func

def run_program_with_captured_io(input_data):
    original_stdin = sys.stdin
    original_stdout = sys.stdout

    try:
        sys.stdin = io.StringIO(input_data)
        captured_output = io.StringIO()
        sys.stdout = captured_output

        func()

        return captured_output.getvalue().strip()
    
    finally:
        sys.stdin = original_stdin
        sys.stdout = original_stdout

# Write your test cases below
# Each test case should include assertions based on the problem description

# Test case 1: Given example
input_data = "2\n4\n3"
expected_output = "4 1 2 3\n1 2 3"
assert run_program_with_captured_io(input_data) == expected_output

# Test case 2: Minimum value of n
input_data = "1\n3"
expected_output = "1 2 3"
assert run_program_with_captured_io(input_data) == expected_output

# Test case 3: Another small value of n
input_data = "1\n4"
expected_output = "4 1 2 3"
assert run_program_with_captured_io(input_data) == expected_output

# Test case 4: Larger value of n
input_data = "1\n10"
expected_output = "10 1 2 9 3 4 8 5 6 7"
assert run_program_with_captured_io(input_data) == expected_output

# Test case 5: Multiple test cases with different n values
input_data = "3\n3\n4\n5"
expected_output = "1 2 3\n4 1 2 3\n5 1 2 4 3"
assert run_program_with_captured_io(input_data) == expected_output

# Test case 6: Maximum value of n
input_data = "1\n100000"
expected_output = "100000 1 2 99999 3 4 99998 5 6 99997 7 8 99996 9 10 99995 11 12 99994 13 14 99993 15 16 99992 17 18 99991 19 20 99990 21 22 99989 23 24 99988 25 26 99987 27 28 99986 29 30 99985 31 32 99984 33 34 99983 35 36 99982 37 38 99981 39 40 99980 41 42 99979 43 44 99978 45 46 99977 47 48 99976 49 50 99975 51 52 99974 53 54 99973 55 56 99972 57 58 99971 59 60 99970 61 62 99969 63 64 99968 65 66 99967 67 68 99966 69 70 99965 71 72 99964 73 74 99963 75 76 99962 77 78 99961 79 80 99960 81 82 99959 83 84 99958 85 86 99957 87 88 99956 89 90 99955 91 92 99954 93 94 99953 95 96 99952 97 98 99951 99 100 99950 101 102 99949 103 104 99948 105 106 99947 107 108 99946 109 110 99945 111 112 99944 113 114 99943 115 116 99942 117 118 99941 119 120 99940 121 122 99939 123 124 99938 125 126 99937 127 128 99936 129 130 99935 131 132 99934 133 134 99933 135 136 99932 137 138 99931 139 140 99930 141 142 99929 143 144 99928 145 146 99927 147 148 99926 149 150 99925 151 152 99924 153 154 99923 155 156 99922 157 158 99921 159 160 99920 161 162 99919 163 164 99918 165 166 99917 167 168 99916 169 170 99915 171 172 99914 173 174 99913 175 176 99912 177 178 99911 179 180 99910 181 182 99909 183 184 99908 185 186 99907 187 188 99906 189 190 99905 191 192 99904 193 194 99903 195 196 99902 197 198 99901 199 200 99900 201 202 99899 203 204 99898 205 206 99897 207 208 99896 209 210 99895 211 212 99894 213 214 99893 215 216 99892 217 218 99891 219 220 99890 221 222 99889 223 224 99888 225 226 99887 227 228 99886 229 230 99885 231 232 99884 233 234 99883 235 236 99882 237 238 99881 239 240 99880 241 242 99879 243 244 99878 245 246 99877 247 248 99876 249 250 99875 251 252 99874 253 254 99873 255 256 99872 257 258 99871 259 260 99870 261 262 99869 263 264 99868 265 266 99867 267 268 99866 269 270 99865 271 272 99864 273 274 99863 275 276 99862 277 278 99861 279 280 99860 281 282 99859 283 284 99858 285 286 99857 287 288 99856 289 290 99855 291 292 99854 293 294 99853 295 296 99852 297 298 99851 299 300 99850 301 302 99849 303 304 99848 305 306 99847 307 308 99846 309 310 99845 311 312 99844 313 314 99843 315 316 99842 317 318 99841 319 320 99840 321 322 99839 323 324 99838 325 326 99837 327 328 99836 329 330 99835 331 332 99834 333 334 99833 335 336 99832 337 338 99831 339 340 99830 341 342 99829 343 344 99828 345 346 99827 347 348 99826 349 350 99825 351 352 99824 353 354 99823 355 356 99822 357 358 99821 359 360 99820 361 362 99819 363 364 99818 365 366 99817 367 368 99816 369 370 99815 371 372 99814 373 374 99813 375 376 99812 377 378 99811 379 380 99810 381 382 99809 383 384 99808 385 386 99807 387 388 99806 389 390 99805 391 392 99804 393 394 99803 395 396 99802 397 398 99801 399 400 99800 401 402 99799 403 404 99798 405 406 99797 407 408 99796 409 410 99795 411 412 99794 413 414 99793 415 416 99792 417 418 99791 419 420 99790 421 422 99789 423 424 99788 425 426 99787 427 428 99786 429 430 99785 431 432 99784 433 434 99783 435 436 99782 437 438 99781 439 440 99780 441 442 99779 443 444 99778 445 446 99777 447 448 99776 449 450 99775 451 452 99774 453 454 99773 455 456 99772 457 458 99771 459 460 99770 461 462 99769 463 464 99768 465 466 99767 467 468 99766 469 470 99765 471 472 99764 473 474 99763 475 476 99762 477 478 99761 479 480 99760 481 482 99759 483 484 99758 485 486 99757 487 488 99756 489 490 99755 491 492 99754 493 494 99753 495 496 99752 497 498 99751 499 500 99750 501 502 99749 503 504 99748 505 506 99747 507 508 99746 509 510 99745 511 512 99744 513 514 99743 515 516 99742 517 518 99741 519 520 99740 521 522 99739 523 524 99738 525 526 99737 527 528 99736 529 530 99735 531 532 99734 533 534 99733 535 536 99732 537 538 99731 539 540 99730 541 542 99729 543 544 99728 545 546 99727 547 548 99726 549 550 99725 551 552 99724 553 554 99723 555 556 99722 557 558 99721 559 560 99720 561 562 99719 563 564 99718 565 566 99717 567 568 99716 569 570 99715 571 572 99714 573 574 99713 575 576 99712 577 578 99711 579 580 99710 581 582 99709 583 584 99708 585 586 99707 587 588 99706 589 590 99705 591 592 99704 593 594 99703 595 596 99702 597 598 99701 599 600 99700 601 602 99699 603 604 99698 605 606 99697 607 608 99696 609 610 99695 611 612 99694 613 614 99693 615 616 99692 617 618 99691 619 620 99690 621 622 99689 623 624 99688 625 626 99687 627 628 99686 629 630 99685 631 632 99684 633 634 99683 635 636 99682 637 638 99681 639 640 99680 641 642 99679 643 644 99678 645 646 99677 647 648 99676 649 650 99675 651 652 99674 653 654 99673 655 656 99672 657 658 99671 659 660 99670 661 662 99669 663 664 99668 665 666 99667 667 668 99666 669 670 99665 671 672 99664 673 674 99663 675 676 99662 677 678 99661 679 680 99660 681 682 99659 683 684 99658 685 686 99657 687 688 99656 689 690 99655 691 692 99654 693 694 99653 695 696 99652 697 698 99651 699 700 99650 701 702 99649 703 704 99648 705 706 99647 707 708 99646 709 710 99645 711 712 99644 713 714 99643 715 716 99642 717 718 99641 719 720 99640 721 722 99639 723 724 99638 725 726 99637 727 728 99636 729 730 99635 731 732 99634 733 734 99633 735 736 99632 737 738 99631 739 740 99630 741 742 99629 743 744 99628 745 746 99627 747 748 99626 749 750 99625 751 752 99624 753 754 99623 755 756 99622 757 758 99621 759 760 99620 761 762 99619 763 764 99618 765 766 99617 767 768 99616 769 770 99615 771 772 99614 773 774 99613 775 776 99612 777 778 99611 779 780 99610 781 782 99609 783 784 99608 785 786 99607 787 788 99606 789 790 99605 791 792 99604 793 794 99603 795 796 99602 797 798 99601 799 800 99600 801 802 99599 803 804 99598 805 806 99597 807 808 99596 809 810 99595 811 812 99594 813 814 99593 815 816 99592 817 818 99591 819 820 99590 821 822 99589 823 824 99588 825 826 99587 827 828 99586 829 830 99585 831 832 99584 833 834 99583 835 836 99582 837 838 99581 839 840 99580 841 842 99579 843 844 99578 845 846 99577 847 848 99576 849 850 99575 851 852 99574 853 854 99573 855 856 99572 857 858 99571 859 860 99570 861 862 99569 863 864 99568 865 866 99567 867 868 99566 869 870 99565 871 872 99564 873 874 99563 875 876 99562 877 878 99561 879 880 99560 881 882 99559 883 884 99558 885 886 99557 887 888 99556 889 890 99555 891 892 99554 893 894 99553 895 896 99552 897 898 99551 899 900 99550 901 902 99549 903 904 99548 905 906 99547 907 908 99546 909 910 99545 911 912 99544 913 914 99543 915 916 99542 917 918 99541 919 920 99540 921 922 99539 923 924 99538 925 926 99537 927 928 99536 929 930 99535 931 932 99534 933 934 99533 935 936 99532 937 938 99531 939 940 99530 941 942 99529 943 944 99528 945 946 99527 947 948 99526 949 950 99525 951 952 99524 953 954 99523 955 956 99522 957 958 99521 959 960 99520 961 962 99519 963 964 99518 965 966 99517 967 968 99516 969 970 99515 971 972 99514 973 974 99513 975 976 99512 977 978 99511 979 980 99510 981 982 99509 983 984 99508 985 986 99507 987 988 99506 989 990 99505 991 992 99504 993 994 99503 995 996 99502 997 998 99501 999 1000 99500 1001 1002 99499 1003 1004 99498 1005 1006 99497 1007 1008 99496 1009 1010 99495 1011 1012 99494 1013 1014 99493 1015 1016 99492 1017 1018 99491 1019 1020 99490 1021 1022 99489 1023 1024 99488 1025 1026 99487 1027 1028 99486 1029 1030 99485 1031 1032 99484 1033 1034 99483 1035 1036 99482 1037 1038 99481 1039 1040 99480 1041 1042 99479 1043 1044 99478 1045 1046 99477 1047 1048 99476 1049 1050 99475 1051 1052 99474 1053 1054 99473 1055 1056 99472 1057 1058 99471 1059 1060 99470 1061 1062 99469 1063 1064 99468 1065 1066 99467 1067 1068 99466 1069 1070 99465 1071 1072 99464 1073 1074 99463 1075 1076 99462 1077 1078 99461 1079 1080 99460 1081 1082 99459 1083 1084 99458 1085 1086 99457 1087 1088 99456 1089 1090 99455 1091 1092 99454 1093 1094 99453 1095 1096 99452 1097 1098 99451 1099 1100 99450 1101 1102 99449 1103 1104 99448 1105 1106 99447 1107