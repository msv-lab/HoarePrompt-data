The function accepts a string of digits `chars` and a non-empty substring of digits `sub`, and yields all valid permutations of `chars` that satisfy the condition defined by the `is_valid_number` function with respect to `sub`. If `chars` is empty, no candidates will be yielded. If `sub` is longer than `chars`, no valid permutations can be formed, and thus no candidates will be yielded. The function does not insert `sub` into `chars`, but rather checks the validity of permutations of `chars` against `sub`.