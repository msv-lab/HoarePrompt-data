The function accepts a string of digits `chars` and a non-empty substring `sub`, generating all permutations of `chars`. For each permutation, it checks if the resulting string is a valid number based on the criteria defined in the `is_valid_number` function with respect to `sub`. It yields each valid candidate number. If `chars` is empty or if no valid candidates can be formed, the function yields nothing. The function does not return a list; instead, it yields valid candidates one at a time.