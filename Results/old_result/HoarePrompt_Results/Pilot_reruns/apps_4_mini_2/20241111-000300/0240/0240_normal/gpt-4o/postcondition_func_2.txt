The function accepts a string of digits `chars` and a non-empty substring of digits `sub`, generating valid permutations of `chars` based on the validity defined by `is_valid_number`. If `chars` is empty, no candidates are yielded, and if it contains duplicates, those duplicates may lead to repeated outputs.