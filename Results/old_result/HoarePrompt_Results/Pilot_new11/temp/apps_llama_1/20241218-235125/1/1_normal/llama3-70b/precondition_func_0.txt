The function operates on a string s that consists of lowercase Latin letters and characters [, ], :, |, and has a length between 1 and 500000 (inclusive).