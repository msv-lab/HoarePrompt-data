sofa is a tuple containing the coordinates of a sofa (x1, y1, x2, y2), sofas is a list of tuples where each tuple contains the coordinates of a sofa, and d, n, m are integers such that 1 ≤ d ≤ 10^5, 1 ≤ n, m ≤ 10^5.