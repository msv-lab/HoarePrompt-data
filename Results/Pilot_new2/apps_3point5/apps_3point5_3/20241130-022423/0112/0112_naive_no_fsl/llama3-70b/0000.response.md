Correctness: False

The given program does not handle the constraint that Masha can't make digit 6 from digit 9 and vice-versa using cube rotations. The program simply considers all digits from the cubes without taking this constraint into account. As a result, the program may calculate the maximum number x incorrectly in certain cases. 

For example, consider the following input:
3
0 1 9 3 4 5
6 7 8 1 0 2
2 3 4 5 6 7

The correct output for this input should be 97 (using the cubes to form numbers from 1 to 97), but the program may output a different result due to not considering the constraint mentioned above. 

Therefore, the program is incorrect as it does not meet all the requirements stated in the problem description.