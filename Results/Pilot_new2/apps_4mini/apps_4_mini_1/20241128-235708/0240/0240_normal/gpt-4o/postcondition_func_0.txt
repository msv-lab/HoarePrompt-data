The function accepts a non-empty string of digits `s` and a non-empty substring `sub`, and it returns the smallest number that can be formed from the characters remaining in `s` after removing all occurrences of `sub`. It handles cases where `sub` has leading zeroes and ensures that the smallest number is determined through integer comparison of the possible combinations. If `sub` is not found in `s`, all characters of `s` are considered, and the smallest number is derived from the complete string `s`.