The function accepts a string of digits `chars` and a non-empty string of digits `sub`, and yields all valid permutations of `chars` that satisfy the condition defined by the `is_valid_number` function in relation to `sub`. It does not return a list of possible numbers but rather a generator that yields each valid permutation one at a time. The function handles a maximum length of `chars` up to 1,000,000, but the performance may be impacted due to the large number of permutations generated. If no valid permutations exist, no candidates are yielded.