The function accepts a positive integer `n` (between 2 and 10^6) and a non-negative integer `f_max_n`, and it calculates the number of combinations of permutations of integers from 1 to `n` that sum to at most `f_max_n`. The result is returned modulo 10^9 + 7. The function does not handle cases where `f_max_n` is 0, as the initial state of `dp` is set for `f_max_n` starting from 1.