The function accepts a string of digits `chars` and a non-empty string of digits `sub`, generating all possible permutations of `chars`. For each permutation, it checks if it is a valid number according to the `is_valid_number` function when evaluated with `sub`. If valid, it yields that permutation. If `chars` is empty, no permutations are generated. If `chars` contains only one character, the function yields that character if it is valid. The function does not check for cases where `sub` might be invalid or if there are no valid permutations, and it assumes `is_valid_number` correctly determines the validity of each candidate.