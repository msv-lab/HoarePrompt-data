Reasoning:

1. **Initialization and Input Handling**: The program correctly reads the input values and initializes the decks (`deck1` and `deck2`) as lists of integers. This matches the problem's input format.

2. **Cycle Detection**: The program uses a set `seen` to keep track of all previously encountered states (tuples of the current state of `deck1` and `deck2`). This is crucial for detecting cycles, which would indicate an infinite loop in the game.

3. **Game Logic**:
   - In each iteration of the while loop, the top cards from both decks are popped.
   - The winner of the round (the player with the higher card) appends both cards to the bottom of their deck, with the opponent's card first.
   - The loop continues until one of the decks is empty.

4. **Winning Condition**:
   - If a cycle is detected (i.e., a state is repeated), the function returns `-1`.
   - If the loop exits because one of the decks is empty, the function returns a tuple containing the number of unique states (which corresponds to the number of fights) and the winning player (1 or 2).

5. **Output Format**: The output format matches the problem's requirements. If the game ends, it returns the number of fights and the winning player. If the game does not end, it returns `-1`.

Given the above points, the program appears to correctly implement the game logic and handle all edge cases as described in the problem statement.

Correctness: **True**