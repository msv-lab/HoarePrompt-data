Reasoning:

1. **Input Handling**: The program correctly reads the inputs as specified in the problem statement. It reads `n`, the number of cards, and then the number of cards and the cards themselves for the first player, followed by the same for the second player. This is consistent with the problem description.

2. **Game Simulation**: The program uses a while loop to simulate the game, which continues as long as both players have cards. This is appropriate because the game ends when one player runs out of cards.

3. **State Tracking**: The program uses a set `seen` to keep track of the states (tuples of the current decks) to detect cycles. If a state repeats, it means the game will continue indefinitely, and the program returns `-1`. This is a correct approach to detect infinite loops.

4. **Card Comparison and Stack Management**: During each turn, the program compares the top cards of both players. The winner of the turn appends the opponent's card followed by their own card to the bottom of their deck. This follows the rules of the game correctly.

5. **Result Calculation**: After the loop, the program checks which player has cards left and returns the number of fights (which is the size of the `seen` set) along with the winning player's number. The `len(seen)` represents the number of unique states encountered, which corresponds to the number of fights.

6. **Edge Cases**: The program handles edge cases such as one player having no cards initially, which would result in an immediate win for the other player. The program correctly identifies and handles these scenarios.

7. **Cycle Detection**: The use of a set to track states ensures that if a cycle is detected, the program will return `-1` immediately, which is the correct behavior for detecting an infinite loop.

Given these points, the program correctly implements the game logic and handles all specified cases. The original assessment is accurate.

Final: **True**